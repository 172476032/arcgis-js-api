// COPYRIGHT Â© 2018 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/4.6/esri/copyright.txt for details.

define(["require","exports","../../kernel","../kernel","../languageUtils","./centroid","../../geometry/Extent","../../geometry/Geometry","../../geometry/Multipoint","../../geometry/Point","../../geometry/Polygon","../../geometry/Polyline","../../geometry/support/jsonUtils"],function(n,e,r,t,i,l,o,u,f,a,c,s,g){function d(n){return E?n.clone():g.fromJSON(n.toJSON())}function h(n){return 0===r.version.indexOf("4.")?c.fromExtent(n):new c({spatialReference:n.spatialReference,rings:[[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]]})}function m(n){p=n}function w(n,e){function r(n){if(i.pcCheck(n,2,2),n[0]instanceof u&&n[1]instanceof u);else if(n[0]instanceof u&&null===n[1]);else if(n[1]instanceof u&&null===n[0]);else if(null!==n[0]||null!==n[1])throw new Error("Illegal Argument")}n.disjoint=function(n,t){return e(n,t,function(n,e,t){return r(t),null===t[0]||null===t[1]||p.disjoint(t[0],t[1])})},n.intersects=function(n,t){return e(n,t,function(n,e,t){return r(t),null!==t[0]&&null!==t[1]&&p.intersects(t[0],t[1])})},n.touches=function(n,t){return e(n,t,function(n,e,t){return r(t),null!==t[0]&&null!==t[1]&&p.touches(t[0],t[1])})},n.crosses=function(n,t){return e(n,t,function(n,e,t){return r(t),null!==t[0]&&null!==t[1]&&p.crosses(t[0],t[1])})},n.within=function(n,t){return e(n,t,function(n,e,t){return r(t),null!==t[0]&&null!==t[1]&&p.within(t[0],t[1])})},n.contains=function(n,t){return e(n,t,function(n,e,t){return r(t),null!==t[0]&&null!==t[1]&&p.contains(t[0],t[1])})},n.overlaps=function(n,t){return e(n,t,function(n,e,t){return r(t),null!==t[0]&&null!==t[1]&&p.overlaps(t[0],t[1])})},n.equals=function(n,r){return e(n,r,function(n,e,r){return i.pcCheck(r,2,2),r[0]===r[1]||(r[0]instanceof u&&r[1]instanceof u?p.equals(r[0],r[1]):!(!i.isDate(r[0])||!i.isDate(r[1]))&&r[0].getTime()===r[1].getTime())})},n.relate=function(n,r){return e(n,r,function(n,e,r){if(i.pcCheck(r,3,3),r[0]instanceof u&&r[1]instanceof u)return p.relate(r[0],r[1],i.toString(r[2]));if(r[0]instanceof u&&null===r[1])return!1;if(r[1]instanceof u&&null===r[0])return!1;if(null===r[0]&&null===r[1])return!1;throw new Error("Illegal Argument")})},n.intersection=function(n,t){return e(n,t,function(n,e,t){return r(t),null===t[0]||null===t[1]?null:p.intersect(t[0],t[1])})},n.union=function(n,r){return e(n,r,function(e,r,t){var l=[];if(0===t.length)throw new Error("Function called with wrong number of Parameters");if(1===t.length)if(i.isArray(t[0])){for(var o=0;o<t[0].length;o++)if(null!==t[0][o]){if(!(t[0][o]instanceof u))throw new Error("Illegal Argument");l.push(t[0][o])}}else{if(!i.isImmutableArray(t[0])){if(t[0]instanceof u)return i.fixSpatialReference(d(t[0]),n.spatialReference);if(null===t[0])return null;throw new Error("Illegal Argument")}for(var f=t[0].toArray(),o=0;o<f.length;o++)if(null!==f[o]){if(!(f[o]instanceof u))throw new Error("Illegal Argument");l.push(f[o])}}else for(var o=0;o<t.length;o++)if(null!==t[o]){if(!(t[o]instanceof u))throw new Error("Illegal Argument");l.push(t[o])}return 0===l.length?null:p.union(l)})},n.difference=function(n,t){return e(n,t,function(n,e,t){return r(t),null!==t[0]&&null===t[1]?d(t[0]):null===t[0]?null:p.difference(t[0],t[1])})},n.symmetricdifference=function(n,t){return e(n,t,function(n,e,t){return r(t),null===t[0]&&null===t[1]?null:null===t[0]?d(t[1]):null===t[1]?d(t[0]):p.symmetricDifference(t[0],t[1])})},n.clip=function(n,r){return e(n,r,function(n,e,r){if(i.pcCheck(r,2,2),!(r[1]instanceof o)&&null!==r[1])throw new Error("Illegal Argument");if(null===r[0])return null;if(!(r[0]instanceof u))throw new Error("Illegal Argument");return null===r[1]?null:p.clip(r[0],r[1])})},n.cut=function(n,r){return e(n,r,function(n,e,r){if(i.pcCheck(r,2,2),!(r[1]instanceof s)&&null!==r[1])throw new Error("Illegal Argument");if(null===r[0])return[];if(!(r[0]instanceof u))throw new Error("Illegal Argument");return null===r[1]?[d(r[0])]:p.cut(r[0],r[1])})},n.area=function(n,r){return e(n,r,function(n,e,r){if(i.pcCheck(r,1,2),null===r[0])return 0;if(!(r[0]instanceof u))throw new Error("Illegal Argument");return p.planarArea(r[0],t.convertSquareUnitsToCode(i.defaultUndefined(r[1],-1)))})},n.areageodetic=function(n,r){return e(n,r,function(n,e,r){if(i.pcCheck(r,1,2),null===r[0])return 0;if(!(r[0]instanceof u))throw new Error("Illegal Argument");return p.geodesicArea(r[0],t.convertSquareUnitsToCode(i.defaultUndefined(r[1],-1)))})},n.length=function(n,r){return e(n,r,function(n,e,r){if(i.pcCheck(r,1,2),null===r[0])return 0;if(!(r[0]instanceof u))throw new Error("Illegal Argument");return p.planarLength(r[0],t.convertLinearUnitsToCode(i.defaultUndefined(r[1],-1)))})},n.lengthgeodetic=function(n,r){return e(n,r,function(n,e,r){if(i.pcCheck(r,1,2),null===r[0])return 0;if(!(r[0]instanceof u))throw new Error("Illegal Argument");return p.geodesicLength(r[0],t.convertLinearUnitsToCode(i.defaultUndefined(r[1],-1)))})},n.distance=function(n,r){return e(n,r,function(n,e,r){if(i.pcCheck(r,2,3),!(r[0]instanceof u))throw new Error("Illegal Argument");if(!(r[1]instanceof u))throw new Error("Illegal Argument");return p.distance(r[0],r[1],t.convertLinearUnitsToCode(i.defaultUndefined(r[2],-1)))})},n.densify=function(n,r){return e(n,r,function(n,e,r){if(i.pcCheck(r,2,3),null===r[0])return null;if(!(r[0]instanceof u))throw new Error("Illegal Argument");var l=i.toNumber(r[1]);if(isNaN(l))throw new Error("Illegal Argument");if(l<=0)throw new Error("Illegal Argument");return r[0]instanceof c||r[0]instanceof s?p.densify(r[0],l,t.convertLinearUnitsToCode(i.defaultUndefined(r[2],-1))):r[0]instanceof o?p.densify(h(r[0]),l,t.convertLinearUnitsToCode(i.defaultUndefined(r[2],-1))):r[0]})},n.densifygeodetic=function(n,r){return e(n,r,function(n,e,r){if(i.pcCheck(r,2,3),null===r[0])return null;if(!(r[0]instanceof u))throw new Error("Illegal Argument");var l=i.toNumber(r[1]);if(isNaN(l))throw new Error("Illegal Argument");if(l<=0)throw new Error("Illegal Argument");return r[0]instanceof c||r[0]instanceof s?p.geodesicDensify(r[0],l,t.convertLinearUnitsToCode(i.defaultUndefined(r[2],-1))):r[0]instanceof o?p.geodesicDensify(h(r[0]),l,t.convertLinearUnitsToCode(i.defaultUndefined(r[2],-1))):r[0]})},n.generalize=function(n,r){return e(n,r,function(n,e,r){if(i.pcCheck(r,2,4),null===r[0])return null;if(!(r[0]instanceof u))throw new Error("Illegal Argument");var l=i.toNumber(r[1]);if(isNaN(l))throw new Error("Illegal Argument");return p.generalize(r[0],l,i.toBoolean(i.defaultUndefined(r[2],!0)),t.convertLinearUnitsToCode(i.defaultUndefined(r[3],-1)))})},n.buffer=function(n,r){return e(n,r,function(n,e,r){if(i.pcCheck(r,2,3),null===r[0])return null;if(!(r[0]instanceof u))throw new Error("Illegal Argument");var l=i.toNumber(r[1]);if(isNaN(l))throw new Error("Illegal Argument");return 0===l?d(r[0]):p.buffer(r[0],l,t.convertLinearUnitsToCode(i.defaultUndefined(r[2],-1)))})},n.buffergeodetic=function(n,r){return e(n,r,function(n,e,r){if(i.pcCheck(r,2,3),null===r[0])return null;if(!(r[0]instanceof u))throw new Error("Illegal Argument");var l=i.toNumber(r[1]);if(isNaN(l))throw new Error("Illegal Argument");return 0===l?d(r[0]):p.geodesicBuffer(r[0],l,t.convertLinearUnitsToCode(i.defaultUndefined(r[2],-1)))})},n.offset=function(n,r){return e(n,r,function(n,e,r){if(i.pcCheck(r,2,6),null===r[0])return null;if(!(r[0]instanceof c||r[0]instanceof s))throw new Error("Illegal Argument");var l=i.toNumber(r[1]);if(isNaN(l))throw new Error("Illegal Argument");var o=i.toNumber(i.defaultUndefined(r[4],10));if(isNaN(o))throw new Error("Illegal Argument");var u=i.toNumber(i.defaultUndefined(r[5],0));if(isNaN(u))throw new Error("Illegal Argument");return p.offset(r[0],l,t.convertLinearUnitsToCode(i.defaultUndefined(r[2],-1)),i.toString(i.defaultUndefined(r[3],"round")).toLowerCase(),o,u)})},n.rotate=function(n,r){return e(n,r,function(n,e,r){i.pcCheck(r,2,3);var t=r[0];if(null===t)return null;if(!(t instanceof u))throw new Error("Illegal Argument");t instanceof o&&(t=c.fromExtent(t));var l=i.toNumber(r[1]);if(isNaN(l))throw new Error("Illegal Argument");var f=i.defaultUndefined(r[2],null);if(null===f)return p.rotate(t,l);if(f instanceof a)return p.rotate(t,l,f);throw new Error("Illegal Argument")})},n.centroid=function(n,r){return e(n,r,function(e,r,t){if(i.pcCheck(t,1,1),null===t[0])return null;if(!(t[0]instanceof u))throw new Error("Illegal Argument");return t[0]instanceof a?i.fixSpatialReference(d(t[0]),n.spatialReference):t[0]instanceof c?E?t[0].centroid:t[0].getCentroid():t[0]instanceof s?l.centroidPolyline(t[0]):t[0]instanceof f?l.centroidMultiPoint(t[0]):t[0]instanceof o?E?t[0].center:t[0].getExtent().getCenter():null})},n.multiparttosinglepart=function(n,r){return e(n,r,function(e,r,t){i.pcCheck(t,1,1);var l=[];if(null===t[0])return null;if(!(t[0]instanceof u))throw new Error("Illegal Argument");if(t[0]instanceof a)return[i.fixSpatialReference(d(t[0]),n.spatialReference)];if(t[0]instanceof o)return[i.fixSpatialReference(d(t[0]),n.spatialReference)];var h=p.simplify(t[0]);if(h instanceof c){for(var m=[],w=[],A=0;A<h.rings.length;A++)if(h.isClockwise(h.rings[A])){var v=g.fromJSON({rings:[h.rings[A]],hasZ:h.hasZ,hasM:h.hasM,spatialReference:E?h.spatialReference.toJSON():h.spatialReference.toJson()});m.push(v)}else w.push({ring:h.rings[A],pt:h.getPoint(A,0)});for(var I=0;I<w.length;I++)for(var C=0;C<m.length;C++)if(m[C].contains(w[I].pt)){m[C].addRing(w[I].ring);break}return m}if(h instanceof s){for(var N=[],A=0;A<h.paths.length;A++){var U=g.fromJSON({paths:[h.paths[A]],hasZ:h.hasZ,hasM:h.hasM,spatialReference:E?h.spatialReference.toJSON():h.spatialReference.toJson()});N.push(U)}return N}if(t[0]instanceof f){for(var y=i.fixSpatialReference(d(t[0]),n.spatialReference),A=0;A<y.points.length;A++)l.push(y.getPoint(A));return l}return null})},n.issimple=function(n,r){return e(n,r,function(n,e,r){if(i.pcCheck(r,1,1),null===r[0])return!0;if(r[0]instanceof u)return p.isSimple(r[0]);throw new Error("Illegal Argument")})},n.simplify=function(n,r){return e(n,r,function(n,e,r){if(i.pcCheck(r,1,1),null===r[0])return null;if(r[0]instanceof u)return p.simplify(r[0]);throw new Error("Illegal Argument")})}}Object.defineProperty(e,"__esModule",{value:!0});var p=null,E=0===r.version.indexOf("4.");e.setGeometryEngine=m,e.registerFunctions=w});