// COPYRIGHT Â© 201 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/3.23/esri/copyright.txt for details.

define(["require","exports","../../geometry/Geometry","../../geometry/Polygon","../../geometry/Polyline","../../geometry/Point","../../geometry/Extent","../../geometry/Multipoint","../../geometry/jsonUtils","./centroid","../languageUtils","../kernel","../../kernel"],function(n,e,r,t,i,l,o,u,f,a,c,s,g){function d(n){return E?n.clone():f.fromJson(n.toJson())}function h(n){return 0===g.version.indexOf("4.")?t.fromExtent(n):new t({spatialReference:n.spatialReference,rings:[[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]]})}function m(n){p=n}function w(n,e){function g(n){if(c.pcCheck(n,2,2),n[0]instanceof r&&n[1]instanceof r);else if(n[0]instanceof r&&null===n[1]);else if(n[1]instanceof r&&null===n[0]);else if(null!==n[0]||null!==n[1])throw new Error("Illegal Argument")}n.disjoint=function(n,r){return e(n,r,function(n,e,r){return g(r),null===r[0]||null===r[1]||p.disjoint(r[0],r[1])})},n.intersects=function(n,r){return e(n,r,function(n,e,r){return g(r),null!==r[0]&&null!==r[1]&&p.intersects(r[0],r[1])})},n.touches=function(n,r){return e(n,r,function(n,e,r){return g(r),null!==r[0]&&null!==r[1]&&p.touches(r[0],r[1])})},n.crosses=function(n,r){return e(n,r,function(n,e,r){return g(r),null!==r[0]&&null!==r[1]&&p.crosses(r[0],r[1])})},n.within=function(n,r){return e(n,r,function(n,e,r){return g(r),null!==r[0]&&null!==r[1]&&p.within(r[0],r[1])})},n.contains=function(n,r){return e(n,r,function(n,e,r){return g(r),null!==r[0]&&null!==r[1]&&p.contains(r[0],r[1])})},n.overlaps=function(n,r){return e(n,r,function(n,e,r){return g(r),null!==r[0]&&null!==r[1]&&p.overlaps(r[0],r[1])})},n.equals=function(n,t){return e(n,t,function(n,e,t){return c.pcCheck(t,2,2),t[0]===t[1]||(t[0]instanceof r&&t[1]instanceof r?p.equals(t[0],t[1]):!(!c.isDate(t[0])||!c.isDate(t[1]))&&t[0].getTime()===t[1].getTime())})},n.relate=function(n,t){return e(n,t,function(n,e,t){if(c.pcCheck(t,3,3),t[0]instanceof r&&t[1]instanceof r)return p.relate(t[0],t[1],c.toString(t[2]));if(t[0]instanceof r&&null===t[1])return!1;if(t[1]instanceof r&&null===t[0])return!1;if(null===t[0]&&null===t[1])return!1;throw new Error("Illegal Argument")})},n.intersection=function(n,r){return e(n,r,function(n,e,r){return g(r),null===r[0]||null===r[1]?null:p.intersect(r[0],r[1])})},n.union=function(n,t){return e(n,t,function(e,t,i){var l=[];if(0===i.length)throw new Error("Function called with wrong number of Parameters");if(1===i.length)if(c.isArray(i[0])){for(var o=0;o<i[0].length;o++)if(null!==i[0][o]){if(!(i[0][o]instanceof r))throw new Error("Illegal Argument");l.push(i[0][o])}}else{if(!c.isImmutableArray(i[0])){if(i[0]instanceof r)return c.fixSpatialReference(d(i[0]),n.spatialReference);if(null===i[0])return null;throw new Error("Illegal Argument")}for(var u=i[0].toArray(),o=0;o<u.length;o++)if(null!==u[o]){if(!(u[o]instanceof r))throw new Error("Illegal Argument");l.push(u[o])}}else for(var o=0;o<i.length;o++)if(null!==i[o]){if(!(i[o]instanceof r))throw new Error("Illegal Argument");l.push(i[o])}return 0===l.length?null:p.union(l)})},n.difference=function(n,r){return e(n,r,function(n,e,r){return g(r),null!==r[0]&&null===r[1]?d(r[0]):null===r[0]?null:p.difference(r[0],r[1])})},n.symmetricdifference=function(n,r){return e(n,r,function(n,e,r){return g(r),null===r[0]&&null===r[1]?null:null===r[0]?d(r[1]):null===r[1]?d(r[0]):p.symmetricDifference(r[0],r[1])})},n.clip=function(n,t){return e(n,t,function(n,e,t){if(c.pcCheck(t,2,2),!(t[1]instanceof o)&&null!==t[1])throw new Error("Illegal Argument");if(null===t[0])return null;if(!(t[0]instanceof r))throw new Error("Illegal Argument");return null===t[1]?null:p.clip(t[0],t[1])})},n.cut=function(n,t){return e(n,t,function(n,e,t){if(c.pcCheck(t,2,2),!(t[1]instanceof i)&&null!==t[1])throw new Error("Illegal Argument");if(null===t[0])return[];if(!(t[0]instanceof r))throw new Error("Illegal Argument");return null===t[1]?[d(t[0])]:p.cut(t[0],t[1])})},n.area=function(n,t){return e(n,t,function(n,e,t){if(c.pcCheck(t,1,2),null===t[0])return 0;if(!(t[0]instanceof r))throw new Error("Illegal Argument");return p.planarArea(t[0],s.convertSquareUnitsToCode(c.defaultUndefined(t[1],-1)))})},n.areageodetic=function(n,t){return e(n,t,function(n,e,t){if(c.pcCheck(t,1,2),null===t[0])return 0;if(!(t[0]instanceof r))throw new Error("Illegal Argument");return p.geodesicArea(t[0],s.convertSquareUnitsToCode(c.defaultUndefined(t[1],-1)))})},n.length=function(n,t){return e(n,t,function(n,e,t){if(c.pcCheck(t,1,2),null===t[0])return 0;if(!(t[0]instanceof r))throw new Error("Illegal Argument");return p.planarLength(t[0],s.convertLinearUnitsToCode(c.defaultUndefined(t[1],-1)))})},n.lengthgeodetic=function(n,t){return e(n,t,function(n,e,t){if(c.pcCheck(t,1,2),null===t[0])return 0;if(!(t[0]instanceof r))throw new Error("Illegal Argument");return p.geodesicLength(t[0],s.convertLinearUnitsToCode(c.defaultUndefined(t[1],-1)))})},n.distance=function(n,t){return e(n,t,function(n,e,t){if(c.pcCheck(t,2,3),!(t[0]instanceof r))throw new Error("Illegal Argument");if(!(t[1]instanceof r))throw new Error("Illegal Argument");return p.distance(t[0],t[1],s.convertLinearUnitsToCode(c.defaultUndefined(t[2],-1)))})},n.densify=function(n,l){return e(n,l,function(n,e,l){if(c.pcCheck(l,2,3),null===l[0])return null;if(!(l[0]instanceof r))throw new Error("Illegal Argument");var u=c.toNumber(l[1]);if(isNaN(u))throw new Error("Illegal Argument");if(u<=0)throw new Error("Illegal Argument");return l[0]instanceof t||l[0]instanceof i?p.densify(l[0],u,s.convertLinearUnitsToCode(c.defaultUndefined(l[2],-1))):l[0]instanceof o?p.densify(h(l[0]),u,s.convertLinearUnitsToCode(c.defaultUndefined(l[2],-1))):l[0]})},n.densifygeodetic=function(n,l){return e(n,l,function(n,e,l){if(c.pcCheck(l,2,3),null===l[0])return null;if(!(l[0]instanceof r))throw new Error("Illegal Argument");var u=c.toNumber(l[1]);if(isNaN(u))throw new Error("Illegal Argument");if(u<=0)throw new Error("Illegal Argument");return l[0]instanceof t||l[0]instanceof i?p.geodesicDensify(l[0],u,s.convertLinearUnitsToCode(c.defaultUndefined(l[2],-1))):l[0]instanceof o?p.geodesicDensify(h(l[0]),u,s.convertLinearUnitsToCode(c.defaultUndefined(l[2],-1))):l[0]})},n.generalize=function(n,t){return e(n,t,function(n,e,t){if(c.pcCheck(t,2,4),null===t[0])return null;if(!(t[0]instanceof r))throw new Error("Illegal Argument");var i=c.toNumber(t[1]);if(isNaN(i))throw new Error("Illegal Argument");return p.generalize(t[0],i,c.toBoolean(c.defaultUndefined(t[2],!0)),s.convertLinearUnitsToCode(c.defaultUndefined(t[3],-1)))})},n.buffer=function(n,t){return e(n,t,function(n,e,t){if(c.pcCheck(t,2,3),null===t[0])return null;if(!(t[0]instanceof r))throw new Error("Illegal Argument");var i=c.toNumber(t[1]);if(isNaN(i))throw new Error("Illegal Argument");return 0===i?d(t[0]):p.buffer(t[0],i,s.convertLinearUnitsToCode(c.defaultUndefined(t[2],-1)))})},n.buffergeodetic=function(n,t){return e(n,t,function(n,e,t){if(c.pcCheck(t,2,3),null===t[0])return null;if(!(t[0]instanceof r))throw new Error("Illegal Argument");var i=c.toNumber(t[1]);if(isNaN(i))throw new Error("Illegal Argument");return 0===i?d(t[0]):p.geodesicBuffer(t[0],i,s.convertLinearUnitsToCode(c.defaultUndefined(t[2],-1)))})},n.offset=function(n,r){return e(n,r,function(n,e,r){if(c.pcCheck(r,2,6),null===r[0])return null;if(!(r[0]instanceof t||r[0]instanceof i))throw new Error("Illegal Argument");var l=c.toNumber(r[1]);if(isNaN(l))throw new Error("Illegal Argument");var o=c.toNumber(c.defaultUndefined(r[4],10));if(isNaN(o))throw new Error("Illegal Argument");var u=c.toNumber(c.defaultUndefined(r[5],0));if(isNaN(u))throw new Error("Illegal Argument");return p.offset(r[0],l,s.convertLinearUnitsToCode(c.defaultUndefined(r[2],-1)),c.toString(c.defaultUndefined(r[3],"round")).toLowerCase(),o,u)})},n.rotate=function(n,i){return e(n,i,function(n,e,i){c.pcCheck(i,2,3);var u=i[0];if(null===u)return null;if(!(u instanceof r))throw new Error("Illegal Argument");u instanceof o&&(u=t.fromExtent(u));var f=c.toNumber(i[1]);if(isNaN(f))throw new Error("Illegal Argument");var a=c.defaultUndefined(i[2],null);if(null===a)return p.rotate(u,f);if(a instanceof l)return p.rotate(u,f,a);throw new Error("Illegal Argument")})},n.centroid=function(n,f){return e(n,f,function(e,f,s){if(c.pcCheck(s,1,1),null===s[0])return null;if(!(s[0]instanceof r))throw new Error("Illegal Argument");return s[0]instanceof l?c.fixSpatialReference(d(s[0]),n.spatialReference):s[0]instanceof t?E?s[0].centroid:s[0].getCentroid():s[0]instanceof i?a.centroidPolyline(s[0]):s[0]instanceof u?a.centroidMultiPoint(s[0]):s[0]instanceof o?E?s[0].center:s[0].getExtent().getCenter():null})},n.multiparttosinglepart=function(n,a){return e(n,a,function(e,a,s){c.pcCheck(s,1,1);var g=[];if(null===s[0])return null;if(!(s[0]instanceof r))throw new Error("Illegal Argument");if(s[0]instanceof l)return[c.fixSpatialReference(d(s[0]),n.spatialReference)];if(s[0]instanceof o)return[c.fixSpatialReference(d(s[0]),n.spatialReference)];var h=p.simplify(s[0]);if(h instanceof t){for(var m=[],w=[],E=0;E<h.rings.length;E++)if(h.isClockwise(h.rings[E])){var A=f.fromJson({rings:[h.rings[E]],hasZ:h.hasZ,hasM:h.hasM,spatialReference:h.spatialReference.toJson()});m.push(A)}else w.push({ring:h.rings[E],pt:h.getPoint(E,0)});for(var v=0;v<w.length;v++)for(var I=0;I<m.length;I++)if(m[I].contains(w[v].pt)){m[I].addRing(w[v].ring);break}return m}if(h instanceof i){for(var C=[],E=0;E<h.paths.length;E++){var U=f.fromJson({paths:[h.paths[E]],hasZ:h.hasZ,hasM:h.hasM,spatialReference:h.spatialReference.toJson()});C.push(U)}return C}if(s[0]instanceof u){for(var y=c.fixSpatialReference(d(s[0]),n.spatialReference),E=0;E<y.points.length;E++)g.push(y.getPoint(E));return g}return null})},n.issimple=function(n,t){return e(n,t,function(n,e,t){if(c.pcCheck(t,1,1),null===t[0])return!0;if(t[0]instanceof r)return p.isSimple(t[0]);throw new Error("Illegal Argument")})},n.simplify=function(n,t){return e(n,t,function(n,e,t){if(c.pcCheck(t,1,1),null===t[0])return null;if(t[0]instanceof r)return p.simplify(t[0]);throw new Error("Illegal Argument")})}}Object.defineProperty(e,"__esModule",{value:!0});var p=null,E=0===g.version.indexOf("4.");e.setGeometryEngine=m,e.registerFunctions=w});