// COPYRIGHT Â© 2017 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/4.6/esri/copyright.txt for details.

define(["require","exports","../../../core/tsSupport/extendsHelper","../../../core/tsSupport/decorateHelper","./StyleDefinition","./StyleProperty","./Filter"],function(t,i,e,a,n,o,r){Object.defineProperty(i,"__esModule",{value:!0});var u=function(){function t(t,i,e){switch(this.type=t,this.id=i.id,this.source=i.source,this.sourceLayer=i["source-layer"],this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,this.filter=i.filter,this.layout=i.layout,this.paint=i.paint,this.z=e,t){case 0:this._layoutDefinition=n.StyleDefinition.backgroundLayoutDefinition,this._paintDefinition=n.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=n.StyleDefinition.fillLayoutDefinition,this._paintDefinition=n.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=n.StyleDefinition.lineLayoutDefinition,this._paintDefinition=n.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=n.StyleDefinition.symbolLayoutDefinition,this._paintDefinition=n.StyleDefinition.symbolPaintDefinition}this._layoutProperties=this._parseLayout(this.layout),this._paintProperties=this._parsePaint(this.paint)}return t.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=r.createFilter(this.filter)},t.prototype.getLayoutProperty=function(t){var i=this._layoutProperties;return i?i[t]:void 0},t.prototype.getPaintProperty=function(t){var i=this._paintProperties;return i?i[t]:void 0},t.prototype.getLayoutValue=function(t,i,e){var a,n=this._layoutProperties;if(n){var o=n[t];o&&(a=o.getValue(i,e))}var r=this._layoutDefinition[t];return void 0===a&&(a=r["default"]),"enum"===r.type&&(a=r.values.indexOf(a)),a},t.prototype.getPaintValue=function(t,i,e){var a,n=this._paintProperties;if(n){var o=n[t];o&&(a=o.getValue(i,e))}var r=this._paintDefinition[t];return void 0===a&&(a=r["default"]),"enum"===r.type&&(a=r.values.indexOf(a)),a},t.prototype._parseLayout=function(t){var i={};for(var e in t){var a=this._layoutDefinition[e];a&&(i[e]=new o(e,a,t[e]))}return i},t.prototype._parsePaint=function(t){var i={};for(var e in t){var a=this._paintDefinition[e];a&&(i[e]=new o(e,a,t[e]))}return i},t}();i.StyleLayer=u;var l=function(t){function i(i,e,a){return t.call(this,i,e,a)||this}return e(i,t),i}(u);i.BackgroundStyleLayer=l;var s=function(t){function i(i,e,a){var n=t.call(this,i,e,a)||this;n.hasDataDrivenFill=!1;var o=n.getPaintProperty("fill-color");o&&o.isDataDriven&&(n.hasDataDrivenFill=!0);var r=n.getPaintProperty("fill-opacity");r&&r.isDataDriven&&(n.hasDataDrivenFill=!0),n.hasDataDrivenOutline=!1;var u=n.getPaintProperty("fill-outline-color");return u&&u.isDataDriven&&(n.hasDataDrivenOutline=!0),u||o&&o.isDataDriven&&(n.hasDataDrivenOutline=!0),n}return e(i,t),i}(u);i.FillStyleLayer=s;var y=function(t){function i(i,e,a){var n=t.call(this,i,e,a)||this;n.hasDataDrivenLine=!1;var o=n.getPaintProperty("line-color");o&&o.isDataDriven&&(n.hasDataDrivenLine=!0);var r=n.getPaintProperty("line-opacity");r&&r.isDataDriven&&(n.hasDataDrivenLine=!0);var u=n.getPaintProperty("line-width");return u&&u.isDataDriven&&(n.hasDataDrivenLine=!0),n}return e(i,t),i}(u);i.LineStyleLayer=y;var h=function(t){function i(i,e,a){var n=t.call(this,i,e,a)||this;n.hasDataDrivenIcon=!1;var o=n.getPaintProperty("icon-color");o&&o.isDataDriven&&(n.hasDataDrivenIcon=!0);var r=n.getPaintProperty("icon-opacity");r&&r.isDataDriven&&(n.hasDataDrivenIcon=!0);var u=n.getLayoutProperty("icon-size");u&&u.isDataDriven&&(n.hasDataDrivenIcon=!0),n.hasDataDrivenText=!1;var l=n.getPaintProperty("text-color");l&&l.isDataDriven&&(n.hasDataDrivenText=!0);var s=n.getPaintProperty("text-opacity");s&&s.isDataDriven&&(n.hasDataDrivenText=!0);var y=n.getLayoutProperty("text-size");return y&&y.isDataDriven&&(n.hasDataDrivenText=!0),n}return e(i,t),i}(u);i.SymbolStyleLayer=h;var p=function(){function t(t,i,e){this.cap=t.getLayoutValue("line-cap",i,e),this.join=t.getLayoutValue("line-join",i,e),this.miterLimit=t.getLayoutValue("line-miter-limit",i,e),this.roundLimit=t.getLayoutValue("line-round-limit",i,e)}return t}();i.LineLayout=p;var D=function(){function t(t,i,e,a){this.allowOverlap=t.getLayoutValue("icon-allow-overlap",i,a),this.ignorePlacement=t.getLayoutValue("icon-ignore-placement",i,a),this.optional=t.getLayoutValue("icon-optional",i,a),this.rotationAlignment=t.getLayoutValue("icon-rotation-alignment",i,a),this.size=t.getLayoutValue("icon-size",i,a),this.rotate=t.getLayoutValue("icon-rotate",i,a),this.padding=t.getLayoutValue("icon-padding",i,a),this.keepUpright=t.getLayoutValue("icon-keep-upright",i,a),this.offset=t.getLayoutValue("icon-offset",i,a),2===this.rotationAlignment&&(this.rotationAlignment=e?0:1)}return t}();i.IconLayout=D;var f=function(){function t(t,i,e,a){this.allowOverlap=t.getLayoutValue("text-allow-overlap",i,a),this.ignorePlacement=t.getLayoutValue("text-ignore-placement",i,a),this.optional=t.getLayoutValue("text-optional",i,a),this.rotationAlignment=t.getLayoutValue("text-rotation-alignment",i,a),this.fontArray=t.getLayoutValue("text-font",i,a),this.maxWidth=t.getLayoutValue("text-max-width",i,a),this.lineHeight=t.getLayoutValue("text-line-height",i,a),this.letterSpacing=t.getLayoutValue("text-letter-spacing",i,a),this.justify=t.getLayoutValue("text-justify",i,a),this.anchor=t.getLayoutValue("text-anchor",i,a),this.maxAngle=t.getLayoutValue("text-max-angle",i,a),this.size=t.getLayoutValue("text-size",i,a),this.rotate=t.getLayoutValue("text-rotate",i,a),this.padding=t.getLayoutValue("text-padding",i,a),this.keepUpright=t.getLayoutValue("text-keep-upright",i,a),this.transform=t.getLayoutValue("text-transform",i,a),this.offset=t.getLayoutValue("text-offset",i,a),2===this.rotationAlignment&&(this.rotationAlignment=e?0:1)}return t}();i.TextLayout=f});