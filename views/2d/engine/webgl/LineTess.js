// COPYRIGHT Â© 2017 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/4.5/esri/copyright.txt for details.

define(["require","exports"],function(t,o){function e(t){var o,e={items:new Array,count:0};for(o=0;t>o;++o)e.items.push({v1:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v2:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v3:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]}});return e}function r(t){var o,e={items:new Array,count:0};for(o=0;t>o;++o)e.items.push(void 0);return e}function i(t){var o,e={items:new Array,count:0};for(o=0;t>o;++o)e.items.push({vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]});return e}function s(t){var o,e={items:new Array,count:0};for(o=0;t>o;++o)e.items.push([void 0,void 0]);return e}function c(){var t=i(30),o={};o[M.ENTRY]=r(20),o[M.EXIT]=r(20),o[M.CAP]=r(20);var e={vectors:t,lists:o};return e}function v(t,o){var e;for(e=0;e<o.vectors.count;++e)t.vectors.items[e].vector[0]=o.vectors.items[e].vector[0],t.vectors.items[e].vector[1]=o.vectors.items[e].vector[1],t.vectors.items[e].texCoords[0]=o.vectors.items[e].texCoords[0],t.vectors.items[e].texCoords[1]=o.vectors.items[e].texCoords[1],t.vectors.items[e].direction[0]=o.vectors.items[e].direction[0],t.vectors.items[e].direction[1]=o.vectors.items[e].direction[1],t.vectors.items[e].base=o.vectors.items[e].base;t.vectors.count=o.vectors.count;var r=o.lists[M.ENTRY],i=t.lists[M.ENTRY],s=o.lists[M.EXIT],c=t.lists[M.EXIT],v=o.lists[M.CAP],n=t.lists[M.CAP];for(e=0;e<r.count;++e)i.items[e]=r.items[e];for(i.count=r.count,e=0;e<s.count;++e)c.items[e]=s.items[e];for(c.count=s.count,e=0;e<v.count;++e)n.items[e]=v.items[e];n.count=v.count,t.capCenter=o.capCenter}function n(t,o){X.vector[0]=t.vector[0],X.vector[1]=t.vector[1],X.texCoords[0]=t.texCoords[0],X.texCoords[1]=t.texCoords[1],X.direction[0]=t.direction[0],X.direction[1]=t.direction[1],X.base=t.base,t.vector[0]=o.vector[0],t.vector[1]=o.vector[1],t.texCoords[0]=o.texCoords[0],t.texCoords[1]=o.texCoords[1],t.direction[0]=o.direction[0],t.direction[1]=o.direction[1],t.base=o.base,o.vector[0]=X.vector[0],o.vector[1]=X.vector[1],o.texCoords[0]=X.texCoords[0],o.texCoords[1]=X.texCoords[1],o.direction[0]=X.direction[0],o.direction[1]=X.direction[1],o.base=X.base}function d(t,o){return t[0]*o[0]+t[1]*o[1]}function a(t){return Math.sqrt(d(t,t))}function C(t,o){var e=a(o);return t[0]=o[0]/e,t[1]=o[1]/e,t}function u(t,o){return t[0]=-o[1],t[1]=o[0],t}function m(t,o){var e=t[0]*o[1]-t[1]*o[0];return e}function x(t,o){return t[0]=-o[0],t[1]=-o[1],t}function l(t,o,e){return t[0]=o[0]*e,t[1]=o[1]*e,t}function f(t,o,e){return t[0]=o[0]+e[0],t[1]=o[1]+e[1],t}function A(t,o,e){return(o[0]-t[0])*(e[1]-t[1])-(e[0]-t[0])*(o[1]-t[1])}function T(t,o,e){return A(t,o,e)<0}function p(t){return Math.max(Math.round(t*N),1)}function h(t,o){var e=d(t,o);return e>.999?0:-.999>e?Math.PI:Math.acos(e)}function E(t,o,e,r,i){if(0===r)return void(t.count=0);var s,c=a(o),v=l(S[0],o,1/c),n=l(S[1],e,1/c),d=h(v,n),C=(i?-1:1)*d/r,u=Math.cos(C),m=Math.sin(C),x=o[0],f=o[1];for(s=0;r-1>s;++s){var A=x,T=f;x=u*A-m*T,f=m*A+u*T,t.items[s][0]=x,t.items[s][1]=f}t.count=r-1}function b(t){var o,e=t.count,r=Math.floor(e/2);for(o=0;r>o;++o){var i=t.items[o];t.items[o]=t.items[e-o-1],t.items[e-o-1]=i}}Object.defineProperty(o,"__esModule",{value:!0});var M;!function(t){t[t.ENTRY=1]="ENTRY",t[t.EXIT=2]="EXIT",t[t.CAP=3]="CAP"}(M=o.VectorRole||(o.VectorRole={}));var _;!function(t){t[t.START=1]="START",t[t.END=2]="END"}(_=o.CapPosition||(o.CapPosition={})),o.SYSTEM_MAG_LIMIT=3.8,o.MITER_SAFE_RADS=2*Math.acos(1/o.SYSTEM_MAG_LIMIT);var g=o.SYSTEM_MAG_LIMIT*o.SYSTEM_MAG_LIMIT,I=-1,R=1,P=0,Y=16,N=Y/(2*Math.PI);o.allocTriangles=e,o.allocExtrudeVectors=c,o.copyExtrudeVectors=v;var X={vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0],base:void 0};o.swapExtrudeVectors=n;var y,S=[];for(y=0;32>y;++y)S.push([void 0,void 0]);var J=s(Y);o.length=a,o.normalize=C,o.getNumberOfSlices=p,o.getRads=h,o.reverse=b;var q=[void 0,void 0],w=[void 0,void 0],V=[0,0],G=[0,0],L=[0,0],D=[0,0],O=Math.cos(Math.PI/4),j=Math.sin(Math.PI/4),z=Math.sqrt(2),F=function(){function t(t){this._distanceAlongCorrection=t.distanceAlongCorrection}return t.prototype.bridge=function(t,o,e){var r,i,s,c,v=o.vectors,d=o.lists[M.EXIT],a=e.vectors,C=e.lists[M.ENTRY];if(d.count===C.count+1)r=d.items,i=v.items,s=C.items,c=a.items;else if(C.count===d.count+1)r=C.items,i=a.items,s=d.items,c=v.items;else{if(d.count!==C.count)return console.error("Cannot bridge "+d.count+" to "+C.count+"."),void(t.count=0);r=C.items,i=a.items,s=d.items,c=v.items}var u=d.count+C.count-2;t.count=u,q[0]=r,q[1]=s,w[0]=i,w[1]=c;var m;for(m=0;u>m;++m){var x=t.items[m],l=(m+0)%2,f=Math.floor((m+0)/2),A=w[l][q[l][f]];x.v1.vector[0]=A.vector[0],x.v1.vector[1]=A.vector[1],x.v1.texCoords[0]=A.texCoords[0],x.v1.texCoords[1]=A.texCoords[1],x.v1.direction[0]=A.direction[0],x.v1.direction[1]=A.direction[1],x.v1.base=A.base;var p=(m+1)%2,h=Math.floor((m+1)/2),E=w[p][q[p][h]];x.v2.vector[0]=E.vector[0],x.v2.vector[1]=E.vector[1],x.v2.texCoords[0]=E.texCoords[0],x.v2.texCoords[1]=E.texCoords[1],x.v2.direction[0]=E.direction[0],x.v2.direction[1]=E.direction[1],x.v2.base=E.base;var b=(m+2)%2,_=Math.floor((m+2)/2),g=w[b][q[b][_]];x.v3.vector[0]=g.vector[0],x.v3.vector[1]=g.vector[1],x.v3.texCoords[0]=g.texCoords[0],x.v3.texCoords[1]=g.texCoords[1],x.v3.direction[0]=g.direction[0],x.v3.direction[1]=g.direction[1],x.v3.base=g.base;var I=x.v1.base&&x.v1.base.point||V,R=x.v2.base&&x.v2.base.point||V,P=x.v3.base&&x.v3.base.point||V;G[0]=I[0]+x.v1.vector[0],G[1]=I[1]+x.v1.vector[1],L[0]=R[0]+x.v2.vector[0],L[1]=R[1]+x.v2.vector[1],D[0]=P[0]+x.v3.vector[0],D[1]=P[1]+x.v3.vector[1],T(G,L,D)||n(x.v2,x.v3)}},t.prototype.pie=function(t,o){if(0===o.lists[M.CAP].count)return void(t.count=0);if(1===o.lists[M.CAP].count)return console.error("A single vector is not enough to define a pie."),void(t.count=0);t.count=o.lists[M.CAP].count-1;var e;for(e=0;e<t.count;++e){var r=t.items[e],i=o.lists[M.CAP].items[e],s=o.vectors.items[i];r.v1.vector[0]=s.vector[0],r.v1.vector[1]=s.vector[1],r.v1.texCoords[0]=s.texCoords[0],r.v1.texCoords[1]=s.texCoords[1],r.v1.direction[0]=s.direction[0],r.v1.direction[1]=s.direction[1],r.v1.base=s.base;var c=o.lists[M.CAP].items[e+1],v=o.vectors.items[c];r.v2.vector[0]=v.vector[0],r.v2.vector[1]=v.vector[1],r.v2.texCoords[0]=v.texCoords[0],r.v2.texCoords[1]=v.texCoords[1],r.v2.direction[0]=v.direction[0],r.v2.direction[1]=v.direction[1],r.v2.base=v.base;var d=o.capCenter,a=o.vectors.items[d];r.v3.vector[0]=a.vector[0],r.v3.vector[1]=a.vector[1],r.v3.texCoords[0]=a.texCoords[0],r.v3.texCoords[1]=a.texCoords[1],r.v3.direction[0]=a.direction[0],r.v3.direction[1]=a.direction[1],r.v3.base=a.base;var C=r.v1.base&&r.v1.base.point||V,u=r.v2.base&&r.v2.base.point||V,m=r.v3.base&&r.v3.base.point||V;G[0]=C[0]+r.v1.vector[0],G[1]=C[1]+r.v1.vector[1],L[0]=u[0]+r.v2.vector[0],L[1]=u[1]+r.v2.vector[1],D[0]=m[0]+r.v3.vector[0],D[1]=m[1]+r.v3.vector[1],T(G,L,D)||n(r.v2,r.v3)}},t.prototype.buttCap=function(t,o,e){this.fastMiterJoin(t,o,e)},t.prototype.roundCap=function(t,o,e,r,i,s){void 0===s&&(s=0),this.fastMiterJoin(t,o,e);var c=r===_.START?0:1,v=r===_.START?1:0;t.capCenter=t.vectors.count;var n=t.vectors.items[t.capCenter];n.vector[0]=0,n.vector[1]=0,n.texCoords[0]=P,n.texCoords[1]=P,n.direction[0]=0,n.direction[1]=0,++t.vectors.count,E(J,t.vectors.items[c].vector,t.vectors.items[v].vector,i,!1);var d=t.vectors.count,a=t.lists[M.CAP];a.items[0]=c;var C,u=t.vectors.items[c].texCoords[1],m=t.vectors.items[v].texCoords[1];for(C=0;C<J.count;++C){var x=s*(1-Math.abs(J.count/2-C)/(J.count/2)),l=u+C/(J.count-1)*(m-u),f=J.items[C],A=t.vectors.items[d+C];A.vector[0]=f[0],A.vector[1]=f[1],A.texCoords[0]=x,A.texCoords[1]=l,A.direction[0]=0,A.direction[1]=0,a.items[C+1]=d+C}a.items[J.count+1]=v,a.count=J.count+2,t.vectors.count=d+J.count},t.prototype.squareCap=function(t,o,e,r){this.fastMiterJoin(t,o,e);var i=r===_.START?0:1,s=r===_.START?1:0,c=S[0],v=S[1],n=S[2],d=S[3],a=S[4],C=t.vectors.items[i].vector;c[0]=O*C[0]-j*C[1],c[1]=j*C[0]+O*C[1],l(d,c,z),v[0]=O*c[0]-j*c[1],v[1]=j*c[0]+O*c[1],n[0]=O*v[0]-j*v[1],n[1]=j*v[0]+O*v[1],l(a,n,z);var u=t.vectors.items[i];u.vector[0]=d[0],u.vector[1]=d[1];var m=t.vectors.items[s];m.vector[0]=a[0],m.vector[1]=a[1]},t.prototype.fastMiterJoin=function(t,o,e){var r=u(S[0],e),i=r,s=x(S[1],r),c=t.vectors.items[0];c.vector[0]=i[0],c.vector[1]=i[1],c.texCoords[0]=P,c.texCoords[1]=I,c.direction[0]=0,c.direction[1]=0;var v=t.vectors.items[1];v.vector[0]=s[0],v.vector[1]=s[1],v.texCoords[0]=P,v.texCoords[1]=R,v.direction[0]=0,v.direction[1]=0,t.vectors.count=2;var n=t.lists[M.ENTRY];n.items[0]=0,n.items[1]=1,n.count=2;var d=t.lists[M.EXIT];d.items[0]=0,d.items[1]=1,d.count=2,t.lists[M.CAP].count=0,t.capCenter=void 0},t.prototype.miterJoin=function(t,o,e){var r=u(S[0],o),i=u(S[1],e),s=S[2];s[0]=r[0]+i[0],s[1]=r[1]+i[1];var c=C(S[3],s),v=d(c,r);c=l(S[4],c,1/v);var n=x(S[5],c);if(this._distanceAlongCorrection){var a=t.vectors.items[0];a.vector[0]=c[0],a.vector[1]=c[1],a.texCoords[0]=P,a.texCoords[1]=I,a.direction[0]=o[0],a.direction[1]=o[1];var m=t.vectors.items[1];m.vector[0]=n[0],m.vector[1]=n[1],m.texCoords[0]=P,m.texCoords[1]=R,m.direction[0]=o[0],m.direction[1]=o[1];var f=t.vectors.items[2];f.vector[0]=c[0],f.vector[1]=c[1],f.texCoords[0]=P,f.texCoords[1]=I,f.direction[0]=e[0],f.direction[1]=e[1];var A=t.vectors.items[3];A.vector[0]=n[0],A.vector[1]=n[1],A.texCoords[0]=P,A.texCoords[1]=R,A.direction[0]=e[0],A.direction[1]=e[1],t.vectors.count=4;var T=t.lists[M.ENTRY];T.items[0]=0,T.items[1]=1,T.count=2;var p=t.lists[M.EXIT];p.items[0]=2,p.items[1]=3,p.count=2}else{var a=t.vectors.items[0];a.vector[0]=c[0],a.vector[1]=c[1],a.texCoords[0]=P,a.texCoords[1]=I,a.direction[0]=0,a.direction[1]=0;var m=t.vectors.items[1];m.vector[0]=n[0],m.vector[1]=n[1],m.texCoords[0]=P,m.texCoords[1]=R,m.direction[0]=0,m.direction[1]=0,t.vectors.count=2;var T=t.lists[M.ENTRY];T.items[0]=0,T.items[1]=1,T.count=2;var p=t.lists[M.EXIT];p.items[0]=0,p.items[1]=1,p.count=2}t.lists[M.CAP].count=0,t.capCenter=void 0},t.prototype.bevelJoin=function(t,o,e,r){var i=r*r,s=m(o,e),c=s>0?[I,R]:[R,I],v=c[0],n=c[1],a=s>0?x(S[0],u(S[1],o)):u(S[2],o),A=s>0?x(S[3],u(S[4],e)):u(S[5],e),T=S[6];T[0]=a[0]+A[0],T[1]=a[1]+A[1];var p=C(S[7],T),h=x(S[8],p),E=d(p,a),_=m(p,a),Y=Math.abs(_/E),N=1+Y*Y,X=g>N?[Y,this._distanceAlongCorrection]:[Math.sqrt(g-1),!0],y=X[0],J=X[1],q=i>N?[Y,this._distanceAlongCorrection]:[Math.sqrt(i-1),!0],w=q[0],V=q[1];if(V&&J){var G=t.vectors.items[0];f(G.vector,x(S[9],a),l(S[10],x(S[11],o),y)),G.texCoords[0]=P,G.texCoords[1]=v,G.direction[0]=this._distanceAlongCorrection?o[0]:0,G.direction[1]=this._distanceAlongCorrection?o[1]:0;var L=t.vectors.items[1];f(L.vector,x(S[12],A),l(S[13],e,y)),L.texCoords[0]=P,L.texCoords[1]=v,L.direction[0]=this._distanceAlongCorrection?e[0]:0,L.direction[1]=this._distanceAlongCorrection?e[1]:0;var D=t.vectors.items[2];D.vector[0]=0,D.vector[1]=0,D.texCoords[0]=P,D.texCoords[1]=P,D.direction[0]=0,D.direction[1]=0;var O=t.vectors.items[3];f(O.vector,a,l(S[14],o,w)),O.texCoords[0]=P,O.texCoords[1]=n,O.direction[0]=this._distanceAlongCorrection?o[0]:0,O.direction[1]=this._distanceAlongCorrection?o[1]:0;var j=t.vectors.items[4];f(j.vector,A,l(S[15],x(S[16],e),w)),j.texCoords[0]=P,j.texCoords[1]=n,j.direction[0]=this._distanceAlongCorrection?e[0]:0,j.direction[1]=this._distanceAlongCorrection?e[1]:0,t.vectors.count=5;var z=t.lists[M.ENTRY];z.items[0]=0,z.items[1]=2,z.items[2]=3,z.count=3;var F=t.lists[M.EXIT];if(F.items[0]=1,F.items[1]=2,F.items[2]=4,F.count=3,i>N){var k=t.lists[M.CAP];k.count=0,t.capCenter=void 0}else{var k=t.lists[M.CAP];k.items[0]=3,k.items[1]=4,k.count=2,t.capCenter=2}}else if(!V&&J){var G=t.vectors.items[0];f(G.vector,x(S[9],a),l(S[10],x(S[11],o),y)),G.texCoords[0]=P,G.texCoords[1]=v,G.direction[0]=this._distanceAlongCorrection?o[0]:0,G.direction[1]=this._distanceAlongCorrection?o[1]:0;var L=t.vectors.items[1];f(L.vector,x(S[12],A),l(S[13],e,y)),L.texCoords[0]=P,L.texCoords[1]=v,L.direction[0]=this._distanceAlongCorrection?e[0]:0,L.direction[1]=this._distanceAlongCorrection?e[1]:0;var D=t.vectors.items[2];D.vector[0]=0,D.vector[1]=0,D.texCoords[0]=P,D.texCoords[1]=P,D.direction[0]=0,D.direction[1]=0;var O=t.vectors.items[3];l(O.vector,p,1/E),O.texCoords[0]=P,O.texCoords[1]=n,O.direction[0]=0,O.direction[1]=0,t.vectors.count=4;var z=t.lists[M.ENTRY];z.items[0]=0,z.items[1]=2,z.items[2]=3,z.count=3;var F=t.lists[M.EXIT];F.items[0]=1,F.items[1]=2,F.items[2]=3,F.count=3,t.lists[M.CAP].count=0,t.capCenter=void 0}else if(V&&!J){var G=t.vectors.items[0];l(G.vector,h,1/E),G.texCoords[0]=P,G.texCoords[1]=v,G.direction[0]=0,G.direction[1]=0;var L=t.vectors.items[1];L.vector[0]=0,L.vector[1]=0,L.texCoords[0]=P,L.texCoords[1]=P,L.direction[0]=0,L.direction[1]=0;var D=t.vectors.items[2];f(D.vector,a,l(S[9],o,w)),D.texCoords[0]=P,D.texCoords[1]=n,D.direction[0]=this._distanceAlongCorrection?o[0]:0,D.direction[1]=this._distanceAlongCorrection?o[1]:0;var O=t.vectors.items[3];f(O.vector,A,l(S[10],x(S[11],e),w)),O.texCoords[0]=P,O.texCoords[1]=n,O.direction[0]=this._distanceAlongCorrection?e[0]:0,O.direction[1]=this._distanceAlongCorrection?e[1]:0,t.vectors.count=4;var z=t.lists[M.ENTRY];z.items[0]=0,z.items[1]=1,z.items[2]=2,z.count=3;var F=t.lists[M.EXIT];if(F.items[0]=0,F.items[1]=1,F.items[2]=3,F.count=3,i>N){var k=t.lists[M.CAP];k.count=0,t.capCenter=void 0}else{var k=t.lists[M.CAP];k.items[0]=2,k.items[1]=3,k.count=2,t.capCenter=1}}else if(!V&&!J){var G=t.vectors.items[0];l(G.vector,h,1/E),G.texCoords[0]=P,G.texCoords[1]=v,G.direction[0]=0,G.direction[1]=0;var L=t.vectors.items[1];l(L.vector,p,1/E),L.texCoords[0]=P,L.texCoords[1]=n,L.direction[0]=0,L.direction[1]=0,t.vectors.count=2;var z=t.lists[M.ENTRY];z.items[0]=0,z.items[1]=1,z.count=2;var F=t.lists[M.EXIT];F.items[0]=0,F.items[1]=1,F.count=2,t.lists[M.CAP].count=0,t.capCenter=void 0}0>s&&(b(t.lists[M.ENTRY]),b(t.lists[M.EXIT]))},t.prototype.roundJoin=function(t,o,e,r){var i=m(o,e),s=i>0?[I,R]:[R,I],c=s[0],v=s[1],n=i>0?x(S[0],u(S[1],o)):u(S[2],o),a=i>0?x(S[3],u(S[4],e)):u(S[5],e),A=S[6];A[0]=n[0]+a[0],A[1]=n[1]+a[1];var T=C(S[7],A),p=x(S[8],T),h=d(T,n),_=m(T,n),Y=Math.abs(_/h),N=1+Y*Y,X=g>N?[Y,this._distanceAlongCorrection]:[Math.sqrt(g-1),!0],y=X[0],q=X[1];if(q){var w=t.vectors.items[0];w.vector[0]=n[0],w.vector[1]=n[1],w.texCoords[0]=P,w.texCoords[1]=v,w.direction[0]=0,w.direction[1]=0;var V=t.vectors.items[1];V.vector[0]=a[0],V.vector[1]=a[1],V.texCoords[0]=P,V.texCoords[1]=v,V.direction[0]=0,V.direction[1]=0;var G=t.vectors.items[2];f(G.vector,x(S[9],n),l(S[10],x(S[11],o),y)),G.texCoords[0]=P,G.texCoords[1]=c,G.direction[0]=this._distanceAlongCorrection?o[0]:0,G.direction[1]=this._distanceAlongCorrection?o[1]:0;var L=t.vectors.items[3];f(L.vector,x(S[12],a),l(S[13],e,y)),L.texCoords[0]=P,L.texCoords[1]=c,L.direction[0]=this._distanceAlongCorrection?e[0]:0,L.direction[1]=this._distanceAlongCorrection?e[1]:0;var D=t.vectors.items[4];D.vector[0]=0,D.vector[1]=0,D.texCoords[0]=P,D.texCoords[1]=P,D.direction[0]=0,D.direction[1]=0,t.vectors.count=5;var O=t.lists[M.ENTRY];O.items[0]=2,O.items[1]=4,O.items[2]=0,O.count=3;var j=t.lists[M.EXIT];j.items[0]=3,j.items[1]=4,j.items[2]=1,j.count=3,t.capCenter=4}else{var w=t.vectors.items[0];w.vector[0]=n[0],w.vector[1]=n[1],w.texCoords[0]=P,w.texCoords[1]=v,w.direction[0]=0,w.direction[1]=0;var V=t.vectors.items[1];V.vector[0]=a[0],V.vector[1]=a[1],V.texCoords[0]=P,V.texCoords[1]=v,V.direction[0]=0,V.direction[1]=0;var G=t.vectors.items[2];l(G.vector,p,1/h),G.texCoords[0]=P,G.texCoords[1]=c,G.direction[0]=0,G.direction[1]=0;var L=t.vectors.items[3];L.vector[0]=0,L.vector[1]=0,L.texCoords[0]=P,L.texCoords[1]=P,L.direction[0]=0,L.direction[1]=0,t.vectors.count=4;var O=t.lists[M.ENTRY];O.items[0]=2,O.items[1]=3,O.items[2]=0,O.count=3;var j=t.lists[M.EXIT];j.items[0]=2,j.items[1]=3,j.items[2]=1,j.count=3,t.capCenter=3}E(J,n,a,r,0>i);var z=t.vectors.count,F=t.lists[M.CAP];F.items[0]=0;var k;for(k=0;k<J.count;++k){var B=J.items[k],H=t.vectors.items[z+k];H.vector[0]=B[0],H.vector[1]=B[1],H.texCoords[0]=P,H.texCoords[1]=v,H.direction[0]=0,H.direction[1]=0,F.items[k+1]=z+k}F.items[J.count+1]=1,F.count=J.count+2,t.vectors.count=z+J.count,0>i&&(b(t.lists[M.ENTRY]),b(t.lists[M.EXIT]))},t.prototype.unitRoundJoin=function(t,o,e,r){var i=m(o,e),s=i>0?[I,R]:[R,I],c=s[0],v=s[1],n=i>0?x(S[0],u(S[1],o)):u(S[2],o),d=i>0?x(S[3],u(S[4],e)):u(S[5],e),a=t.vectors.items[0];a.vector[0]=n[0],a.vector[1]=n[1],a.texCoords[0]=P,a.texCoords[1]=v,a.direction[0]=0,a.direction[1]=0;var C=t.vectors.items[1];C.vector[0]=d[0],C.vector[1]=d[1],C.texCoords[0]=P,C.texCoords[1]=v,C.direction[0]=0,C.direction[1]=0;var l=t.vectors.items[2];x(l.vector,n),l.texCoords[0]=P,l.texCoords[1]=c,l.direction[0]=0,l.direction[1]=0;var f=t.vectors.items[3];x(f.vector,d),f.texCoords[0]=P,f.texCoords[1]=c,f.direction[0]=0,f.direction[1]=0;var A=t.vectors.items[4];A.vector[0]=0,A.vector[1]=0,A.texCoords[0]=P,A.texCoords[1]=P,A.direction[0]=0,A.direction[1]=0,t.vectors.count=5;var T=t.lists[M.ENTRY];T.items[0]=2,T.items[1]=0,T.count=2;var p=t.lists[M.EXIT];p.items[0]=3,p.items[1]=1,p.count=2,t.capCenter=4,E(J,n,d,r,0>i);var h=t.vectors.count,_=t.lists[M.CAP];_.items[0]=0;var g;for(g=0;g<J.count;++g){var Y=J.items[g],N=t.vectors.items[h+g];N.vector[0]=Y[0],N.vector[1]=Y[1],N.texCoords[0]=P,N.texCoords[1]=v,N.direction[0]=0,N.direction[1]=0,_.items[g+1]=h+g}_.items[J.count+1]=1,_.count=J.count+2,t.vectors.count=h+J.count,0>i&&(b(t.lists[M.ENTRY]),b(t.lists[M.EXIT]))},t.prototype.rectJoin=function(t,o,e){var r=u(S[0],o),i=u(S[1],e),s=t.vectors.items[0];s.vector[0]=r[0],s.vector[1]=r[1],s.texCoords[0]=P,s.texCoords[1]=I,s.direction[0]=0,s.direction[1]=0;var c=t.vectors.items[1];c.vector[0]=i[0],c.vector[1]=i[1],c.texCoords[0]=P,c.texCoords[1]=I,c.direction[0]=0,c.direction[1]=0;var v=t.vectors.items[2];x(v.vector,r),v.texCoords[0]=P,v.texCoords[1]=R,v.direction[0]=0,v.direction[1]=0;var n=t.vectors.items[3];x(n.vector,i),n.texCoords[0]=P,n.texCoords[1]=R,n.direction[0]=0,n.direction[1]=0,t.vectors.count=4;var d=t.lists[M.ENTRY];d.items[0]=0,d.items[1]=2,d.count=2;var a=t.lists[M.EXIT];a.items[0]=1,a.items[1]=3,a.count=2,t.capCenter=void 0},t}();o.Tessellator=F});