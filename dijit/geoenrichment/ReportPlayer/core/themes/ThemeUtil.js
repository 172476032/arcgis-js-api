// COPYRIGHT Â© 201 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/3.26/esri/copyright.txt for details.

define(["dojo/_base/lang","esri/dijit/geoenrichment/utils/ColorUtil","esri/dijit/geoenrichment/utils/ObjectUtil"],function(o,r,t){function e(o){return r.isLightColor(o)?"#666666":"#BBBBBB"}function a(o){var t=r.isLightColor(o);return r.transform(o,{dv:t?-7:7}).toHex()}var l={getPanelTitleColor:function(o){var t=r.isLightColor(o);return r.transform(o,{dv:t?-50:50}).toHex()},getChartElementBackgroundColor:function(o){var t=r.isLightColor(o);return r.transform(o,{dv:t?-13:13}).toHex()}},n={};n.getThemeColors=function(o){return[o.document.backgroundColor,o.infographic.staticInfographic.icon.backgroundColor,o.infographic.staticInfographic.highlightedIcon.backgroundColor]},n.generateChartColors=function(o,t,e){e=e||{};var a=e.gradientFactor||1,l=[t,r.transform(t,{dv:-20*a}).toHex(),r.transform(t,{dv:-40*a}).toHex(),r.transform(t,{dv:-50*a}).toHex(),r.transform(t,{dv:-55*a}).toHex(),r.transform(t,{dv:-60*a}).toHex(),r.transform(t,{dv:-65*a}).toHex(),r.transform(t,{dv:-70*a}).toHex()];if(e.numLighterColors)for(var n=0;n<e.numLighterColors;n++)l.unshift(r.transform(t,{dv:20*a*(n+1),ds:-20*(n+1)}).toHex());o&&o!==t&&l.unshift(o);var i={};return l.filter(function(o){return!i[o]&&(i[o]=!0,!0)})},n.applyThemeColorsToTheme=function(o,i,c,g){var s=i[0],d=i[1],u=i[2],C=r.getContrastColor(s).toHex(),f="#FFFFFF"===s.toUpperCase()?"#4C4C4C":C,b=r.isLightColor(s),h=l.getChartElementBackgroundColor(s),p=l.getPanelTitleColor(s),m={document:{color:f,backgroundColor:s},table:{overrideStyles:{Default:{color:f,backgroundColor:"transparent"},ReportTitle:{color:u,backgroundColor:"transparent"},TableHeader:{color:r.getContrastColor(d,void 0,void 0,200).toHex(),backgroundColor:d},GreyText:{color:r.transform(s,{dv:b?-33:33}).toHex(),backgroundColor:"transparent"},BlueText:{color:"#56A5D8",backgroundColor:"transparent"},AlternatingRow:{color:f,backgroundColor:r.transform(s,{dv:b?-7:7}).toHex()}}},chart:{backgroundColor:"transparent",titleStyle:{color:p},dataLabelsStyle:{color:C},xAxis:{lineColor:C,gridLinesColor:C,gridStripesColor:a(s),gridStripesColorAlt:"transparent",axisStyle:{color:C},titleStyle:{color:C}},yAxis:{lineColor:C,gridLinesColor:C,gridStripesColor:a(s),gridStripesColorAlt:"transparent",baseLineColor:C,axisStyle:{color:C},titleStyle:{color:C}},legendStyle:{color:C,backgroundColor:s},minMaxLegend:{titleStyle:{color:C}},ring:{ringBackground:{backgroundColor:h}},gauge:{dataLabelStyle:{color:d},othersColor:h,arrowIndicator:{lineColor:p,backgroundColor:p}},icon:{backgroundColor:d},columnBarBackground:{backgroundColor:h},comparisonInfo:{lineColor:e(s)}},infographic:{backgroundColor:"transparent",agePyramid:{theme:b?"light":"common",male:{backgroundColor:d},female:{backgroundColor:u}},staticInfographic:{backgroundColor:"transparent",icon:{backgroundColor:d},highlightedIcon:{backgroundColor:u},iconBarBackground:{},titleLine:{color:r.transform(s,{dv:b?-40:40}).toHex()},titleStyle:{color:p},variableLabelStyle:{color:d},variableLabelStyleHighlighted:{color:u},variableLabelStyleContrast:{color:s},variableDescriptionStyle:{color:r.transform(s,{dv:b?-50:50}).toHex()}}}};g&&g(m),t.populateObject(o,m,!0),o&&o.chart&&(o.chart.colors=c&&c.length?c:n.generateChartColors(d,u))};var i={fontFamily:1,fontSize:1,fontWeight:1,fontStyle:1,textDecoration:1,color:1};return n.filterTextStyles=function(o){var r={};for(var t in i){var e=o[t];void 0!==e&&(r[t]=e)}return r},n.applyTextStyleToTheme=function(r,e){function a(r,t){var a=o.mixin({},e);return r&&delete a.color,t||delete a.fontSize,a}e=n.filterTextStyles(e);var l={document:a(),table:{overrideStyles:{Default:a(!1,!0),ReportTitle:a(!1,!0),TableHeader:a(!1,!0),AlternatingRow:a(!1,!0)}},chart:{titleStyle:a(),dataLabelsStyle:a(),xAxis:{axisStyle:a(),titleStyle:a()},yAxis:{axisStyle:a(),titleStyle:a()},legendStyle:a(),minMaxLegend:{titleStyle:a(),minVariableLabelStyle:a(!0),maxVariableLabelStyle:a(!0)}},infographic:{staticInfographic:{titleStyle:a(),variableLabelStyle:a(),variableDescriptionStyle:a(),variableLabelStyleHighlighted:a(),variableLabelStyleContrast:a()}}};t.populateObject(r,l,!0)},n.removeBackgroundFromThemeElements=function(o,r){if(o&&(o.chart.backgroundColor="transparent",o.infographic.backgroundColor="transparent",o.infographic.staticInfographic=o.infographic.staticInfographic||{},o.infographic.staticInfographic.backgroundColor="transparent",r))for(var t in o.table.overrideStyles)o.table.overrideStyles[t].backgroundColor="transparent"},n});