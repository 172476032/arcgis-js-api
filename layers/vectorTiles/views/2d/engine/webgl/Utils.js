// COPYRIGHT Â© 201 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/3.23/esri/copyright.txt for details.

define(["require","exports","../../../../core/screenUtils","./color","./enums","./SymbolProperties"],function(e,r,t,_,i,n){function E(e){return e.map(function(e){return e.name})}function o(e){for(var r={},t=0,_=e;t<_.length;t++){var i=_[t];r[i.name]=i.strideInBytes}return r}function s(e,t,_){switch(void 0===_&&(_=!1),e){case i.WGLGeometryType.MARKER:return t?r.C_ICON_STRIDE_SPEC_VV:_?r.C_ICON_STRIDE_SPEC_HEATMAP:r.C_ICON_STRIDE_SPEC;case i.WGLGeometryType.FILL:return t?r.C_FILL_STRIDE_SPEC_VV:r.C_FILL_STRIDE_SPEC;case i.WGLGeometryType.LINE:return t?r.C_LINE_STRIDE_SPEC_VV:r.C_LINE_STRIDE_SPEC;case i.WGLGeometryType.TEXT:return t?r.C_TEXT_STRIDE_SPEC_VV:r.C_TEXT_STRIDE_SPEC}return null}function a(e){return C(e)?i.WGLGeometryType.MARKER:I(e)?i.WGLGeometryType.LINE:u(e)?i.WGLGeometryType.FILL:l(e)?i.WGLGeometryType.TEXT:i.WGLGeometryType.UNKNOWN}function T(e){switch(e){case"esriSMS":return"simple-marker";case"esriPMS":return"picture-marker";case"esriSLS":return"simple-line";case"esriPLS":return"picture-line";case"esriSFS":return"simple-fill";case"esriPFS":return"picture-fill";case"esriTS":return"text"}return e}function C(e){var r=T(e.type);if(r){switch(r){case"simple-marker":case"picture-marker":case"CIMPointSymbol":return!0}return!1}}function u(e){var r=T(e.type);if(r){switch(r){case"simple-fill":case"picture-fill":case"CIMPolygonSymbol":return!0}return!1}}function I(e){var r=T(e.type);if(r){switch(r){case"simple-line":case"picture-line":case"CIMLineSymbol":return!0}return!1}}function V(e){var r=T(e.type);if(r){switch(r){case"picture-marker":case"picture-line":case"picture-fill":return!0}return!1}return!1}function l(e){var r=T(e.type);if(r){switch(r){case"text":case"CIMTextSymbol":return!0}return!1}}function c(e){return n.TextProperties.pool.acquire(e.color?_.copyAndPremultiply(e.color):[255,255,255,255],e.haloColor?_.copyAndPremultiply(e.haloColor):[255,255,255,255],t.pt2px(e.haloSize),t.pt2px(e.font.size),e.angle*Math.PI/180,e.xoffset/e.font.size,e.yoffset/e.font.size,"left"===e.horizontalAlignment?0:"right"===e.horizontalAlignment?1:.5,"top"===e.verticalAlignment?0:"bottom"===e.verticalAlignment?1:.5)}function m(e,r){return!1}function y(e){return e&&e.length||0}function S(e,r){if(e.materialKey!==r.materialKey)return!1;if(y(e.texBindingInfo)!==y(r.texBindingInfo))return!1;if(y(e.materialParams)!==y(r.materialParams))return!1;for(var t=e.texBindingInfo.length,_=0;_<t;++_){var i=e.texBindingInfo[_],n=r.texBindingInfo[_];if(i.unit!==n.unit||i.pageId!==n.pageId||i.semantic!==n.semantic)return!1}for(var E=e.materialParams.length,_=0;_<E;++_){var o=e.materialParams[_],s=r.materialParams[_];if(o.name!==s.name||!m(o.value,s.value))return!1}return!0}function f(e,r,t){for(var _=0,i=e.length,n=0;n<i;++n)r&&(r[t+_]=e.charCodeAt(n)),++_;return r&&(r[t+_]=0),++_}function p(e,r,t){var _=0;e.s="";for(var i=!0;i;){var n=r[t+_];++_,0!==n?e.s+=String.fromCharCode(n):i=!1}return _}function R(e){return null!==e&&void 0!==e}function d(e){return"number"==typeof e}function L(e){return"string"==typeof e}function N(e){return null==e||L(e)}function X(e,r,t){return e+(r-e)*t}Object.defineProperty(r,"__esModule",{value:!0}),r.C_HITTEST_SEARCH_SIZE=4,r.C_VBO_GEOMETRY="geometry",r.C_VBO_PERINSTANCE="per_instance",r.C_VBO_PERINSTANCE_VV="per_instance_vv",r.C_VBO_VISIBILITY="visibility",r.C_ICON_VERTEX_DEF=[{name:r.C_VBO_GEOMETRY,strideInBytes:24,divisor:0}],r.C_ICON_VERTEX_DEF_VV=[{name:r.C_VBO_GEOMETRY,strideInBytes:40,divisor:0}],r.C_ICON_HEATMAP=[{name:r.C_VBO_GEOMETRY,strideInBytes:28,divisor:0}],r.C_FILL_VERTEX_DEF=[{name:r.C_VBO_GEOMETRY,strideInBytes:24,divisor:0}],r.C_FILL_VERTEX_DEF_VV=[{name:r.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}],r.C_LINE_VERTEX_DEF=[{name:r.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}],r.C_LINE_VERTEX_DEF_VV=[{name:r.C_VBO_GEOMETRY,strideInBytes:44,divisor:0}],r.C_TEXT_VERTEX_DEF=[{name:r.C_VBO_GEOMETRY,strideInBytes:20,divisor:0},{name:r.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}],r.C_TEXT_VERTEX_DEF_VV=[{name:r.C_VBO_GEOMETRY,strideInBytes:36,divisor:0},{name:r.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}],r.C_ICON_VERTEX_NAMES=E(r.C_ICON_VERTEX_DEF),r.C_ICON_VERTEX_NAMES_VV=E(r.C_ICON_VERTEX_DEF_VV),r.C_FILL_VERTEX_NAMES=E(r.C_FILL_VERTEX_DEF),r.C_FILL_VERTEX_NAMES_VV=E(r.C_FILL_VERTEX_DEF_VV),r.C_LINE_VERTEX_NAMES=E(r.C_LINE_VERTEX_DEF),r.C_LINE_VERTEX_NAMES_VV=E(r.C_LINE_VERTEX_DEF_VV),r.C_TEXT_VERTEX_NAMES=E(r.C_TEXT_VERTEX_DEF),r.C_TEXT_VERTEX_NAMES_VV=E(r.C_TEXT_VERTEX_DEF_VV),r.C_ICON_STRIDE_SPEC=o(r.C_ICON_VERTEX_DEF),r.C_ICON_STRIDE_SPEC_VV=o(r.C_ICON_VERTEX_DEF_VV),r.C_ICON_STRIDE_SPEC_HEATMAP=o(r.C_ICON_HEATMAP),r.C_FILL_STRIDE_SPEC=o(r.C_FILL_VERTEX_DEF),r.C_FILL_STRIDE_SPEC_VV=o(r.C_FILL_VERTEX_DEF_VV),r.C_LINE_STRIDE_SPEC=o(r.C_LINE_VERTEX_DEF),r.C_LINE_STRIDE_SPEC_VV=o(r.C_LINE_VERTEX_DEF_VV),r.C_TEXT_STRIDE_SPEC=o(r.C_TEXT_VERTEX_DEF),r.C_TEXT_STRIDE_SPEC_VV=o(r.C_TEXT_VERTEX_DEF_VV),r.getStrides=s,r.getSymbolGeometryType=a,r.normalizeSymbolType=T,r.isMarkerSymbol=C,r.isFillSymbol=u,r.isLineSymbol=I,r.isPictureSymbol=V,r.isTextSymbol=l,r.getTextProperties=c,r.isSameUniformValue=m,r.isSameMaterialInfo=S,r.serializeString=f,r.deserializeString=p,r.isDefined=R,r.isNumber=d,r.isString=L,r.isStringOrNull=N,r.lerp=X;var O=function(){function e(){this._arr=[],this._addGeometryType=this._addGeometryType.bind(this)}return e.prototype._addGeometryType=function(e,r){this._arr.push(r)},e.prototype.getKeys=function(e){return this._arr.length=0,e.forEach(this._addGeometryType),this._arr},e}();r.KeysGetter=O;var h=function(){function e(){this._arr=[],this._addGeometryType=this._addGeometryType.bind(this)}return e.prototype._addGeometryType=function(e,r){this._arr.push(e)},e.prototype.getValues=function(e){return this._arr.length=0,e.forEach(this._addGeometryType),this._arr},e}();r.ValuesGetter=h});