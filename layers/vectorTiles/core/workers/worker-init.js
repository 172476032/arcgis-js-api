// COPYRIGHT Â© 2016 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/3.19/esri/copyright.txt for details.

// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.19/esri/copyright.txt for details.
//>>built

!function(e,t){var n,r=function(){},i=function(e){for(var t in e)return 0;return 1},o={}.toString,a=function(e){return"[object Function]"==o.call(e)},s=function(e){return"[object String]"==o.call(e)},u=function(e){return"[object Array]"==o.call(e)},l=function(e,t){if(e)for(var n=0;n<e.length;)t(e[n++])},c=function(e,t){for(var n in t)e[n]=t[n];return e},f=function(e,t){return c(Error(e),{src:"dojoLoader",info:t})},h=1,p=function(){return"_"+h++},y=function(e,t,n){return Y(e,t,n,0,y)},d=this,m=d.document,g=m&&m.createElement("DiV"),x=y.has=function(e){return a(v[e])?v[e]=v[e](d,m,g):v[e]},v=x.cache=t.hasCache;x.add=function(e,t,n,r){return(void 0===v[e]||r)&&(v[e]=t),n&&x(e)},c(t.hasCache,{"host-browser":0,dom:0,"dojo-dom-ready-api":0,"dojo-sniff":0,"dojo-inject-api":1,"host-webworker":1,"dojo-guarantee-console":0}),t.loaderPatch={injectUrl:function(e,t){try{importScripts(e),t()}catch(n){console.info("failed to load resource ("+e+")"),console.error(n)}}};for(var _ in e.has)x.add(_,e.has[_],0,1);y.async=1;var b=x("csp-restrictions")?function(){}:new Function("return eval(arguments[0]);");y.eval=function(e,t){return b(e+"\r\n//# sourceURL="+t)};var w={},T=y.signal=function(e,t){var n=w[e];l(n&&n.slice(0),function(e){e.apply(null,u(t)?t:[t])})},k=y.on=function(e,t){var n=w[e]||(w[e]=[]);return n.push(t),{remove:function(){for(var e=0;e<n.length;e++)if(n[e]===t){n.splice(e,1);break}}}},I=[],B={},S=[],j={},E=y.map={},L=[],P={},C="",A={},M={};_={};var V=function(e){var t,n,r,i;for(t in M)n=M[t],(r=t.match(/^url\:(.+)/))?A["url:"+fe(r[1],e)]=n:"*now"==t?i=n:"*noref"!=t&&(r=ae(t,e,!0),A[r.mid]=A["url:"+r.url]=n);i&&i(W(e)),M={}},N=function(e){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(e){return"\\"+e})},F=function(e,t){t.splice(0,t.length);for(var n in e)t.push([n,e[n],RegExp("^"+N(n)+"(/|$)"),n.length]);return t.sort(function(e,t){return t[3]-e[3]}),t},z=function(e,t){l(e,function(e){t.push([s(e[0])?RegExp("^"+N(e[0])+"$"):e[0],e[1]])})},D=function(e){var t=e.name;t||(t=e,e={name:t}),e=c({main:"main"},e),e.location=e.location?e.location:t,e.packageMap&&(E[t]=e.packageMap),e.main.indexOf("./")||(e.main=e.main.substring(2)),j[t]=e},O=[],R=function(e,t,n){for(var r in e)"waitSeconds"==r&&(y.waitms=1e3*(e[r]||0)),"cacheBust"==r&&(C=e[r]?s(e[r])?e[r]:(new Date).getTime()+"":""),("baseUrl"==r||"combo"==r)&&(y[r]=e[r]),e[r]!==v&&(y.rawConfig[r]=e[r],"has"!=r&&x.add("config-"+r,e[r],0,t));y.baseUrl||(y.baseUrl="./"),/\/$/.test(y.baseUrl)||(y.baseUrl+="/");for(r in e.has)x.add(r,e.has[r],0,t);l(e.packages,D);for(var i in e.packagePaths)l(e.packagePaths[i],function(e){var t=i+"/"+e;s(e)&&(e={name:e}),e.location=t,D(e)});if(F(c(E,e.map),L),l(L,function(e){e[1]=F(e[1],[]),"*"==e[0]&&(L.star=e)}),F(c(B,e.paths),S),z(e.aliases,I),t)O.push({config:e.config});else for(r in e.config)t=le(r,n),t.config=c(t.config||{},e.config[r]);e.cache&&(V(),M=e.cache,e.cache["*noref"]&&V()),T("config",[e,y.rawConfig])};if(x("dojo-cdn")){var U=m.getElementsByTagName("script");n=0;for(var q,G,H,Z;n<U.length;)q=U[n++],(H=q.getAttribute("src"))&&(Z=H.match(/(((.*)\/)|^)dojo\.js(\W|$)/i))&&(G=Z[3]||"",t.baseUrl=t.baseUrl||G),(H=q.getAttribute("data-dojo-config")||q.getAttribute("djConfig"))&&(_=y.eval("({ "+H+" })","data-dojo-config"))}y.rawConfig={},R(t,1),x("dojo-cdn")&&((j.dojo.location=G)&&(G+="/"),j.dijit.location=G+"../dijit/",j.dojox.location=G+"../dojox/"),R(e,1),R(_,1);var J=function(e){ke(function(){l(e.deps,Le)})},Y=function(e,t,n,i,o){var a;if(s(e)){if((a=le(e,i,!0))&&a.executed)return a.result;throw f("undefinedModule",e)}if(u(e)||(R(e,0,i),e=t,t=n),u(e))if(e.length){n="require*"+p();for(var l,h=[],d=0;d<e.length;)l=e[d++],h.push(le(l,i));a=c(ie("",n,0,""),{injected:2,deps:h,def:t||r,require:i?i.require:y,gc:1}),P[a.mid]=a,J(a);var m=Te&&!0;ke(function(){we(a,m)}),a.executed||$.push(a),Ie()}else t&&t();return o},W=function(e){if(!e)return y;var t=e.require;return t||(t=function(n,r,i){return Y(n,r,i,e,t)},e.require=c(t,y),t.module=e,t.toUrl=function(t){return fe(t,e)},t.toAbsMid=function(t){return ce(t,e)}),t},$=[],K=[],Q={},X=function(e){e.injected=1,Q[e.mid]=1,e.url&&(Q[e.url]=e.pack||1),Ve()},ee=function(e){e.injected=2,delete Q[e.mid],e.url&&delete Q[e.url],i(Q)&&Me()},te=y.idle=function(){return!K.length&&i(Q)&&!$.length&&!Te},ne=function(e,t){if(t)for(var n=0;n<t.length;n++)if(t[n][2].test(e))return t[n];return 0},re=function(e){var t,n,r=[];for(e=e.replace(/\\/g,"/").split("/");e.length;)t=e.shift(),".."==t&&r.length&&".."!=n?(r.pop(),n=r[r.length-1]):"."!=t&&r.push(n=t);return r.join("/")},ie=function(e,t,n,r){return{pid:e,mid:t,pack:n,url:r,executed:0,def:0}},oe=function(e,t,n,r,i,o,s,u,c){var h,p,y,d;if(d=/^\./.test(e),/(^\/)|(\:)|(\.js$)/.test(e)||d&&!t)return ie(0,e,0,e);if(e=re(d?t.mid+"/../"+e:e),/^\./.test(e))throw f("irrationalPath",e);t&&(y=ne(t.mid,o)),(y=(y=y||o.star)&&ne(e,y[1]))&&(e=y[1]+e.substring(y[3])),t=(Z=e.match(/^([^\/]+)(\/(.+))?$/))?Z[1]:"",(h=n[t])?e=t+"/"+(p=Z[3]||h.main):t="";var m=0;return l(u,function(t){var n=e.match(t[0]);n&&0<n.length&&(m=a(t[1])?e.replace(t[0],t[1]):t[1])}),m?oe(m,0,n,r,i,o,s,u,c):(n=r[e])?c?ie(n.pid,n.mid,n.pack,n.url):r[e]:(r=(y=ne(e,s))?y[1]+e.substring(y[3]):t?h.location+"/"+p:x("config-tlmSiblingOfDojo")?"../"+e:e,/(^\/)|(\:)/.test(r)||(r=i+r),ie(t,e,h,re(r+".js")))},ae=function(e,t,n){return oe(e,t,j,P,y.baseUrl,n?[]:L,n?[]:S,n?[]:I)},se=function(e,t,n){return e.normalize?e.normalize(t,function(e){return ce(e,n)}):ce(t,n)},ue=0,le=function(e,t,n){var r,i;return(r=e.match(/^(.+?)\!(.*)$/))?(i=le(r[1],t,n),5===i.executed&&!i.load&&xe(i),i.load?(r=se(i,r[2],t),e=i.mid+"!"+(i.dynamic?++ue+"!":"")+r):(r=r[2],e=i.mid+"!"+ ++ue+"!waitingForPlugin"),e={plugin:i,mid:e,req:W(t),prid:r}):e=ae(e,t),P[e.mid]||!n&&(P[e.mid]=e)},ce=y.toAbsMid=function(e,t){return ae(e,t).mid},fe=y.toUrl=function(e,t){var n=ae(e+"/x",t),r=n.url;return Be(0===n.pid?e:r.substring(0,r.length-5))},he={injected:2,executed:5,def:3,result:3};G=function(e){return P[e]=c({mid:e},he)};var pe=G("require"),ye=G("exports"),de=G("module"),me={},ge=0,xe=function(e){var t=e.result;return e.dynamic=t.dynamic,e.normalize=t.normalize,e.load=t.load,e},ve=function(e){var t={};l(e.loadQ,function(n){var r=se(e,n.prid,n.req.module),i=e.dynamic?n.mid.replace(/waitingForPlugin$/,r):e.mid+"!"+r,r=c(c({},n),{mid:i,prid:r,injected:0});P[i]&&P[i].injected||Se(P[i]=r),t[n.mid]=P[i],ee(n),delete P[n.mid]}),e.loadQ=0;var n,r=function(e){for(var n=e.deps||[],r=0;r<n.length;r++)(e=t[n[r].mid])&&(n[r]=e)};for(n in P)r(P[n]);l($,r)},_e=function(e){for(y.trace("loader-finish-exec",[e.mid]),e.executed=5,e.defOrder=ge++,e.loadQ&&(xe(e),ve(e)),n=0;n<$.length;)$[n]===e?$.splice(n,1):n++;/^require\*/.test(e.mid)&&delete P[e.mid]},be=[],we=function(e,t){if(4===e.executed)return y.trace("loader-circular-dependency",[be.concat(e.mid).join("->")]),!e.def||t?me:e.cjs&&e.cjs.exports;if(!e.executed){if(!e.def)return me;var n,r=e.mid,i=e.deps||[],o=[],s=0;for(e.executed=4;n=i[s++];){if(n=n===pe?W(e):n===ye?e.cjs.exports:n===de?e.cjs:we(n,t),n===me)return e.executed=0,y.trace("loader-exec-module",["abort",r]),me;o.push(n)}y.trace("loader-run-factory",[e.mid]);var u,r=e.def;if(x("config-dojo-loader-catches"))try{u=a(r)?r.apply(null,o):r}catch(l){T("error",e.result=f("factoryThrew",[e,l]))}else u=a(r)?r.apply(null,o):r;e.result=void 0===u&&e.cjs?e.cjs.exports:u,_e(e)}return e.result},Te=0,ke=function(e){try{Te++,e()}catch(t){throw t}finally{Te--}te()&&T("idle",[])},Ie=function(){Te||ke(function(){for(var e,t,n=0;n<$.length;)e=ge,t=$[n],we(t),e!=ge?n=0:n++})};void 0===x("dojo-loader-eval-hint-url")&&x.add("dojo-loader-eval-hint-url",1);var Be="function"==typeof e.fixupUrl?e.fixupUrl:function(e){return e+="",e+(C?(/\?/.test(e)?"&":"?")+C:"")},Se=function(e){var t=e.plugin;5===t.executed&&!t.load&&xe(t);var n=function(t){e.result=t,ee(e),_e(e),Ie()};t.load?t.load(e.prid,e.req,n):t.loadQ?t.loadQ.push(e):(t.loadQ=[e],$.unshift(t),Le(t))},je=0,Ee=function(e,t){if(x("config-stripStrict")&&(e=e.replace(/(["'])use strict\1/g,"")),x("config-dojo-loader-catches"))try{e===je?je.call(null):y.eval(e,x("dojo-loader-eval-hint-url")?t.url:t.mid)}catch(n){T("error",f("evalModuleThrew",t))}else e===je?je.call(null):y.eval(e,x("dojo-loader-eval-hint-url")?t.url:t.mid)},Le=function(e){var t=e.mid,n=e.url;if(!e.executed&&!e.injected&&!(Q[t]||e.url&&(e.pack&&Q[e.url]===e.pack||1==Q[e.url])))if(X(e),e.plugin)Se(e);else{var r=function(){if(Ce(e),2!==e.injected){if(x("dojo-enforceDefine"))return void T("error",f("noDefine",e));ee(e),c(e,he),y.trace("loader-define-nonmodule",[e.url])}Ie()};(je=A[t]||A["url:"+e.url])?(y.trace("loader-inject",["cache",e.mid,n]),Ee(je,e),r()):(y.trace("loader-inject",["script",e.mid,n]),y.injectUrl(Be(n),r,e))}},Pe=function(e,t,n){if(y.trace("loader-define-module",[e.mid,t]),2===e.injected)return T("error",f("multipleDefine",e)),e;c(e,{deps:t,def:n,cjs:{id:e.mid,uri:e.url,exports:e.result={},setExports:function(t){e.cjs.exports=t},config:function(){return e.config}}});for(var r=0;t[r];r++)t[r]=le(t[r],e);return ee(e),!a(n)&&!t.length&&(e.result=n,_e(e)),e},Ce=function(e,t){for(var n,r,i=[];K.length;)r=K.shift(),t&&(r[0]=t.shift()),n=r[0]&&le(r[0])||e,i.push([n,r[1],r[2]]);V(e),l(i,function(e){J(Pe.apply(null,e))})},Ae=0,Me=r,Ve=r,Me=function(){Ae&&clearTimeout(Ae),Ae=0},Ve=function(){Me(),y.waitms&&(Ae=d.setTimeout(function(){Me(),T("error",f("timeout",Q))},y.waitms))};y.log=function(){try{for(var e=0;e<arguments.length;e++)console.log(arguments[e])}catch(t){}},y.trace=r,G=function(e,t,n){var r=arguments.length,i=["require","exports","module"],o=[0,e,t];1==r?o=[0,a(e)?i:[],e]:2==r&&s(e)?o=[e,a(t)?i:[],t]:3==r&&(o=[e,t,n]),y.trace("loader-define",o.slice(0,2)),(r=o[0]&&le(o[0]))&&!Q[r.mid]?J(Pe(r,o[1],o[2])):(x("ie-event-behavior"),K.push(o))},G.amd={vendor:"dojotoolkit.org"},c(c(y,t.loaderPatch),e.loaderPatch),k("error",function(e){try{if(console.error(e),e instanceof Error){for(var t in e)console.log(t+":",e[t]);console.log(".")}}catch(n){}}),c(y,{uid:p,cache:A,packs:j}),d.define?T("error",f("defineAlreadyDefined",0)):(d.define=G,d.require=y,l(O,function(e){R(e)}),k=_.deps||e.deps||t.deps,_=_.callback||e.callback||t.callback,y.boot=k||_?[k||[],_]:0)}(this.dojoConfig||this.djConfig||this.require||{},{async:1,hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:".",name:"dojo"},{location:"../dijit",name:"dijit"},{location:"../dojox",name:"dojox"},{location:"../dgrid",main:"OnDemandGrid",name:"dgrid"},{location:"../dgrid1",main:"OnDemandGrid",name:"dgrid1"},{location:"../dstore",main:"Store",name:"dstore"},{location:"../put-selector",main:"put",name:"put-selector"},{location:"../xstyle",name:"xstyle"},{location:"../moment",main:"moment.js",name:"moment"},{location:"../esri",name:"esri"}]}),require({cache:{"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(e,t){t.add("bug-for-in-skips-shadowed",function(){for(var e in{toString:1})return 0;return 1});var n=t("bug-for-in-skips-shadowed")?"hasOwnProperty valueOf isPrototypeOf propertyIsEnumerable toLocaleString toString constructor".split(" "):[],r=n.length,i=function(t,n,r){r||(r=t[0]&&e.scopeMap[t[0]]?e.scopeMap[t.shift()][1]:e.global);try{for(var i=0;i<t.length;i++){var o=t[i];if(!(o in r)){if(!n)return;r[o]={}}r=r[o]}return r}catch(a){}},o=Object.prototype.toString,a=function(e,t,n){return(n||[]).concat(Array.prototype.slice.call(e,t||0))},s=/\{([^\}]+)\}/g,u={_extraNames:n,_mixin:function(e,i,o){var a,s,u,l={};for(a in i)s=i[a],a in e&&(e[a]===s||a in l&&l[a]===s)||(e[a]=o?o(s):s);if(t("bug-for-in-skips-shadowed")&&i)for(u=0;r>u;++u)a=n[u],s=i[a],a in e&&(e[a]===s||a in l&&l[a]===s)||(e[a]=o?o(s):s);return e},mixin:function(e,t){e||(e={});for(var n=1,r=arguments.length;r>n;n++)u._mixin(e,arguments[n]);return e},setObject:function(e,t,n){var r=e.split(".");return e=r.pop(),(n=i(r,!0,n))&&e?n[e]=t:void 0},getObject:function(e,t,n){return e?i(e.split("."),t,n):n},exists:function(e,t){return void 0!==u.getObject(e,!1,t)},isString:function(e){return"string"==typeof e||e instanceof String},isArray:Array.isArray||function(e){return"[object Array]"==o.call(e)},isFunction:function(e){return"[object Function]"===o.call(e)},isObject:function(e){return void 0!==e&&(null===e||"object"==typeof e||u.isArray(e)||u.isFunction(e))},isArrayLike:function(e){return!!e&&!u.isString(e)&&!u.isFunction(e)&&!(e.tagName&&"form"==e.tagName.toLowerCase())&&(u.isArray(e)||isFinite(e.length))},isAlien:function(e){return e&&!u.isFunction(e)&&/\{\s*\[native code\]\s*\}/.test(String(e))},extend:function(e,t){for(var n=1,r=arguments.length;r>n;n++)u._mixin(e.prototype,arguments[n]);return e},_hitchArgs:function(t,n){var r=u._toArray(arguments,2),i=u.isString(n);return function(){var o=u._toArray(arguments),a=i?(t||e.global)[n]:n;return a&&a.apply(t||this,r.concat(o))}},hitch:function(t,n){if(2<arguments.length)return u._hitchArgs.apply(e,arguments);if(n||(n=t,t=null),u.isString(n)){if(t=t||e.global,!t[n])throw['lang.hitch: scope["',n,'"] is null (scope="',t,'")'].join("");return function(){return t[n].apply(t,arguments||[])}}return t?function(){return n.apply(t,arguments||[])}:n},delegate:function(){function e(){}return function(t,n){e.prototype=t;var r=new e;return e.prototype=null,n&&u._mixin(r,n),r}}(),_toArray:t("ie")?function(){function e(e,t,n){for(n=n||[],t=t||0;t<e.length;t++)n.push(e[t]);return n}return function(t){return(t.item?e:a).apply(this,arguments)}}():a,partial:function(t){return u.hitch.apply(e,[null].concat(u._toArray(arguments)))},clone:function(e){if(!e||"object"!=typeof e||u.isFunction(e))return e;if(e.nodeType&&"cloneNode"in e)return e.cloneNode(!0);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return RegExp(e);var t,n,r;if(u.isArray(e))for(t=[],n=0,r=e.length;r>n;++n)n in e&&(t[n]=u.clone(e[n]));else t=e.constructor?new e.constructor:{};return u._mixin(t,e,u.clone)},trim:String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(e,t,n){return e.replace(n||s,u.isFunction(t)?t:function(e,n){return u.getObject(n,!1,t)})}};return u.mixin(e,u),u})},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(e,t,n,r){var i,o=function(){return this}(),a={},s={},u={config:t,global:o,dijit:a,dojox:s},a={dojo:["dojo",u],dijit:["dijit",a],dojox:["dojox",s]};r=n.map&&n.map[r.id.match(/[^\/]+/)[0]];for(i in r)a[i]?a[i][0]=r[i]:a[i]=[r[i],{}];for(i in a)r=a[i],r[1]._scopeName=r[0],t.noGlobals||(o[r[0]]=r[1]);if(u.scopeMap=a,u.baseUrl=u.config.baseUrl=n.baseUrl,u.isAsync=n.async,u.locale=t.locale,o="$Rev: 91fa0cb $".match(/[0-9a-f]{7,}/),u.version={major:1,minor:11,patch:2,flag:"",revision:o?o[0]:NaN,toString:function(){var e=u.version;return e.major+"."+e.minor+"."+e.patch+e.flag+" ("+e.revision+")"}},e("csp-restrictions")||Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(u),u.exit=function(){},e.add("dojo-debug-messages",!!t.isDebug),u.deprecated=u.experimental=function(){},e("dojo-debug-messages")&&(u.deprecated=function(e,t,n){e="DEPRECATED: "+e,t&&(e+=" "+t),n&&(e+=" -- will be removed in version: "+n),console.warn(e)},u.experimental=function(e,t){var n="EXPERIMENTAL: "+e+" -- APIs subject to change without notice.";t&&(n+=" "+t),console.warn(n)}),t.modulePaths){u.deprecated("dojo.modulePaths","use paths configuration"),e={};for(i in t.modulePaths)e[i.replace(/\./g,"/")]=t.modulePaths[i];n({paths:e})}return u.moduleUrl=function(e,t){u.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var r=null;return e&&(r=n.toUrl(e.replace(/\./g,"/")+(t?"/"+t:"")+"/*.*").replace(/\/\*\.\*/,"")+(t?"":"/")),r},u._hasResource={},u})},"dojo/has":function(){define(["require","module"],function(e,t){var n=e.has||function(){};return n.clearElement=function(e){return e.innerHTML="",e},n.normalize=function(e,t){var r=e.match(/[\?:]|[^:\?]*/g),i=0,o=function(e){var t=r[i++];return":"==t?0:"?"==r[i++]?!e&&n(t)?o():(o(!0),o(e)):t||0};return(e=o())&&t(e)},n.load=function(e,t,n){e?t([e],n):n()},n})},"dojo/_base/config":function(){define(["../has","require"],function(e,t){var n,r={},i=t.rawConfig;for(n in i)r[n]=i[n];return!r.locale&&"undefined"!=typeof navigator&&(i=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language||navigator.userLanguage)&&(r.locale=i.toLowerCase()),r})},"dojo/sniff":function(){define(["./has"],function(e){return e})}}}),function(){var e=this.require;e({cache:{}}),!e.async&&e(["dojo"]),e.boot&&e.apply(null,e.boot)}(),require({cache:{"esri/layers/vectorTiles/core/workers/WorkerConnection":function(){define(["require","exports","./WorkerProxy"],function(e,t,n){return function(){function e(e,t,r){this.id=r,"function"==typeof e&&(this._target=new e(this)),this.proxy=new n(this._target,t,this)}return e.prototype.invoke=function(e,t,n){return this.proxy.invoke(e,t,n,this.id)},e}()})},"esri/layers/vectorTiles/core/workers/WorkerProxy":function(){define(["require","exports","dojo/Deferred"],function(e,t,n){return function(){function e(e,t,n){this.parentModule=e,this.worker=t,this.connection=n,this.msgCount=0,this.outgoingJobs={},this.incomingJobs={},this.msgCount=0,this.outgoingJobs={},this.incomingJobs={}}return e.prototype.invoke=function(e,t,r,i){var o=this,a=++this.msgCount,s=new n(function(e){o.worker.postMessage({type:"<cancel>",id:a,connection:i,data:{reason:e}}),o.outgoingJobs[a]&&delete o.outgoingJobs[a]});return this.outgoingJobs[a]=s,this.worker.postMessage({type:e,id:a,connection:i,data:t},r),s.promise},e.prototype.message=function(e){var t=this;if(e&&e.data){var n=e.data.type;if(n){var r=e.data,i=e.data.id,o=e.data.connection;"<response>"===n&&i?(e=this.outgoingJobs[i])&&(delete this.outgoingJobs[i],r.error?e.reject(r.error):e.resolve(r.data)):"<cancel>"===n&&i?(e=this.incomingJobs[i])&&e.cancel(r.data.reason||"cancel"):(e=this.parentModule[n],"function"==typeof e&&(r=e.call(this.parentModule,r.data,this.connection),this.incomingJobs[i]=r,r.then(function(e){t.worker.postMessage({type:"<response>",id:i,connection:o,data:e?e.data:null},e?e.buffers:[])}).otherwise(function(e){e||(e="Error encountered at method "+n),t.worker.postMessage({type:"<response>",id:i,connection:o,data:null,error:e})}).always(function(){delete t.incomingJobs[i]})))}}},e}()})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise","./promise/instrumentation"],function(e,t,n,r,i){var o=Object.freeze||function(){},a=function(e,t,n,r,i){for(2===t&&c.instrumentRejected&&0===e.length&&c.instrumentRejected(n,!1,r,i),i=0;i<e.length;i++)s(e[i],t,n,r)},s=function(e,t,n,r){var i=e[t],o=e.deferred;if(i)try{var a=i(n);if(0===t)"undefined"!=typeof a&&l(o,t,a);else{if(a&&"function"==typeof a.then)return e.cancel=a.cancel,void a.then(u(o,1),u(o,2),u(o,0));l(o,1,a)}}catch(s){l(o,2,s)}else l(o,t,n);2===t&&c.instrumentRejected&&c.instrumentRejected(n,!!i,r,o.promise)},u=function(e,t){return function(n){l(e,t,n)}},l=function(e,t,n){if(!e.isCanceled())switch(t){case 0:e.progress(n);break;case 1:e.resolve(n);break;case 2:e.reject(n)}},c=function(e){var t,i,u,l=this.promise=new r,f=this,h=!1,p=[];Error.captureStackTrace&&(Error.captureStackTrace(f,c),Error.captureStackTrace(l,c)),this.isResolved=l.isResolved=function(){return 1===t},this.isRejected=l.isRejected=function(){return 2===t},this.isFulfilled=l.isFulfilled=function(){return!!t},this.isCanceled=l.isCanceled=function(){return h},this.progress=function(e,n){if(t){if(!0===n)throw Error("This deferred has already been fulfilled.");return l}return a(p,0,e,null,f),l},this.resolve=function(e,n){if(t){if(!0===n)throw Error("This deferred has already been fulfilled.");return l}return a(p,t=1,i=e,null,f),p=null,l};var y=this.reject=function(e,n){if(t){if(!0===n)throw Error("This deferred has already been fulfilled.");return l}return Error.captureStackTrace&&Error.captureStackTrace(u={},y),a(p,t=2,i=e,u,f),p=null,l};this.then=l.then=function(e,n,r){var o=[r,e,n];return o.cancel=l.cancel,o.deferred=new c(function(e){return o.cancel&&o.cancel(e)}),t&&!p?s(o,t,i,u):p.push(o),o.deferred.promise},this.cancel=l.cancel=function(r,o){if(t){if(!0===o)throw Error("This deferred has already been fulfilled.")}else{if(e){var a=e(r);r="undefined"==typeof a?r:a}if(h=!0,!t)return"undefined"==typeof r&&(r=new n),y(r),r;if(2===t&&i===r)return r}},o(l)};return c.prototype.toString=function(){return"[object Deferred]"},i&&i(c),c})},"dojo/errors/CancelError":function(){define(["./create"],function(e){return e("CancelError",null,null,{dojoType:"cancel"})})},"dojo/errors/create":function(){define(["../_base/lang"],function(e){return function(t,n,r,i){r=r||Error;var o=function(e){if(r===Error){Error.captureStackTrace&&Error.captureStackTrace(this,o);var t,i=Error.call(this,e);for(t in i)i.hasOwnProperty(t)&&(this[t]=i[t]);this.message=e,this.stack=i.stack}else r.apply(this,arguments);n&&n.apply(this,arguments)};return o.prototype=e.delegate(r.prototype,i),o.prototype.name=t,o.prototype.constructor=o}})},"dojo/promise/Promise":function(){define(["../_base/lang"],function(e){function t(){throw new TypeError("abstract")}return e.extend(function(){},{then:function(e,n,r){t()},cancel:function(e,n){t()},isResolved:function(){t()},isRejected:function(){t()},isFulfilled:function(){t()},isCanceled:function(){t()},always:function(e){return this.then(e,e)},otherwise:function(e){return this.then(null,e)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"dojo/promise/instrumentation":function(){define(["./tracer","../has","../_base/lang","../_base/array"],function(e,t,n,r){function i(e,t,n){var r="";e&&e.stack&&(r+=e.stack),t&&t.stack&&(r+="\n    ----------------------------------------\n    rejected"+t.stack.split("\n").slice(1).join("\n").replace(/^\s+/," ")),n&&n.stack&&(r+="\n    ----------------------------------------\n"+n.stack),console.error(e,r)}function o(e,t,n,r){t||i(e,n,r)}function a(e,t,n,i){r.some(u,function(n){return n.error===e?(t&&(n.handled=!0),!0):void 0})||u.push({error:e,rejection:n,handled:t,deferred:i,timestamp:(new Date).getTime()}),l||(l=setTimeout(s,c))}function s(){var e=(new Date).getTime(),t=e-c;u=r.filter(u,function(e){return e.timestamp<t?(e.handled||i(e.error,e.rejection,e.deferred),!1):!0}),l=u.length?setTimeout(s,u[0].timestamp+c-e):!1}t.add("config-useDeferredInstrumentation","report-unhandled-rejections");var u=[],l=!1,c=1e3;return function(r){var i=t("config-useDeferredInstrumentation");if(i){e.on("resolved",n.hitch(console,"log","resolved")),e.on("rejected",n.hitch(console,"log","rejected")),e.on("progress",n.hitch(console,"log","progress"));var s=[];if("string"==typeof i&&(s=i.split(","),i=s.shift()),"report-rejections"===i)r.instrumentRejected=o;else{if("report-unhandled-rejections"!==i&&!0!==i&&1!==i)throw Error("Unsupported instrumentation usage <"+i+">");r.instrumentRejected=a,c=parseInt(s[0],10)||c}}}})},"dojo/promise/tracer":function(){define(["../_base/lang","./Promise","../Evented"],function(e,t,n){function r(e){setTimeout(function(){o.apply(i,e)},0)}var i=new n,o=i.emit;return i.emit=null,t.prototype.trace=function(){var t=e._toArray(arguments);return this.then(function(e){r(["resolved",e].concat(t))},function(e){r(["rejected",e].concat(t))},function(e){r(["progress",e].concat(t))}),this},t.prototype.traceRejected=function(){var t=e._toArray(arguments);return this.otherwise(function(e){r(["rejected",e].concat(t))}),this},i})},"dojo/Evented":function(){define(["./aspect","./on"],function(e,t){function n(){}var r=e.after;return n.prototype={on:function(e,n){return t.parse(this,e,n,function(e,t){return r(e,"on"+t,n,!0)})},emit:function(e,n){var r=[this];return r.push.apply(r,arguments),t.emit.apply(t,r)}},n})},"dojo/aspect":function(){define([],function(){function e(e,t,n,r){var i,o=e[t],a="around"==t;if(a){var s=n(function(){return o.advice(this,arguments)});i={remove:function(){s&&(s=e=n=null)},advice:function(e,t){return s?s.apply(e,t):o.advice(e,t)}}}else i={remove:function(){if(i.advice){var r=i.previous,o=i.next;o||r?(r?r.next=o:e[t]=o,o&&(o.previous=r)):delete e[t],e=n=i.advice=null}},id:e.nextId++,advice:n,receiveArguments:r};if(o&&!a)if("after"==t){for(;o.next&&(o=o.next););o.next=i,i.previous=o}else"before"==t&&(e[t]=i,i.next=o,o.previous=i);else e[t]=i;return i}function t(t){return function(r,i,o,a){var s,u=r[i];return u&&u.target==r||(r[i]=s=function(){for(var e=s.nextId,t=arguments,r=s.before;r;)r.advice&&(t=r.advice.apply(this,t)||t),r=r.next;if(s.around)var i=s.around.advice(this,t);for(r=s.after;r&&r.id<e;){if(r.advice)if(r.receiveArguments)var o=r.advice.apply(this,t),i=o===n?i:o;else i=r.advice.call(this,i,t);r=r.next}return i},u&&(s.around={advice:function(e,t){return u.apply(e,t)}}),s.target=r,s.nextId=s.nextId||0),r=e(s||u,t,o,a),o=null,r}}var n,r=t("after"),i=t("before"),o=t("around");return{before:i,around:o,after:r}})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./sniff"],function(e,t,n){function r(e,t,r,i,o){if(i=t.match(/(.*):(.*)/))return t=i[2],i=i[1],a.selector(i,t).call(o,e,r);if(n("touch")&&(s.test(t)&&(r=b(r)),!n("event-orientationchange")&&"orientationchange"==t&&(t="resize",e=window,r=b(r))),h&&(r=h(r)),e.addEventListener){var u=t in c,l=u?c[t]:t;return e.addEventListener(l,r,u),{remove:function(){e.removeEventListener(l,r,u)}}}if(m&&e.attachEvent)return m(e,"on"+t,r);throw Error("Target must be an event emitter")}function i(){this.cancelable=!1,this.defaultPrevented=!0}function o(){this.bubbles=!1}var a=function(e,t,n,i){return"function"!=typeof e.on||"function"==typeof t||e.nodeType?a.parse(e,t,n,r,i,this):e.on(t,n)};a.pausable=function(e,t,n,r){var i;return e=a(e,t,function(){return i?void 0:n.apply(this,arguments)},r),e.pause=function(){i=!0},e.resume=function(){i=!1},e},a.once=function(e,t,n,r){var i=a(e,t,function(){return i.remove(),n.apply(this,arguments)});return i},a.parse=function(e,t,n,r,i,o){var s;if(t.call)return t.call(o,e,n);if(t instanceof Array?s=t:-1<t.indexOf(",")&&(s=t.split(/\s*,\s*/)),s){var u=[];t=0;for(var l;l=s[t++];)u.push(a.parse(e,l,n,r,i,o));return u.remove=function(){for(var e=0;e<u.length;e++)u[e].remove()},u}return r(e,t,n,i,o)};var s=/^touch/;a.matches=function(e,n,r,i,o){for(o=o&&"function"==typeof o.matches?o:t.query,i=!1!==i,1!=e.nodeType&&(e=e.parentNode);!o.matches(e,n,r);)if(e==r||!1===i||!(e=e.parentNode)||1!=e.nodeType)return!1;return e},a.selector=function(e,t,n){return function(r,i){function o(t){return a.matches(t,e,r,n,s)}var s="function"==typeof e?{matches:e}:this,u=t.bubble;return u?a(r,u(o),i):a(r,t,function(e){var t=o(e.target);return t?(e.selectorTarget=t,i.call(t,e)):void 0})}};var u=[].slice,l=a.emit=function(e,t,n){var r=u.call(arguments,2),a="on"+t;if("parentNode"in e){var s,l=r[0]={};for(s in n)l[s]=n[s];l.preventDefault=i,l.stopPropagation=o,l.target=e,l.type=t,n=l}do e[a]&&e[a].apply(e,r);while(n&&n.bubbles&&(e=e.parentNode));return n&&n.cancelable&&n},c=n("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!n("event-stopimmediatepropagation"))var f=function(){this.modified=this.immediatelyStopped=!0},h=function(e){return function(t){return t.immediatelyStopped?void 0:(t.stopImmediatePropagation=f,e.apply(this,arguments))}};if(n("dom-addeventlistener"))a.emit=function(e,t,n){if(e.dispatchEvent&&document.createEvent){var r=(e.ownerDocument||document).createEvent("HTMLEvents");r.initEvent(t,!!n.bubbles,!!n.cancelable);for(var i in n)i in r||(r[i]=n[i]);return e.dispatchEvent(r)&&r}return l.apply(a,arguments)};else{a._fixEvent=function(e,t){if(e||(e=(t&&(t.ownerDocument||t.document||t).parentWindow||window).event),!e)return e;try{p&&e.type==p.type&&e.srcElement==p.target&&(e=p)}catch(n){}if(!e.target)switch(e.target=e.srcElement,e.currentTarget=t||e.srcElement,"mouseover"==e.type&&(e.relatedTarget=e.fromElement),"mouseout"==e.type&&(e.relatedTarget=e.toElement),e.stopPropagation||(e.stopPropagation=g,e.preventDefault=x),e.type){case"keypress":var r="charCode"in e?e.charCode:e.keyCode;10==r?(r=0,e.keyCode=13):13==r||27==r?r=0:3==r&&(r=99),e.charCode=r,r=e,r.keyChar=r.charCode?String.fromCharCode(r.charCode):"",r.charOrCode=r.keyChar||r.keyCode}return e};var p,y=function(e){this.handle=e};y.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var d=function(e){return function(t){t=a._fixEvent(t,this);var n=e.call(this,t);return t.modified&&(p||setTimeout(function(){p=null}),p=t),n}},m=function(t,r,i){if(i=d(i),((t.ownerDocument?t.ownerDocument.parentWindow:t.parentWindow||t.window||window)!=top||5.8>n("jscript"))&&!n("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var o=t[r];if(!o||!o.listeners){var a=o,o=Function("event","var callee = arguments.callee; for(var i = 0; i<callee.listeners.length; i++){var listener = _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");o.listeners=[],t[r]=o,o.global=this,a&&o.listeners.push(_dojoIEListeners_.push(a)-1)}return o.listeners.push(t=o.global._dojoIEListeners_.push(i)-1),new y(t)}return e.after(t,r,i,!0)},g=function(){this.cancelBubble=!0},x=a._preventDefault=function(){if(this.bubbledKeyCode=this.keyCode,this.ctrlKey)try{this.keyCode=0}catch(e){}this.defaultPrevented=!0,this.returnValue=!1,this.modified=!0}}if(n("touch"))var v=function(){},_=window.orientation,b=function(e){return function(t){var r=t.corrected;if(!r){var i=t.type;try{delete t.type}catch(o){}if(t.type){if(n("touch-can-modify-event-delegate"))v.prototype=t,r=new v;else{var a,r={};for(a in t)r[a]=t[a]}r.preventDefault=function(){t.preventDefault()},r.stopPropagation=function(){t.stopPropagation()}}else r=t,r.type=i;if(t.corrected=r,"resize"==i)return _==window.orientation?null:(_=window.orientation,r.type="orientationchange",e.call(this,r));"rotation"in r||(r.rotation=0,r.scale=1);var s,i=r.changedTouches[0];for(s in i)delete r[s],r[s]=i[s]}return e.call(this,r)}};return a})},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(e,t,n){function r(e){return s[e]=new Function("item","index","array",e)}function i(e){var t=!e;return function(n,i,o){var a,u=0,l=n&&n.length||0;if(l&&"string"==typeof n&&(n=n.split("")),"string"==typeof i&&(i=s[i]||r(i)),o){for(;l>u;++u)if(a=!i.call(o,n[u],u,n),e^a)return!a}else for(;l>u;++u)if(a=!i(n[u],u,n),e^a)return!a;return t}}function o(e){var t=1,n=0,r=0;return e||(t=n=r=-1),function(i,o,s,l){if(l&&t>0)return u.lastIndexOf(i,o,s);l=i&&i.length||0;var c=e?l+r:n;for(s===a?s=e?n:l+r:0>s?(s=l+s,0>s&&(s=n)):s=s>=l?l+r:s,l&&"string"==typeof i&&(i=i.split(""));s!=c;s+=t)if(i[s]==o)return s;return-1}}var a,s={},u={every:i(!1),some:i(!0),indexOf:o(!0),lastIndexOf:o(!1),forEach:function(e,t,n){var i=0,o=e&&e.length||0;if(o&&"string"==typeof e&&(e=e.split("")),"string"==typeof t&&(t=s[t]||r(t)),n)for(;o>i;++i)t.call(n,e[i],i,e);else for(;o>i;++i)t(e[i],i,e)},map:function(e,t,n,i){var o=0,a=e&&e.length||0;if(i=new(i||Array)(a),a&&"string"==typeof e&&(e=e.split("")),"string"==typeof t&&(t=s[t]||r(t)),n)for(;a>o;++o)i[o]=t.call(n,e[o],o,e);else for(;a>o;++o)i[o]=t(e[o],o,e);return i},filter:function(e,t,n){var i,o=0,a=e&&e.length||0,u=[];if(a&&"string"==typeof e&&(e=e.split("")),"string"==typeof t&&(t=s[t]||r(t)),n)for(;a>o;++o)i=e[o],t.call(n,i,o,e)&&u.push(i);else for(;a>o;++o)i=e[o],t(i,o,e)&&u.push(i);return u},clearCache:function(){s={}}};return n.mixin(e,u),u})},"esri/layers/vectorTiles/views/vectorTiles/WorkerTileHandler":function(){define("require exports dojo/Deferred ../../core/promiseUtils ./WorkerTile ./style/StyleRepository".split(" "),function(e,t,n,r,i,o){return function(){function e(){this._tiles={},this._spriteInfo={},this._glyphInfo={}}return e.prototype.reset=function(){var e=new n;this._spriteInfo={},this._glyphInfo={};var t,r=this._tiles;for(t in r){
var i=r[t];i&&i.setObsolete()}return this._tiles={},e.resolve(),e.promise},e.prototype.getLayers=function(){return this._layers},e.prototype.setLayers=function(e){return this._layers=new o(e).layers,r.resolve({data:""})},e.prototype.getTile=function(e,t){var n=this,o=e.key,a=new i(e.key,e.refKey,this,e.rotation),s=e.cacheTile;return t.invoke("fetchTileData",e.refKey).then(function(e){return a.setDataAndParse(e.protobuff,t).then(function(e){return s&&6!==a.status&&(n._tiles[o]=a),e}).otherwise(function(e){return a.setObsolete(),r.reject(e)})}).otherwise(function(e){return a.setObsolete(),n._tiles[a.tileKey]&&delete n._tiles[a.tileKey],r.reject(e)}).always(function(e){return e})},e.prototype.update=function(e){var t=this._tiles[e.key];return t?t.updateSymbols(e.rotation):r.reject()},e.prototype.destructTileData=function(e){return this._tiles[e.key]&&delete this._tiles[e.key],r.resolve()},e.prototype.fetchSprites=function(e,t){var n=[],i=this._spriteInfo;return e.forEach(function(e){void 0===i[e]&&n.push(e)}),0===n.length?r.resolve():t.invoke("getSprites",{sprites:n}).then(function(e){e=e.spriteItems;for(var t in e)i[t]=e[t]})},e.prototype.getSpriteItems=function(){return this._spriteInfo},e.prototype.fetchGlyphs=function(e,t,n,i){var o=[],a=this._glyphInfo[t];return a?n.forEach(function(e){a[e]||o.push(e)}):(a=this._glyphInfo[t]=[],n.forEach(function(e){return o.push(e)})),0===o.length?r.resolve():i.invoke("getGlyphs",{tileID:e,font:t,codePoints:o}).then(function(e){e=e.glyphItems;for(var t in e)a[t]=e[t]})},e.prototype.getGlyphItems=function(e){return this._glyphInfo[e]},e}()})},"esri/layers/vectorTiles/core/promiseUtils":function(){define(["require","exports","dojo/Deferred","./Error"],function(e,t,n,r){t.eachAlways=function(e){var t=new n,r=[],i=e.length;return 0===i&&t.resolve(r),e.forEach(function(e){var n={promise:e};r.push(n),e.then(function(e){n.value=e}).otherwise(function(e){n.error=e}).then(function(){--i,0===i&&t.resolve(r)})}),t.promise},t.create=function(e){var t=new n;return e(function(e){return void 0===e&&(e=null),t.resolve(e)},t.reject),t.promise},t.reject=function(e){var t=new n;return t.reject(e),t.promise},t.resolve=function(e){void 0===e&&(e=null);var t=new n;return t.resolve(e),t.promise},t.after=function(e,t){void 0===t&&(t=null);var r=0,i=new n(function(){r&&(clearTimeout(r),r=0)}),r=setTimeout(function(){i.resolve(t)},e);return i.promise},t.timeout=function(e,t,i){var o=0,a=new n(e.cancel);return e.then(function(e){a.isFulfilled()||(a.resolve(e),o&&(clearTimeout(o),o=0))}),e.otherwise(function(e){a.isFulfilled()||(a.reject(e),o&&(clearTimeout(o),o=0))}),o=setTimeout(function(){var e=i||new r("promiseUtils:timeout","The wrapped promise did not resolve within "+t+" ms");a.reject(e)},t),a.promise},t.wrapCallback=function(e){var t=!1,r=new n(function(){return t=!0});return e(function(e){t||r.resolve(e)}),r.promise}})},"esri/layers/vectorTiles/core/Error":function(){define(["require","exports","./tsSupport/extendsHelper","./tsSupport/decorateHelper","./Message"],function(e,t,n,r,i){return e=function(e){function t(){e.apply(this,arguments)}return n(t,e),t}(i),e.prototype.type="error",e})},"esri/layers/vectorTiles/core/tsSupport/extendsHelper":function(){define([],function(){return function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}})},"esri/layers/vectorTiles/core/tsSupport/decorateHelper":function(){define([],function(){return function(e,t,n,r){var i,o=arguments.length,a=3>o?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(3>o?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}})},"esri/layers/vectorTiles/core/Message":function(){define(["require","exports","./tsSupport/extendsHelper","./tsSupport/decorateHelper","dojo/string"],function(e,t,n,r,i){return function(){function e(e,t,n){this.name=e,this.message=t&&i.substitute(t,n,function(e){return null==e?"":e})||"",this.details=n}return e.prototype.toString=function(){return"["+this.name+"]: "+this.message},e}()})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(e,t){var n=/[&<>'"\/]/g,r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},i={};return t.setObject("dojo.string",i),i.escape=function(e){return e?e.replace(n,function(e){return r[e]}):""},i.rep=function(e,t){if(0>=t||!e)return"";for(var n=[];1&t&&n.push(e),t>>=1;)e+=e;return n.join("")},i.pad=function(e,t,n,r){return n||(n="0"),e=String(e),t=i.rep(n,Math.ceil((t-e.length)/n.length)),r?e+t:t+e},i.substitute=function(n,r,i,o){return o=o||e.global,i=i?t.hitch(o,i):function(e){return e},n.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(e,n,a){return""==n?"$":(e=t.getObject(n,!1,r),a&&(e=t.getObject(a,!1,o).call(o,e,n)),i(e,n).toString())})},i.trim=String.prototype.trim?t.trim:function(e){e=e.replace(/^\s+/,"");for(var t=e.length-1;t>=0;t--)if(/\S/.test(e.charAt(t))){e=e.substring(0,t+1);break}return e},i})},"esri/layers/vectorTiles/views/vectorTiles/WorkerTile":function(){define("require exports dojo/Deferred ../../core/promiseUtils ../../core/executeAsync ./VertexMemoryBuffer ./IndexMemoryBuffer ./TileParser ./BackgroundBucket ./FillBucket ./LineBucket ./SymbolBucket ./Placement ./GeometryUtils".split(" "),function(e,t,n,r,i,o,a,s,u,l,c,f,h,p){return function(){function e(e,t,n,r){void 0===r&&(r=0),this.rotation=0,this._symbolBuckets=[],this.tileKey=e,this.refKey=t,this._workerTileHandler=n,this.status=0,this.rotation=r,this.placementEngine=new h.PlacementEngine(p.C_DEG_TO_RAD*r)}return e.prototype.setDataAndParse=function(e,t){var r=this;this.polygonVertexBuffer=new o.PolygonMemoryBuffer,this.polygonOutlineVertexBuffer=new o.PolygonOutlineMemoryBuffer,this.polygonIndexBuffer=new a.TriangleElementMemoryBuffer,this.polygonOutlineIndexBuffer=new a.TriangleElementMemoryBuffer,this.lineVertexBuffer=new o.LineMemoryBuffer,this.lineIndexBuffer=new a.TriangleElementMemoryBuffer,this.lineJoinVertexBuffer=new o.LineJoinMemoryBuffer,this.markerVertexBuffer=new o.SymbolMemoryBuffer,this.markerIndexBuffer=new a.TriangleElementMemoryBuffer,this.textVertexBuffer=new o.SymbolMemoryBuffer,this.textIndexBuffer=new a.TriangleElementMemoryBuffer;var i=new n(function(e){r.status=6});return this._parse(e,t).then(function(e){r.placementEngine=null;for(var t=new Uint32Array([2,r.polygonVertexBuffer.sizeInBytes,3,r.polygonOutlineVertexBuffer.sizeInBytes,6,r.polygonIndexBuffer.sizeInBytes,7,r.polygonOutlineIndexBuffer.sizeInBytes,0,r.lineVertexBuffer.sizeInBytes,8,r.lineIndexBuffer.sizeInBytes,1,r.lineJoinVertexBuffer.sizeInBytes,4,r.markerVertexBuffer.sizeInBytes,9,r.markerIndexBuffer.sizeInBytes,5,r.textVertexBuffer.sizeInBytes,10,r.textIndexBuffer.sizeInBytes]),n=[],o=e.length,a=0;o>a;a++){var s=e[a];s instanceof l?(n.push(s.layerIndex),n.push(1),n.push(s.polygonIndexStart),n.push(s.polygonIndexCount),n.push(s.polygonOutlineIndexStart),n.push(s.polygonOutlineIndexCount)):s instanceof c?(n.push(s.layerIndex),n.push(2),n.push(s.triangleIndexStart),n.push(s.triangleIndexCount),n.push(s.connectorStart),n.push(s.connectorCount)):s instanceof f?(n.push(s.layerIndex),n.push(3),n.push(0===s.markerIndexCount?0:s.markerIndexStart),n.push(s.markerIndexCount),n.push(0===s.textIndexCount?0:s.textIndexStart),n.push(s.textIndexCount),n.push(s.sdfMarker?1:0)):s instanceof u&&(n.push(s.layerIndex),n.push(0))}e=new Uint32Array(n);var n=r.polygonVertexBuffer.toBuffer(),o=r.polygonOutlineVertexBuffer.toBuffer(),a=r.polygonIndexBuffer.toBuffer(),s=r.polygonOutlineIndexBuffer.toBuffer(),h=r.lineVertexBuffer.toBuffer(),p=r.lineIndexBuffer.toBuffer(),y=r.lineJoinVertexBuffer.toBuffer(),d=r.markerVertexBuffer.toBuffer(),m=r.markerIndexBuffer.toBuffer(),g=r.textVertexBuffer.toBuffer(),x=r.textIndexBuffer.toBuffer();r.placementEngine=null,r.polygonVertexBuffer=null,r.polygonIndexBuffer=null,r.polygonOutlineVertexBuffer=null,r.polygonOutlineIndexBuffer=null,r.lineVertexBuffer=null,r.lineIndexBuffer=null,r.lineJoinVertexBuffer=null,i.resolve({data:{bufferDataInfo:t.buffer,bucketDataInfo:e.buffer,bufferData:[n,o,a,s,h,p,y,d,m,g,x]},buffers:[n,a,o,s,h,p,y,d,m,g,x,t.buffer,e.buffer]})}),i.promise},e.prototype.addBucket=function(e){this._symbolBuckets.push(e)},e.prototype.updateSymbols=function(e){var t=this,n=this._symbolBuckets;if(!n)return r.resolve({data:null});this.rotation=e;var s=new h.PlacementEngine(360*(e/256)*p.C_DEG_TO_RAD),u=new o.SymbolMemoryBuffer,l=new a.TriangleElementMemoryBuffer,c=new o.SymbolMemoryBuffer,f=new a.TriangleElementMemoryBuffer,y=[],d=n.length,m=0;return i(function(){if(6===t.status)return!0;if(d>m){var e=n[m++].copy(u,l,c,f,s);e&&(y.push(e),e.updateSymbols())}return m>=d},5).then(function(){if(6===t.status||0===u.sizeInBytes&&0===l.sizeInBytes&&0===c.sizeInBytes&&0===f.sizeInBytes)return{data:null};var e=new Uint32Array([4,u.sizeInBytes,9,l.sizeInBytes,5,c.sizeInBytes,10,f.sizeInBytes]),n=[];d=y.length;for(var r=0;d>r;r++){var i=y[r];n.push(i.layerIndex),n.push(3),n.push(0===i.markerIndexCount?0:i.markerIndexStart),n.push(i.markerIndexCount),n.push(0===i.textIndexCount?0:i.textIndexStart),n.push(i.textIndexCount),n.push(i.sdfMarker?1:0)}var n=new Uint32Array(n),r=u.toBuffer(),i=l.toBuffer(),o=c.toBuffer(),a=f.toBuffer();return{data:{bufferDataInfo:e.buffer,bucketDataInfo:n.buffer,bufferData:[r,i,o,a]},buffers:[r,i,o,a,e.buffer,n.buffer]}}).otherwise(function(e){return r.resolve({data:null})})},e.prototype.setObsolete=function(){this.status=6},e.prototype.getLayers=function(){return this._workerTileHandler.getLayers()},e.prototype.getWorkerTileHandler=function(){return this._workerTileHandler},e.prototype._parse=function(e,t){return e&&0!==e.byteLength?new s(e,this,t).parse():r.resolve([])},e}()})},"esri/layers/vectorTiles/core/executeAsync":function(){define(["require","exports","dojo/Deferred","./now"],function(e,t,n,r){return function(e,t){var i;(!t||0>=t)&&(t=500);var o=new n(function(){i&&clearTimeout(i)}),a=function(){if(!o.isFulfilled()){for(var n=r(),s=!1;!s&&r()-n<t;)s=!0===e();s?o.resolve():i=setTimeout(a,0)}};return i=setTimeout(a,0),o.promise}})},"esri/layers/vectorTiles/core/now":function(){define(["require","exports","./global"],function(e,t,n){return function(){var e=n.performance||{};if(e.now)return function(){return e.now()};if(e.webkitNow)return function(){return e.webkitNow()};if(e.mozNow)return function(){return e.mozNow()};if(e.msNow)return function(){return e.msNow()};if(e.oNow)return function(){return e.oNow()};var t;return t=e.timing&&e.timing.navigationStart?e.timing.navigationStart:Date.now(),function(){return Date.now()-t}}()})},"esri/layers/vectorTiles/core/global":function(){define(["require","exports"],function(e,t){return"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{}})},"esri/layers/vectorTiles/views/vectorTiles/VertexMemoryBuffer":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./MemoryBuffer ./GeometryUtils".split(" "),function(e,t,n,r,i,o){e=function(e){function t(){e.call(this,12)}return n(t,e),t.prototype.add=function(e,t,n,r,o,a,s){var u=this.array,l=this.index;return e=i.i1616to32(2*e|o,2*t|a),u.push(e),e=i.i1616to32(Math.round(31*n),Math.round(31*r)),u.push(e),e=i.i1616to32(s,0),u.push(e),l},t}(i),t.LineMemoryBuffer=e,e=function(e){function t(){e.call(this,4)}return n(t,e),t.prototype.add=function(e,t){var n=this.index;return this.array.push(i.i1616to32(e,t)),n},t}(i),t.LineJoinMemoryBuffer=e,e=function(e){function t(){e.call(this,4)}return n(t,e),t.prototype.add=function(e,t){this.array.push(i.i1616to32(e,t))},t}(i),t.PolygonMemoryBuffer=e,e=function(e){function t(){e.call(this,8)}return n(t,e),t.prototype.add=function(e,t,n,r,o,a){var s=this.array,u=this.index;return e=i.i1616to32(e,t),s.push(e),e=i.i8888to32(Math.round(15*n),Math.round(15*r),o,a),s.push(e),u},t}(i),t.PolygonOutlineMemoryBuffer=e,e=function(e){function t(){e.call(this,16)}return n(t,e),t.prototype.add=function(e,t,n,r,a,s,u,l,c,f){var h=this.array,p=this.index;return e=i.i1616to32(e,t),h.push(e),e=i.i1616to32(Math.round(32*n),Math.round(32*r)),h.push(e),e=i.i8888to32(a/4,s/4,0,0),h.push(e),e=i.i8888to32(Math.ceil(10*f),o.radToByte(u),10*l,10*Math.min(c,25)),h.push(e),p},t}(i),t.SymbolMemoryBuffer=e})},"esri/layers/vectorTiles/views/vectorTiles/MemoryBuffer":function(){define(["require","exports"],function(e,t){return function(){function e(e){this._array=[],0>=e&&console.error("strideInBytes must be positive!"),this._stride=e}return Object.defineProperty(e.prototype,"array",{get:function(){return this._array},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return 4*this._array.length/this._stride},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemSize",{get:function(){return this._stride},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sizeInBytes",{get:function(){return 4*this._array.length},enumerable:!0,configurable:!0}),e.prototype.toBuffer=function(){return new Uint32Array(this._array).buffer},e.i1616to32=function(e,t){return 65535&e|t<<16},e.i8888to32=function(e,t,n,r){return 255&e|(255&t)<<8|(255&n)<<16|r<<24},e.i8816to32=function(e,t,n){return 255&e|(255&t)<<8|n<<16},e}()})},"esri/layers/vectorTiles/views/vectorTiles/GeometryUtils":function(){define(["require","exports"],function(e,t){function n(e,t){return e%=t,e>=0?e:e+t}t.C_INFINITY=Number.POSITIVE_INFINITY,t.C_PI=Math.PI,t.C_2PI=2*t.C_PI,t.C_PI_BY_2=t.C_PI/2,t.C_RAD_TO_256=128/t.C_PI,t.C_256_TO_RAD=t.C_PI/128,t.C_DEG_TO_256=256/360,t.C_DEG_TO_RAD=t.C_PI/180,t.C_SQRT2=1.414213562,t.C_SQRT2_INV=1/t.C_SQRT2;var r=1/Math.LN2;t.positiveMod=n,t.radToByte=function(e){return n(e*t.C_RAD_TO_256,256)},t.degToByte=function(e){return n(e*t.C_DEG_TO_256,256)},t.log2=function(e){return Math.log(e)*r},t.sqr=function(e){return e*e},t.clamp=function(e,t,n){return Math.min(Math.max(e,t),n)},t.interpolate=function(e,t,n){return e*(1-n)+t*n},t.between=function(e,t,n){return e>=t&&n>=e||e>=n&&t>=e}})},"esri/layers/vectorTiles/views/vectorTiles/IndexMemoryBuffer":function(){define(["require","exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper","./MemoryBuffer"],function(e,t,n,r,i){e=function(e){function t(){e.call(this,12)}return n(t,e),t.prototype.add=function(e,t,n){var r=this.array;r.push(e),r.push(t),r.push(n)},t}(i),t.TriangleElementMemoryBuffer=e,i=function(e){function t(){e.call(this,4)}return n(t,e),t.prototype.add=function(e){this.array.push(e)},t}(i),t.PointElementMemoryBuffer=i})},"esri/layers/vectorTiles/views/vectorTiles/TileParser":function(){define("require exports dojo/promise/all ../../core/promiseUtils ../../core/executeAsync ../../core/pbf ./SourceLayerData ./Feature ./BackgroundBucket ./FillBucket ./LineBucket ./SymbolBucket ./TileClipper".split(" "),function(e,t,n,r,i,o,a,s,u,l,c,f,h){return function(){function e(e,t,n){this._pbfTile=new o(new Uint8Array(e),new DataView(e)),this._tile=t,this._connection=n,this._layers=t.getLayers(),n=t.tileKey.split("/").map(parseFloat);var r=n[0];e=n[1],n=n[2],this._level=r,t.refKey&&(t=t.refKey.split("/").map(parseFloat)[0],t=r-t,t>0&&(r=(1<<t)-1,this._tileClipper=new h.TileClipper(t,e&r,n&r))),this._tileClipper||(this._tileClipper=new h.SimpleBuilder)}return e.prototype.parse=function(){for(var e,t=this,o=this._parseTileData(this._pbfTile),a=this._layers,u=a.length,l=this._level,c=[],f={},h=new Set,u=u-1;u>=0;u--)if(e=a[u],!(e.minzoom&&l<e.minzoom||e.maxzoom&&l>=e.maxzoom||e.layout&&"none"===e.layout.visibility))if(0===e.type)e=this._createBucket(e),c.push(e);else{var p=e.sourceLayer,y=o[p];y&&(h.add(p),e=this._createBucket(e))&&(e.layerIndex=u,e.layerExtent=y.extent,(y=f[p])||(y=f[p]=[]),y.push(e))}var d=10*(this._level+1),m=[],g=[],x=[],v=[],_=this._tileClipper,b=new Set,w={},T=[];h.forEach(function(e){return T.push(e)});var k=0,I=0,B=T.length;return i(function(){if(6===t._tile.status)return!0;switch(k){case 0:if(B>I)for(var e=T[I++],n=o[e],r=f[e],e=n.getData();e.next(2);){var i=new s(e.getMessage(),n),a=i.values;if(!(a&&(a=a._minzoom)&&a>=d))for(var u=0,l=r;u<l.length;u++)a=l[u],a.pushFeature(i)}else{n=t._tile;for(e in f)for(r=f[e],i=0;i<r.length;i++)a=r[i],a.hasFeatures()&&(3===a.layer.type?(m.push(a),n.addBucket(a)):a.layer.refLayerId?x.push(a):(g.push(a),v[a.layer.id]=a));k=1,I=0,B=m.length}break;case 1:B>I?m[I++].getResources(_,b,w):k=2}return 2===k},50).then(function(){if(6===t._tile.status)return[];var e,o=[],a=t._tile.getWorkerTileHandler();0<b.size&&(e=a.fetchSprites(b,t._connection),o.push(e));for(var s in w)e=w[s],0<e.size&&(e=a.fetchGlyphs(t._tile.tileKey,s,e,t._connection),o.push(e));return n(o).then(function(e){if(6===t._tile.status)return[];var n=0,r=0,o=g.length;return i(function(){if(6===t._tile.status)return!0;switch(n){case 0:if(o>r){var e=g[r++];e.processFeatures(_,t._tile),c.push(e)}else n=1,r=0,o=x.length;break;case 1:for(var i=0;i<x.length;i++){var e=x[i],a=v[e.layer.refLayerId];a&&(a.assignBufferInfo(e),c.push(e))}n=2,r=0,o=m.length;break;case 2:o>r?(e=m[r++],e.processFeatures(_,t._tile),c.push(e)):n=3}return 3===n},50).then(function(){return c.sort(function(e,t){return e.layerIndex-t.layerIndex}),c})}).otherwise(function(e){return r.reject(Error(e))})}).otherwise(function(e){return r.reject(Error(e))})},e.prototype._parseTileData=function(e){for(var t={};e.next();)switch(e.tag()){case 3:var n=new a(e.getMessage());t[n.name]=n;break;default:e.skip()}return t},e.prototype._createBucket=function(e){switch(e.type){case 0:return this._createBackgroundBucket(e);case 1:return this._createFillBucket(e);case 2:return this._createLineBucket(e);case 3:return this._createSymbolBucket(e)}},e.prototype._createBackgroundBucket=function(e){return new u(e,this._level)},e.prototype._createFillBucket=function(e){var t=this._tile;return new l(e,this._level,t.polygonVertexBuffer,t.polygonIndexBuffer,t.polygonOutlineVertexBuffer,t.polygonOutlineIndexBuffer)},e.prototype._createLineBucket=function(e){var t=this._tile;return new c(e,this._level,t.lineVertexBuffer,t.lineIndexBuffer,t.lineJoinVertexBuffer)},e.prototype._createSymbolBucket=function(e){var t=this._tile;return new f(e,this._level,t.markerVertexBuffer,t.markerIndexBuffer,t.textVertexBuffer,t.textIndexBuffer,t.placementEngine,t.getWorkerTileHandler())},e}()})},"dojo/promise/all":function(){define(["../_base/array","../Deferred","../when"],function(e,t,n){var r=e.some;return function(e){var i,o;e instanceof Array?o=e:e&&"object"==typeof e&&(i=e);var a,s=[];if(i){o=[];for(var u in i)Object.hasOwnProperty.call(i,u)&&(s.push(u),o.push(i[u]));a={}}else o&&(a=[]);if(!o||!o.length)return(new t).resolve(a);var l=new t;l.promise.always(function(){a=s=null});var c=o.length;return r(o,function(e,t){return i||s.push(t),n(e,function(e){l.isFulfilled()||(a[s[t]]=e,0===--c&&l.resolve(a))},l.reject),l.isFulfilled()}),l.promise}})},"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(e,t){return function(n,r,i,o){var a=n&&"function"==typeof n.then,s=a&&n instanceof t;return a?(s||(a=new e(n.cancel),n.then(a.resolve,a.reject,a.progress),n=a.promise),r||i||o?n.then(r,i,o):n):1<arguments.length?r?r(n):n:(new e).resolve(n)}})},"esri/layers/vectorTiles/core/pbf":function(){define(["require","exports"],function(e,t){return function(){function e(e,t,n,r){this._tag=0,this._dataType=99,this._data=e,this._dataView=t,this._pos=n||0,this._end=r||e.byteLength}return e.prototype.clone=function(){return new e(this._data,this._dataView,this._pos,this._end)},e.prototype.next=function(e){for(;;){if(this._pos===this._end)return!1;var t=this._decodeVarint();if(this._tag=t>>3,this._dataType=7&t,!e||e===this._tag)break;this.skip()}return!0},e.prototype.empty=function(){return this._pos>=this._end},e.prototype.tag=function(){return this._tag},e.prototype.getInt32=function(){return this._decodeVarint()},e.prototype.getInt64=function(){return this._decodeVarint()},e.prototype.getUInt32=function(){return this._decodeVarint()},e.prototype.getUInt64=function(){return this._decodeVarint()},e.prototype.getSInt32=function(){return this._decodeSVarint()},e.prototype.getSInt64=function(){return this._decodeSVarint()},e.prototype.getBool=function(){var e=0!==this._data[this._pos];return this._skip(1),e},e.prototype.getEnum=function(){return this._decodeVarint()},e.prototype.getFixed64=function(){var e=this._dataView,t=this._pos,e=e.getUint32(t,!0)+4294967296*e.getUint32(t+4,!0);return this._skip(8),e},e.prototype.getSFixed64=function(){var e=this._dataView,t=this._pos,e=e.getUint32(t,!0)+4294967296*e.getInt32(t+4,!0);return this._skip(8),e},e.prototype.getDouble=function(){var e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e},e.prototype.getFixed32=function(){var e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e},e.prototype.getSFixed32=function(){var e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e},e.prototype.getFloat=function(){var e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e},e.prototype.getString=function(){var e=this._getLength(),t=this._pos,t=this._toString(this._data,t,t+e);return this._skip(e),t},e.prototype.getBytes=function(){var e=this._getLength(),t=this._pos,t=this._toBytes(this._data,t,t+e);return this._skip(e),t},e.prototype.getMessage=function(){var t=this._getLength(),n=this._pos,n=new e(this._data,this._dataView,n,n+t);return this._skip(t),n},e.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw Error("Invalid data type!")}},e.prototype._skip=function(e){if(this._pos+e>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=e},e.prototype._decodeVarint=function(){var e,t=this._data,n=this._pos,r=0;if(10<=this._end-n){if(e=t[n++],r|=127&e,0!==(128&e)&&(e=t[n++],r|=(127&e)<<7,0!==(128&e)&&(e=t[n++],r|=(127&e)<<14,0!==(128&e)&&(e=t[n++],r|=(127&e)<<21,0!==(128&e)&&(e=t[n++],r+=268435456*(127&e),0!==(128&e)&&(e=t[n++],r+=34359738368*(127&e),0!==(128&e)&&(e=t[n++],r+=4398046511104*(127&e),0!==(128&e)&&(e=t[n++],r+=562949953421312*(127&e),0!==(128&e)&&(e=t[n++],r+=72057594037927940*(127&e),0!==(128&e)&&(e=t[n++],r+=0x7ffffffffffffc00*(127&e),0!==(128&e)))))))))))throw Error("Varint too long!")}else{for(var i=1;n!==this._end&&(e=t[n],0!==(128&e));)++n,r+=(127&e)*i,i*=128;if(n===this._end)throw Error("Varint overrun!");++n,r+=e*i}return this._pos=n,r},e.prototype._decodeSVarint=function(){var e=this._decodeVarint();return e%2?-(e+1)/2:e/2},e.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()},e.prototype._toString=function(e,t,n){var r="",i="";for(n=Math.min(this._end,n);n>t;++t){var o=e[t];128&o?i+="%"+o.toString(16):(r+=decodeURIComponent(i)+String.fromCharCode(o),i="")}return i.length&&(r+=decodeURIComponent(i)),r},e.prototype._toBytes=function(e,t,n){return n=Math.min(this._end,n),new Uint8Array(e.buffer,t,n-t)},e}()})},"esri/layers/vectorTiles/views/vectorTiles/SourceLayerData":function(){define(["require","exports"],function(e,t){return function(){function e(t){for(this.extent=4096,this.keys=[],this.values=[],this._pbfLayer=t.clone();t.next();)switch(t.tag()){case 1:this.name=t.getString();break;case 3:this.keys.push(t.getString());break;case 4:this.values.push(e._parseValue(t.getMessage()));break;case 5:this.extent=t.getUInt32();break;default:t.skip()}}return e.prototype.getData=function(){return this._pbfLayer},e._parseValue=function(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getInt64();case 5:return e.getUInt64();case 6:return e.getSInt64();case 7:return e.getBool();default:e.skip()}return null},e}()})},"esri/layers/vectorTiles/views/vectorTiles/Feature":function(){define(["require","exports","./Geometry"],function(e,t,n){return function(){function e(e,t){this.values={};for(var n=t.keys,r=t.values;e.next();)switch(e.tag()){case 1:this.id=e.getUInt64();break;case 2:for(var i=e.getMessage(),o=this.values;!i.empty();){var a=i.getUInt32(),s=i.getUInt32();o[n[a]]=r[s]}break;case 3:this.type=e.getUInt32();break;case 4:this._pbfGeometry=e.getMessage();break;default:e.skip()}}return e.prototype.getGeometry=function(e){if(void 0!==this._geometry)return this._geometry;var t,r,i=this._pbfGeometry;e?e.reset(this.type):t=[];for(var o=1,a=0,s=0,u=0;!i.empty();)switch(0===a&&(a=i.getUInt32(),o=7&a,a>>=3),a--,o){case 1:s+=i.getSInt32(),u+=i.getSInt32(),e?e.moveTo(s,u):(r&&t.push(r),r=[],r.push(new n.Point(s,u)));break;case 2:s+=i.getSInt32(),u+=i.getSInt32(),e?e.lineTo(s,u):r.push(new n.Point(s,u));break;case 7:e?e.close():r&&!r[0].equals(s,u)&&r.push(r[0].clone());break;default:throw Error("Invalid path operation")}return e?e=e.result():(r&&t.push(r),e=t),this._geometry=e},e}()})},"esri/layers/vectorTiles/views/vectorTiles/Geometry":function(){define(["require","exports"],function(e,t){var n=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.equals=function(e,t){return e===this.x&&t===this.y},e.prototype.isEqual=function(e){return e.x===this.x&&e.y===this.y},e.prototype.setCoords=function(e,t){this.x=e,this.y=t},e.prototype.normalize=function(){var e=this.x,t=this.y,e=Math.sqrt(e*e+t*t);this.x/=e,this.y/=e},e.prototype.rightPerpendicular=function(){var e=this.x;this.x=this.y,this.y=-e},e.prototype.move=function(e,t){this.x+=e,this.y+=t},e.prototype.assign=function(e){this.x=e.x,this.y=e.y},e.prototype.assignAdd=function(e,t){this.x=e.x+t.x,this.y=e.y+t.y},e.prototype.assignSub=function(e,t){this.x=e.x-t.x,this.y=e.y-t.y},e.prototype.rotate=function(e,t){var n=this.x,r=this.y;this.x=n*e-r*t,this.y=n*t+r*e},e.prototype.scale=function(e){this.x*=e,this.y*=e},e.prototype.length=function(){var e=this.x,t=this.y;return Math.sqrt(e*e+t*t)},e.distance=function(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)},e.add=function(t,n){return new e(t.x+n.x,t.y+n.y)},e.sub=function(t,n){return new e(t.x-n.x,t.y-n.y)},e}();t.Point=n})},"esri/layers/vectorTiles/views/vectorTiles/BackgroundBucket":function(){define(["require","exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper","./Bucket"],function(e,t,n,r,i){return function(e){function t(t,n){e.call(this,t,n)}return n(t,e),t}(i)})},"esri/layers/vectorTiles/views/vectorTiles/Bucket":function(){define(["require","exports"],function(e,t){return function(){function e(e,t){this.layerExtent=4096,this._features=[],this.layer=e,this.zoom=t,this._filter=e.getFeatureFilter()}return e.prototype.pushFeature=function(e){this._filter.filter(e)&&this._features.push(e)},e.prototype.hasFeatures=function(){return 0<this._features.length},e.prototype.processFeatures=function(e,t){},e.prototype.assignBufferInfo=function(e){},e}()})},"esri/layers/vectorTiles/views/vectorTiles/FillBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ./Geometry ../../core/libs/earcut/earcut".split(" "),function(e,t,n,r,i,o,a){return function(e){function t(t,n,r,i,o,a){e.call(this,t,n),this.polygonVertexBuffer=r,this.polygonIndexBuffer=i,this.polygonOutlineVertexBuffer=o,this.polygonOutlineIndexBuffer=a}return n(t,e),Object.defineProperty(t.prototype,"polygonIndexStart",{get:function(){return this._triangleElementsStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"polygonIndexCount",{get:function(){return this._triangleElementsNum},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"polygonOutlineIndexStart",{get:function(){return this._outlineElementsStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"polygonOutlineIndexCount",{get:function(){return this._outlineElementsNum},enumerable:!0,configurable:!0}),t.prototype.assignBufferInfo=function(e){e._triangleElementsStart=this._triangleElementsStart,e._triangleElementsNum=this._triangleElementsNum,e.layer.hasPaintProperty("fill-outline-color")?(e._outlineElementsStart=this._outlineElementsStart,e._outlineElementsNum=this._outlineElementsNum):(e._outlineElementsStart=0,e._outlineElementsNum=0)},t.prototype.processFeatures=function(e,t){this._triangleElementsStart=this.polygonIndexBuffer.index,this._triangleElementsNum=0,this._outlineElementsStart=this.polygonOutlineIndexBuffer.index,this._outlineElementsNum=0,e&&e.setExtent(this.layerExtent);for(var n=this.layer.getPaintValue("fill-pattern",this.zoom),n=this.layer.getPaintValue("fill-antialias",this.zoom)&&void 0===n,r=0,i=this._features;r<i.length;r++){var o=i[r].getGeometry(e);this._processFeature(o,n)}},t.prototype._processFeature=function(e,n){if(e){var r=e.length;if(n)for(var i=0;r>i;i++)this._processOutline(e[i]);for(var o,i=0;r>i;i++){var a=t._area(e[i]);a>0?(void 0!==o&&this._processFill(e,o),o=[i]):0>a&&void 0!==o&&o.push(i)}void 0!==o&&this._processFill(e,o)}},t.prototype._processOutline=function(e){var t,n,r,i=this.polygonOutlineVertexBuffer,a=this.polygonOutlineIndexBuffer,s=a.index,u=new o.Point(0,0),l=new o.Point(0,0),c=new o.Point(0,0),f=-1,h=-1,p=t=-1,y=-1,d=e.length;if(!(2>d)){n=e[0];for(var m=e[d-1];d&&m.isEqual(n);)--d,m=e[d-1];if(!(2>d-0)){for(m=0;d>m;++m){0===m?(t=e[d-1],n=e[0],r=e[1],u.assignSub(n,t),u.normalize(),u.rightPerpendicular()):(n=r,r=m!==d-1?e[m+1]:e[0],u.assign(l)),l.assignSub(r,n),l.normalize(),l.rightPerpendicular(),t=u.x*l.y-u.y*l.x,c.assignAdd(u,l),c.normalize();var g=-c.x*-u.x+-c.y*-u.y,g=Math.abs(0!==g?1/g:1);g>8&&(g=8),t>=0?(t=i.add(n.x,n.y,u.x,u.y,0,1),-1===p&&(p=t),f>=0&&h>=0&&t>=0&&a.add(f,h,t),h=i.add(n.x,n.y,g*-c.x,g*-c.y,0,-1),-1===y&&(y=h),f>=0&&h>=0&&t>=0&&a.add(f,h,t),f=h,h=t,t=i.add(n.x,n.y,c.x,c.y,0,1),f>=0&&h>=0&&t>=0&&a.add(f,h,t),h=i.add(n.x,n.y,l.x,l.y,0,1)):(t=i.add(n.x,n.y,g*c.x,g*c.y,0,1),-1===p&&(p=t),f>=0&&h>=0&&t>=0&&a.add(f,h,t),h=i.add(n.x,n.y,-u.x,-u.y,0,-1),-1===y&&(y=h),f>=0&&h>=0&&t>=0&&a.add(f,h,t),f=h,h=t,t=i.add(n.x,n.y,-c.x,-c.y,0,-1),f>=0&&h>=0&&t>=0&&a.add(f,h,t),f=i.add(n.x,n.y,-l.x,-l.y,0,-1)),f>=0&&h>=0&&t>=0&&a.add(f,h,t)}f>=0&&h>=0&&p>=0&&a.add(f,h,p),f>=0&&p>=0&&y>=0&&a.add(f,y,p),this._outlineElementsNum+=3*(a.index-s)}}},t.prototype._processFill=function(e,t){var n;1<t.length&&(n=[]);for(var r=0,i=0;i<t.length;i++){var o=t[i];0!==r&&n.push(r),r+=e[o].length}for(var r=2*r,i=new Float64Array(r),s=0,u=0;u<t.length;u++)for(var o=t[u],o=e[o],l=o.length,c=0;l>c;++c)i[s++]=o[c].x,i[s++]=o[c].y;if(n=a(i,n,2),s=n.length,s>0){for(u=this.polygonVertexBuffer.index,o=0;r>o;)this.polygonVertexBuffer.add(i[o++],i[o++]);for(r=0;s>r;)this.polygonIndexBuffer.add(u+n[r++],u+n[r++],u+n[r++]);this._triangleElementsNum+=s}},t._area=function(e){for(var t=0,n=e.length-1,r=0;n>r;r++)t+=e[r].x*e[r+1].y-e[r+1].x*e[r].y;return t},t}(i)})},"esri/layers/vectorTiles/core/libs/earcut/earcut":function(){define([],function(){function e(e,i,s){s=s||2,v=e.length/s+(i?2*i.length:0),_=!1;var l=i&&i.length,c=l?i[0]*s:e.length,f=t(e,0,c,s,!0),h=[];if(!f)return h;var p,d,m,g;if(l)e:{var x,b,w,T=s,l=[];for(g=0,x=i.length;x>g;g++)b=i[g]*T,w=x-1>g?i[g+1]*T:e.length,b=t(e,b,w,T,!1),b===b.next&&(b.steiner=!0),l.push(u(b));for(l.sort(o),g=0;g<l.length;g++){if(!f){f=null;break e}i=l[g],T=f,(T=a(i,T))&&(i=y(T,i),n(i,i.next)),f=n(f,f.next)}}if(_)return h;if(e.length>80*s){for(p=m=e[0],d=l=e[1],T=s;c>T;T+=s)g=e[T],i=e[T+1],p>g&&(p=g),d>i&&(d=i),g>m&&(m=g),i>l&&(l=i);m=Math.max(m-p,l-d)}return r(f,h,s,p,d,m),h}function t(e,t,n,r,i){var o;if(i===0<x(e,t,n,r))for(i=t;n>i;i+=r)o=d(i,e[i],e[i+1],o);else for(i=n-r;i>=t;i-=r)o=d(i,e[i],e[i+1],o);return o&&f(o,o.next)&&(m(o),o=o.next),o}function n(e,t){if(!e)return e;t||(t=e);var n,r=e,i=0,o=v*v/2;
do{if(n=!1,r.steiner||!f(r,r.next)&&0!==c(r.prev,r,r.next))r=r.next;else{if(m(r),r=t=r.prev,r===r.next)return null;n=!0}if(i++>o)return _=!0,null}while(n||r!==t);return t}function r(e,t,o,a,u,d,g){if(e){if(!g&&d){var x=e,v=x;do null===v.z&&(v.z=s(v.x,v.y,a,u,d)),v.prevZ=v.prev,v=v.nextZ=v.next;while(v!==x);v.prevZ.nextZ=null,v.prevZ=null;var b,w,T,k,I,B,x=v,S=1;do{for(v=x,T=x=null,k=0;v;){for(k++,w=v,b=I=0;S>b&&(I++,w=w.nextZ,!!w);b++);for(B=S;I>0||B>0&&w;)0===I?(b=w,w=w.nextZ,B--):0!==B&&w?v.z<=w.z?(b=v,v=v.nextZ,I--):(b=w,w=w.nextZ,B--):(b=v,v=v.nextZ,I--),T?T.nextZ=b:x=b,b.prevZ=T,T=b;v=w}T.nextZ=null,S*=2}while(k>1)}for(x=e;e.prev!==e.next;){if(v=e.prev,w=e.next,d)e:{T=e,B=a;var j=u,E=d;if(k=T.prev,I=T,S=T.next,0<=c(k,I,S))T=!1;else{var L=k.x>I.x?k.x>S.x?k.x:S.x:I.x>S.x?I.x:S.x,P=k.y>I.y?k.y>S.y?k.y:S.y:I.y>S.y?I.y:S.y;for(b=s(k.x<I.x?k.x<S.x?k.x:S.x:I.x<S.x?I.x:S.x,k.y<I.y?k.y<S.y?k.y:S.y:I.y<S.y?I.y:S.y,B,j,E),B=s(L,P,B,j,E),j=T.nextZ;j&&j.z<=B;){if(j!==T.prev&&j!==T.next&&l(k.x,k.y,I.x,I.y,S.x,S.y,j.x,j.y)&&0<=c(j.prev,j,j.next)){T=!1;break e}j=j.nextZ}for(j=T.prevZ;j&&j.z>=b;){if(j!==T.prev&&j!==T.next&&l(k.x,k.y,I.x,I.y,S.x,S.y,j.x,j.y)&&0<=c(j.prev,j,j.next)){T=!1;break e}j=j.prevZ}T=!0}}else T=i(e);if(T)t.push(v.i/o),t.push(e.i/o),t.push(w.i/o),m(e),x=e=w.next;else{if(_)break;if(e=w,e===x){if(g){if(1===g){g=t,x=o,v=e;do w=v.prev,T=v.next.next,!f(w,T)&&h(w,v,v.next,T)&&p(w,T)&&p(T,w)&&(g.push(w.i/x),g.push(v.i/x),g.push(T.i/x),m(v),m(v.next),v=e=T),v=v.next;while(v!==e);e=v,r(e,t,o,a,u,d,2)}else if(2===g)e:{g=e;do{for(x=g.next.next;x!==g.prev;){if(v=g.i!==x.i){if(v=g,w=x,T=void 0,(T=v.next.i!==w.i)&&(T=void 0,T=v.prev.i!==w.i)){T=T=void 0;t:{T=v;do{if(T.i!==v.i&&T.next.i!==v.i&&T.i!==w.i&&T.next.i!==w.i&&h(T,T.next,v,w)){T=!0;break t}T=T.next}while(T!==v);T=!1}if((T=!T)&&(T=void 0,(T=p(v,w))&&(T=void 0,T=p(w,v)))){T=v,k=!1,I=(v.x+w.x)/2,w=(v.y+w.y)/2;do T.y>w!=T.next.y>w&&I<(T.next.x-T.x)*(w-T.y)/(T.next.y-T.y)+T.x&&(k=!k),T=T.next;while(T!==v);T=k}}v=T}if(v){e=y(g,x),g=n(g,g.next),e=n(e,e.next),r(g,t,o,a,u,d),r(e,t,o,a,u,d);break e}x=x.next}g=g.next}while(g!==e)}}else r(n(e),t,o,a,u,d,1);break}}}}}function i(e){var t=e.prev,n=e.next;if(0<=c(t,e,n))return!1;for(var r=e.next.next,i=0;r!==e.prev;){if(l(t.x,t.y,e.x,e.y,n.x,n.y,r.x,r.y)&&0<=c(r.prev,r,r.next))return!1;if(r=r.next,i++>v)return _=!0,!1}return!0}function o(e,t){return e.x-t.x}function a(e,t){var n,r=t,i=e.x,o=e.y,a=-(1/0);do{if(!r)return null;if(o<=r.y&&o>=r.next.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(i>=s&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n.prev;for(var u,s=n,c=n.x,f=n.y,h=1/0,r=n.next;r!==s;)i>=r.x&&r.x>=c&&l(f>o?i:a,o,c,f,f>o?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),(h>u||u===h&&r.x>n.x)&&p(r,e)&&(n=r,h=u)),r=r.next;return n}function s(e,t,n,r,i){return e=32767*(e-n)/i,t=32767*(t-r)/i,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),1431655765&(e|e<<1)|(1431655765&(t|t<<1))<<1}function u(e){var t=e,n=e;do t.x<n.x&&(n=t),t=t.next;while(t!==e);return n}function l(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function c(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function f(e,t){return e.x===t.x&&e.y===t.y}function h(e,t,n,r){return f(e,t)&&f(n,r)||f(e,r)&&f(n,t)?!0:0<c(e,t,n)!=0<c(e,t,r)&&0<c(n,r,e)!=0<c(n,r,t)}function p(e,t){return 0>c(e.prev,e,e.next)?0<=c(e,t,e.next)&&0<=c(e,e.prev,t):0>c(e,t,e.prev)||0>c(e,e.next,t)}function y(e,t){var n=new g(e.i,e.x,e.y),r=new g(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function d(e,t,n,r){return e=new g(e,t,n),r?(e.next=r.next,e.prev=r,r.next.prev=e,r.next=e):(e.prev=e,e.next=e),e}function m(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function g(e,t,n){this.i=e,this.x=t,this.y=n,this.nextZ=this.prevZ=this.z=this.next=this.prev=null,this.steiner=!1}function x(e,t,n,r){for(var i=0,o=n-r;n>t;t+=r)i+=(e[o]-e[t])*(e[t+1]+e[o+1]),o=t;return i}var v,_;return e.deviation=function(e,t,n,r){var i=t&&t.length,o=Math.abs(x(e,0,i?t[0]*n:e.length,n));if(i)for(var i=0,a=t.length;a>i;i++)o-=Math.abs(x(e,t[i]*n,a-1>i?t[i+1]*n:e.length,n));for(i=t=0;i<r.length;i+=3){var a=r[i]*n,s=r[i+1]*n,u=r[i+2]*n;t+=Math.abs((e[a]-e[u])*(e[s+1]-e[a+1])-(e[a]-e[s])*(e[u+1]-e[a+1]))}return 0===o&&0===t?0:Math.abs((t-o)/o)},e.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;t>a;a++)n.vertices.push(e[i][o][a]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n},e})},"esri/layers/vectorTiles/views/vectorTiles/LineBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ./style/StyleLayer".split(" "),function(e,t,n,r,i,o){return function(e){function t(t,n,r,i,o){e.call(this,t,n),this.lineVertexBuffer=r,this.lineIndexBuffer=i,this.joinsVertexBuffer=o}return n(t,e),Object.defineProperty(t.prototype,"triangleIndexStart",{get:function(){return this.triangleElementsStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"triangleIndexCount",{get:function(){return this.triangleElementsCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"connectorStart",{get:function(){return this.pointConnectorStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"connectorCount",{get:function(){return this.pointConnectorCount},enumerable:!0,configurable:!0}),t.prototype.assignBufferInfo=function(e){e.triangleElementsStart=this.triangleElementsStart,e.triangleElementsCount=this.triangleElementsCount,e.pointConnectorStart=this.pointConnectorStart,e.pointConnectorCount=this.pointConnectorCount},t.prototype.processFeatures=function(e,t){this.triangleElementsStart=this.lineIndexBuffer.index,this.triangleElementsCount=0,this.pointConnectorStart=this.joinsVertexBuffer.index,this.pointConnectorCount=0,e&&e.setExtent(this.layerExtent);for(var n=new o.LineLayout(this.layer,this.zoom),r=0,i=this._features;r<i.length;r++){var a=i[r].getGeometry(e);this._processFeature(n,a)}},t.prototype._processFeature=function(e,t){if(t)for(var n=t.length,r=0;n>r;r++)this._processGeometry(t[r],e)},t.prototype._processGeometry=function(e,t){for(var n=e.length;n>=2&&e[n-1].isEqual(e[n-2]);)n--;if(!(2>n)){var r=e[n-1],i=e[0].isEqual(r);if(!i||2!==n){var o,a,s,u,l,c,f,h,p,y=t.cap,d=t.join,m=Math.min(t.miterLimit,4),g=Math.min(t.roundLimit,1.4142),g=2/g*Math.sqrt(1-1/g/g),x=-1,v=-1,_=-1,b=1,w=0;i&&(o=e[n-2],h=r.x-o.x,p=r.y-o.y,l=Math.sqrt(h*h+p*p),h/=l,p/=l);for(var T=this.lineVertexBuffer,k=this.lineIndexBuffer,I=this.joinsVertexBuffer,B=k.index,S=I.index,j=0;n>j;j++)if(void 0!==h&&(c=-h,f=-p),o&&(a=o,u=l),o=e[j],r=d,a&&(w+=u),s=n>j+1?e[j+1]:void 0,i&&!s&&(s=e[1]),!s||!o.isEqual(s)){s?(h=s.x-o.x,p=s.y-o.y,l=Math.sqrt(h*h+p*p),h/=l,p/=l):(h=-c,p=-f),void 0===c&&(c=-h,f=-p);var E=c+h,L=f+p,_=h*L-p*E,E=E/_,L=L/_,P=Math.sqrt(E*E+L*L);2!==r&&Math.abs(_)<g&&m>P&&(r=2),a||2!==y?s||2!==y?2===r?(.01>Math.abs(_)?(E=-p,L=h):P>m&&(E=(c-h)/_,L=(f-p)/_),P>m&&(b=-b),_=T.add(o.x,o.y,E*b,L*b,0,0,w),x>=0&&v>=0&&_>=0&&k.add(x,v,_),x=v,v=_,_=T.add(o.x,o.y,-E*b,-L*b,0,1,w),x>=0&&v>=0&&_>=0&&k.add(x,v,_),x=v,v=_,(!a||!s)&&1===y&&I.add(o.x,o.y)):(a&&(_=T.add(o.x,o.y,f*b,-c*b,0,0,w),x>=0&&v>=0&&_>=0&&k.add(x,v,_),x=v,v=_,_=T.add(o.x,o.y,-f*b,c*b,0,1,w),x>=0&&v>=0&&_>=0&&k.add(x,v,_),x=v,v=_),a&&s||1!==y||(x=T.add(o.x,o.y,f*b,-c*b,0,0,w),I.add(o.x,o.y)),b=1,1===r&&(a&&s&&(!i||j>0)&&I.add(o.x,o.y),v=x=-1),s&&(_=T.add(o.x,o.y,-p*b,h*b,0,0,w),x>=0&&v>=0&&_>=0&&k.add(x,v,_),x=v,v=_,_=T.add(o.x,o.y,p*b,-h*b,0,1,w),x>=0&&v>=0&&_>=0&&k.add(x,v,_),x=v,v=_)):(_=T.add(o.x,o.y,h-p*b,p+h*b,0,0,w),x>=0&&v>=0&&_>=0&&k.add(x,v,_),x=v,v=_,_=T.add(o.x,o.y,h+p*b,p-h*b,0,1,w),x>=0&&v>=0&&_>=0&&k.add(x,v,_),x=v,v=_):(v=_=T.add(o.x,o.y,c+b*f,f-c*b,0,0,w),_=T.add(o.x,o.y,c-f*b,f+c*b,0,1,w),x=v,v=_)}this.triangleElementsCount+=3*(k.index-B),this.pointConnectorCount+=I.index-S}}},t}(i)})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleLayer":function(){define(["require","exports","./StyleDefinition","./StyleProperty","./Filter"],function(e,t,n,r,i){e=function(){function e(e,t,r){switch(this.type=e,this.id=t.id,this.source=t.source,this.sourceLayer=t["source-layer"],this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,this.filter=t.filter,this.layout=t.layout,this.paint=t.paint,this.z=r,e){case 0:this._layoutDefinition=n.StyleDefinition.backgroundLayoutDefinition,this._paintDefinition=n.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=n.StyleDefinition.fillLayoutDefinition,this._paintDefinition=n.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=n.StyleDefinition.lineLayoutDefinition,this._paintDefinition=n.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=n.StyleDefinition.symbolLayoutDefinition,this._paintDefinition=n.StyleDefinition.symbolPaintDefinition}this._layoutProperties=this._parseLayout(this.layout),this._paintProperties=this._parsePaint(this.paint)}return e.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=i.createFilter(this.filter)},e.prototype.hasLayoutProperty=function(e){var t=this._layoutProperties;return t&&t[e]?!0:!1},e.prototype.hasPaintProperty=function(e){var t=this._paintProperties;return t?void 0!==t[e]:!1},e.prototype.getLayoutValue=function(e,t){var n,r=this._layoutProperties;return r&&(r=r[e])&&(n=r.getValue(t)),r=this._layoutDefinition[e],void 0===n&&(n=r["default"]),"enum"===r.type&&(n=r.values.indexOf(n)),n},e.prototype.getPaintValue=function(e,t){var n,r=this._paintProperties;return r&&(r=r[e])&&(n=r.getValue(t)),r=this._paintDefinition[e],void 0===n&&(n=r["default"]),"enum"===r.type&&(n=r.values.indexOf(n)),n},e.prototype._parseLayout=function(e){var t,n={};for(t in e)n[t]=new r(this._layoutDefinition[t],e[t]);return n},e.prototype._parsePaint=function(e){var t,n={};for(t in e)n[t]=new r(this._paintDefinition[t],e[t]);return n},e}(),t.StyleLayer=e,e=function(){return function(e,t){this.cap=e.getLayoutValue("line-cap",t),this.join=e.getLayoutValue("line-join",t),this.miterLimit=e.getLayoutValue("line-miter-limit",t),this.roundLimit=e.getLayoutValue("line-round-limit",t)}}(),t.LineLayout=e,e=function(){return function(e,t,n){this.allowOverlap=e.getLayoutValue("icon-allow-overlap",t),this.ignorePlacement=e.getLayoutValue("icon-ignore-placement",t),this.optional=e.getLayoutValue("icon-optional",t),this.rotationAlignment=e.getLayoutValue("icon-rotation-alignment",t),this.size=e.getLayoutValue("icon-size",t),this.rotate=e.getLayoutValue("icon-rotate",t),this.padding=e.getLayoutValue("icon-padding",t),this.keepUpright=e.getLayoutValue("icon-keep-upright",t),this.offset=e.getLayoutValue("icon-offset",t),n&&1===this.rotationAlignment&&!e.hasLayoutProperty("icon-rotation-alignment")&&(this.rotationAlignment=0)}}(),t.IconLayout=e,e=function(){return function(e,t,n){this.allowOverlap=e.getLayoutValue("text-allow-overlap",t),this.ignorePlacement=e.getLayoutValue("text-ignore-placement",t),this.optional=e.getLayoutValue("text-optional",t),this.rotationAlignment=e.getLayoutValue("text-rotation-alignment",t),this.font=e.getLayoutValue("text-font",t),this.maxWidth=e.getLayoutValue("text-max-width",t),this.lineHeight=e.getLayoutValue("text-line-height",t),this.letterSpacing=e.getLayoutValue("text-letter-spacing",t),this.justify=e.getLayoutValue("text-justify",t),this.anchor=e.getLayoutValue("text-anchor",t),this.maxAngle=e.getLayoutValue("text-max-angle",t),this.size=e.getLayoutValue("text-size",t),this.rotate=e.getLayoutValue("text-rotate",t),this.padding=e.getLayoutValue("text-padding",t),this.keepUpright=e.getLayoutValue("text-keep-upright",t),this.transform=e.getLayoutValue("text-transform",t),this.offset=e.getLayoutValue("text-offset",t),n&&1===this.rotationAlignment&&!e.hasLayoutProperty("text-rotation-alignment")&&(this.rotationAlignment=0)}}(),t.TextLayout=e})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleDefinition":function(){define(["require","exports"],function(e,t){var n=function(){function e(){}return e.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}},e.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}},e.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"line-cap":{type:"enum",values:["butt","round","square"],"default":"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],"default":"miter"},"line-miter-limit":{type:"number","default":2},"line-round-limit":{type:"number","default":1.05}},e.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"symbol-placement":{type:"enum",values:["point","line"],"default":"point"},"symbol-spacing":{type:"number",minimum:1,"default":250},"symbol-avoid-edges":{type:"boolean","default":!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean","default":!1},"icon-ignore-placement":{type:"boolean","default":!1},"icon-optional":{type:"boolean","default":!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport"],"default":"viewport"},"icon-size":{type:"number",minimum:0,"default":1},"icon-rotate":{type:"number","default":0},"icon-padding":{type:"number",minimum:0,"default":2},"icon-keep-upright":{type:"boolean","default":!0},"icon-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport"],"default":"viewport"},"text-font":{type:"array",value:"string","default":["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,"default":16},"text-max-width":{type:"number",minimum:0,"default":10},"text-line-height":{type:"number","default":1.2},"text-letter-spacing":{type:"number","default":0},"text-justify":{type:"enum",values:["left","center","right"],"default":"center"},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),"default":"center"},"text-max-angle":{type:"number",minimum:0,"default":45},"text-rotate":{type:"number","default":0},"text-padding":{type:"number",minimum:0,"default":2},"text-keep-upright":{type:"boolean","default":!0},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],"default":"none"},"text-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-allow-overlap":{type:"boolean","default":!1},"text-ignore-placement":{type:"boolean","default":!1},"text-optional":{type:"boolean","default":!1}},e.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,"default":1},"background-color":{type:"color","default":[0,0,0,1]},"background-pattern":{type:"string"}},e.fillPaintDefinition={"fill-opacity":{type:"number",minimum:0,maximum:1,"default":1},"fill-antialias":{type:"boolean","default":!0},"fill-color":{type:"color","default":[0,0,0,1]},"fill-outline-color":{type:"color","default":[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,"default":[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"fill-pattern":{type:"string"}},e.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,"default":1},"line-color":{type:"color","default":[0,0,0,1]},"line-translate":{type:"array",value:"number",length:2,"default":[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"line-width":{type:"number",minimum:0,"default":1},"line-gap-width":{type:"number",minimum:0,"default":0},"line-offset":{type:"number","default":0},"line-blur":{type:"number",minimum:0,"default":0},"line-dasharray":{type:"array",value:"number","default":[]},"line-pattern":{type:"string"}},e.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,maximum:1,"default":1},"icon-color":{type:"color","default":[0,0,0,1]},"icon-halo-color":{type:"color","default":[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,"default":0},"icon-halo-blur":{type:"number",minimum:0,"default":0},"icon-translate":{type:"array",value:"number",length:2,"default":[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"text-opacity":{type:"number",minimum:0,maximum:1,"default":1},"text-color":{type:"color","default":[0,0,0,1]},"text-halo-color":{type:"color","default":[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,"default":0},"text-halo-blur":{type:"number",minimum:0,"default":0},"text-translate":{type:"array",value:"number",length:2,"default":[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}},e.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,"default":1},"raster-hue-rotate":{type:"number","default":0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,"default":0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,"default":1},"raster-saturation":{type:"number",minimum:-1,maximum:1,"default":0},"raster-contrast":{type:"number",minimum:-1,maximum:1,"default":0},"raster-fade-duration":{type:"number",minimum:0,"default":300}},e.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,"default":1},"circle-radius":{type:"number",minimum:0,"default":5},"circle-color":{type:"color","default":[0,0,0,1]},"circle-blur":{type:"number",minimum:0,"default":0},"circle-translate":{type:"array",value:"number",length:2,"default":[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}},e}();t.StyleDefinition=n})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleProperty":function(){define(["require","exports","../../../Color","../GeometryUtils"],function(e,t,n,r){return function(){function e(t,n){var r;switch(t.type){case"number":r=!0;break;case"color":r=!0,n=e._parseColor(n);break;case"array":r="number"===t.value;break;default:r=!1}this.getValue=r?this._interpolate(n):this._piecewise(n)}return e.prototype._piecewise=function(e){var t=e.stops;return t?function(e){var n=t.length;if(0!==n){for(var r=0,i=0;n>i&&t[i][0]<=e;i++)r=i;return t[r][1]}}:function(){return e}},e.prototype._interpolate=function(e){var t=e.stops;if(t){var n=e.base||1;return function(e){for(var i,o,a=t.length,s=0;a>s;s++){var u=t[s];if(!(u[0]<=e)){o=u;break}i=u}if(i&&o){if(s=o[0]-i[0],e-=i[0],e=1===n?e/s:(Math.pow(n,e)-1)/(Math.pow(n,s)-1),Array.isArray(i[1])){for(i=i[1],o=o[1],a=[],s=0;s<i.length;s++)a.push(r.interpolate(i[s],o[s],e));return a}return r.interpolate(i[1],o[1],e)}return i?i[1]:o?o[1]:void 0}}return function(){return e}},e._parseColor=function(t){if(Array.isArray(t))return t;if("string"==typeof t){var r=new n(t);if(r)return[r.r/255,r.g/255,r.b/255,r.a||1]}if(t&&t.stops)return t.stops=t.stops.map(function(t){return[t[0],e._parseColor(t[1])]}),t;throw Error("Incorrect color definition "+t)},e}()})},"esri/layers/vectorTiles/Color":function(){define(["require","exports","esri/Color"],function(e,t,n){return function(){return function(e){return new n(e)}}()})},"esri/Color":function(){define(["dojo/_base/declare","dojo/_base/Color","dojo/has","./kernel"],function(e,t,n,r){e=e([t],{declaredClass:"esri.Color"}),e.toJsonColor=function(e){return e&&[e.r,e.g,e.b,1<e.a?e.a:Math.round(255*e.a)]},e.toDojoColor=function(e){return e&&new t([e[0],e[1],e[2],e[3]/255])};var i,o="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(i=0;i<o.length;i++)e[o[i]]=t[o[i]];return n("extend-esri")&&(r.Color=e),e})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(e,t,n){function r(e,t){throw Error("declare"+(t?" "+t:"")+": "+e)}function i(e,t){for(var n,i,o,a,s,u=[],l=[{cls:0,refs:[]}],c={},f=1,h=e.length,p=0;h>p;++p){for((n=e[p])?"[object Function]"!=w.call(n)&&r("mixin #"+p+" is not a callable constructor.",t):r("mixin #"+p+" is unknown. Did you use dojo.require to pull it in?",t),i=n._meta?n._meta.bases:[n],o=0,n=i.length-1;n>=0;--n)a=i[n].prototype,a.hasOwnProperty("declaredClass")||(a.declaredClass="uniqName_"+T++),a=a.declaredClass,c.hasOwnProperty(a)||(c[a]={count:0,refs:[],cls:i[n]},++f),a=c[a],o&&o!==a&&(a.refs.push(o),++o.count),o=a;++o.count,l[0].refs.push(o)}for(;l.length;){for(o=l.pop(),u.push(o.cls),--f;s=o.refs,1==s.length;){if(o=s[0],!o||--o.count){o=0;break}u.push(o.cls),--f}if(o)for(p=0,h=s.length;h>p;++p)o=s[p],--o.count||l.push(o)}return f&&r("can't build consistent linearization",t),n=e[0],u[0]=n?n._meta&&n===u[u.length-n._meta.bases.length]?n._meta.bases.length:1:0,u}function o(e,t,n){var i,o,a,s,u,l,c,f=this._inherited=this._inherited||{};if("string"==typeof e&&(i=e,e=t,t=n),n=0,s=e.callee,(i=i||s.nom)||r("can't deduce a name to call inherited()",this.declaredClass),u=this.constructor._meta,a=u.bases,c=f.p,i!=k){if(f.c!==s&&(c=0,l=a[0],u=l._meta,u.hidden[i]!==s)){(o=u.chains)&&"string"==typeof o[i]&&r("calling chained method with inherited: "+i,this.declaredClass);do if(u=l._meta,o=l.prototype,u&&(o[i]===s&&o.hasOwnProperty(i)||u.hidden[i]===s))break;while(l=a[++c]);c=l?c:-1}if(l=a[++c])if(o=l.prototype,l._meta&&o.hasOwnProperty(i))n=o[i];else{s=b[i];do if(o=l.prototype,(n=o[i])&&(l._meta?o.hasOwnProperty(i):n!==s))break;while(l=a[++c])}n=l&&n||b[i]}else{if(f.c!==s&&(c=0,(u=a[0]._meta)&&u.ctor!==s)){for(o=u.chains,(!o||"manual"!==o.constructor)&&r("calling chained constructor with inherited",this.declaredClass);(l=a[++c])&&(!(u=l._meta)||u.ctor!==s););c=l?c:-1}for(;(l=a[++c])&&!(n=(u=l._meta)?u.ctor:l););n=l&&n}return f.c=n,f.p=c,n?!0===t?n:n.apply(this,t||e):void 0}function a(e,t){return"string"==typeof e?this.__inherited(e,t,!0):this.__inherited(e,!0)}function s(e,t,n){var r=this.getInherited(e,t);return r?r.apply(this,n||t||e):void 0}function u(e){for(var t=this.constructor._meta.bases,n=0,r=t.length;r>n;++n)if(t[n]===e)return!0;return this instanceof e}function l(e,r){for(var i in r)i!=k&&r.hasOwnProperty(i)&&(e[i]=r[i]);if(t("bug-for-in-skips-shadowed"))for(var o=n._extraNames,a=o.length;a;)i=o[--a],i!=k&&r.hasOwnProperty(i)&&(e[i]=r[i])}function c(e){return x.safeMixin(this.prototype,e),this}function f(e,t){return e instanceof Array||"function"==typeof e||(t=e,e=void 0),t=t||{},e=e||[],x([this].concat(e),t)}function h(e,t){return function(){var n,r,i=arguments,o=i,a=i[0];r=e.length;var s;if(!(this instanceof i.callee))return g(i);if(t&&(a&&a.preamble||this.preamble))for(s=Array(e.length),s[0]=i,n=0;(a=i[0])&&(a=a.preamble)&&(i=a.apply(this,i)||i),a=e[n].prototype,(a=a.hasOwnProperty("preamble")&&a.preamble)&&(i=a.apply(this,i)||i),++n!=r;)s[n]=i;for(n=r-1;n>=0;--n)a=e[n],(a=(r=a._meta)?r.ctor:a)&&a.apply(this,s?s[n]:i);(a=this.postscript)&&a.apply(this,o)}}function p(e,t){return function(){var n=arguments,r=n,i=n[0];return this instanceof n.callee?(t&&(i&&(i=i.preamble)&&(r=i.apply(this,r)||r),(i=this.preamble)&&i.apply(this,r)),e&&e.apply(this,n),void((i=this.postscript)&&i.apply(this,n))):g(n)}}function y(e){return function(){var t,n,r=arguments,i=0;if(!(this instanceof r.callee))return g(r);for(;t=e[i];++i)if(t=(n=t._meta)?n.ctor:t){t.apply(this,r);break}(t=this.postscript)&&t.apply(this,r)}}function d(e,t,n){return function(){var r,i,o=0,a=1;for(n&&(o=t.length-1,a=-1);r=t[o];o+=a)i=r._meta,(r=(i?i.hidden:r.prototype)[e])&&r.apply(this,arguments)}}function m(e){return v.prototype=e.prototype,e=new v,v.prototype=null,e}function g(e){var t=e.callee,n=m(t);return t.apply(n,e),n}function x(e,s,g){"string"!=typeof e&&(g=s,s=e,e=""),g=g||{};var v,T,B,S,j,E,L,P=1,C=s;if("[object Array]"==w.call(s)?(E=i(s,e),B=E[0],P=E.length-B,s=E[P]):(E=[0],s?"[object Function]"==w.call(s)?(B=s._meta,E=E.concat(B?B.bases:s)):r("base class is not a callable constructor.",e):null!==s&&r("unknown base class. Did you use dojo.require to pull it in?",e)),s)for(T=P-1;v=m(s),T;--T)B=E[T],(B._meta?l:_)(v,B.prototype),S=t("csp-restrictions")?function(){}:new Function,S.superclass=s,S.prototype=v,s=v.constructor=S;else v={};for(x.safeMixin(v,g),B=g.constructor,B!==b.constructor&&(B.nom=k,v.constructor=B),T=P-1;T;--T)(B=E[T]._meta)&&B.chains&&(L=_(L||{},B.chains));if(v["-chains-"]&&(L=_(L||{},v["-chains-"])),B=!L||!L.hasOwnProperty(k),E[0]=S=L&&"manual"===L.constructor?y(E):1==E.length?p(g.constructor,B):h(E,B),S._meta={bases:E,hidden:g,chains:L,parents:C,ctor:g.constructor},S.superclass=s&&s.prototype,S.extend=c,S.createSubclass=f,S.prototype=v,v.constructor=S,v.getInherited=a,v.isInstanceOf=u,v.inherited=I,v.__inherited=o,e&&(v.declaredClass=e,n.setObject(e,S)),L)for(j in L)v[j]&&"string"==typeof L[j]&&j!=k&&(B=v[j]=d(j,E,"after"===L[j]),B.nom=j);return S}var v,_=n.mixin,b=Object.prototype,w=b.toString,T=0,k="constructor";v=t("csp-restrictions")?function(){}:new Function;var I=e.config.isDebug?s:o;return e.safeMixin=x.safeMixin=function(e,r){var i,o;for(i in r)o=r[i],o===b[i]&&i in b||i==k||("[object Function]"==w.call(o)&&(o.nom=i),e[i]=o);if(t("bug-for-in-skips-shadowed")&&r)for(var a=n._extraNames,s=a.length;s;)i=a[--s],o=r[i],o===b[i]&&i in b||i==k||("[object Function]"==w.call(o)&&(o.nom=i),e[i]=o);return e},e.declare=x})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(e,t,n,r){var i=e.Color=function(e){e&&this.setColor(e)};return i.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:r.transparentColor||[0,0,0,0]},t.extend(i,{r:255,g:255,b:255,a:1,_set:function(e,t,n,r){this.r=e,this.g=t,this.b=n,this.a=r},setColor:function(e){return t.isString(e)?i.fromString(e,this):t.isArray(e)?i.fromArray(e,this):(this._set(e.r,e.g,e.b,e.a),e instanceof i||this.sanitize()),this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+n.map(["r","g","b"],function(e){return e=this[e].toString(16),2>e.length?"0"+e:e},this).join("")},toCss:function(e){var t=this.r+", "+this.g+", "+this.b;return(e?"rgba("+t+", "+this.a:"rgb("+t)+")"},toString:function(){return this.toCss(!0)}}),i.blendColors=e.blendColors=function(e,t,r,o){var a=o||new i;return n.forEach(["r","g","b","a"],function(n){a[n]=e[n]+(t[n]-e[n])*r,"a"!=n&&(a[n]=Math.round(a[n]))}),a.sanitize()},i.fromRgb=e.colorFromRgb=function(e,t){var n=e.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return n&&i.fromArray(n[1].split(/\s*,\s*/),t)},i.fromHex=e.colorFromHex=function(e,t){var r=t||new i,o=4==e.length?4:8,a=(1<<o)-1;return e=Number("0x"+e.substr(1)),isNaN(e)?null:(n.forEach(["b","g","r"],function(t){var n=e&a;e>>=o,r[t]=4==o?17*n:n}),r.a=1,r)},i.fromArray=e.colorFromArray=function(e,t){var n=t||new i;return n._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(n.a)&&(n.a=1),n.sanitize()},i.fromString=e.colorFromString=function(e,t){var n=i.named[e];return n&&i.fromArray(n,t)||i.fromRgb(e,t)||i.fromHex(e,t)},i})},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(e,t,n){var r=function(){return this}(),i=r.location,o=i.pathname,a=i.protocol,i={version:"3.19",_appBaseUrl:a+"//"+i.host+o.substring(0,o.lastIndexOf(o.split("/")[o.split("/").length-1]))};return t.noGlobals||(r.esri=i),e.isAsync||n.add("extend-esri",1),(i.dijit=i.dijit||{})._arcgisUrl=("http:"===a||"https:"===a?a:"http:")+"//www.arcgis.com/sharing/rest",i})},"esri/layers/vectorTiles/views/vectorTiles/style/Filter":function(){define(["require","exports"],function(e,t){return function(){function e(t,n,r){this._op=t,"$type"===n?(this._val=r instanceof Array?r.map(function(t){return e._types.indexOf(t)}):e._types.indexOf(r),this._op+=11):(this._key=n,this._val=r)}return e.prototype.filter=function(e){switch(this._op){case 0:return this._val;case 1:return e.values[this._key]===this._val;case 2:return e.values[this._key]!==this._val;case 3:return e.values[this._key]<this._val;case 4:return e.values[this._key]>this._val;case 5:return e.values[this._key]<=this._val;case 6:return e.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(e.values[this._key]);case 8:return-1===this._val.indexOf(e.values[this._key]);case 9:for(var t=0,n=this._val;t<n.length;t++){var r=n[t];if(r.filter(e))return!0}return!1;case 10:for(t=0,n=this._val;t<n.length;t++)if(r=n[t],!r.filter(e))return!1;return!0;case 11:for(t=0,n=this._val;t<n.length;t++)if(r=n[t],r.filter(e))return!1;return!0;case 12:return e.type===this._val;case 13:return e.type!==this._val;case 14:return e.type<this._val;case 15:return e.type>this._val;case 16:return e.type>=this._val;case 17:return e.type<=this._val;case 18:return-1!==this._val.indexOf(e.type);case 19:return-1===this._val.indexOf(e.type)}},e.createFilter=function(t){if(!t)return new e(0,void 0,!0);var n=t[0];if(1>=t.length)return new e(0,void 0,"any"!==n);switch(n){case"==":return new e(1,t[1],t[2]);case"!=":return new e(2,t[1],t[2]);case">":return new e(4,t[1],t[2]);case"<":return new e(3,t[1],t[2]);case">=":return new e(6,t[1],t[2]);case"<=":return new e(5,t[1],t[2]);case"in":return new e(7,t[1],t.slice(2));case"!in":return new e(8,t[1],t.slice(2));case"any":return new e(9,void 0,t.slice(1).map(e.createFilter.bind(this)));case"all":return new e(10,void 0,t.slice(1).map(e.createFilter.bind(this)));case"none":return new e(11,void 0,t.slice(1).map(e.createFilter.bind(this)));default:throw Error("invalid operator: "+n)}},e._types=["Unknown","Point","LineString","Polygon"],e}()})},"esri/layers/vectorTiles/views/vectorTiles/SymbolBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ./Geometry ./style/StyleLayer ./Placement ./GeometryUtils ./TextShaping dojox/string/BidiEngine".split(" "),function(e,t,n,r,i,o,a,s,u,l,c){var f=function(){return function(){}}(),h=function(){return function(e,t,n,r){this.line=t,this.shaping=e,this.iconMosaicItem=n,this.anchor=r}}();return function(){return function(){}}(),function(e){function t(t,n,r,i,o,a,s,u){e.call(this,t,n),this._markerRatio=1,this._markerVertexBuffer=r,this._markerIndexBuffer=i,this._textVertexBuffer=o,this._textIndexBuffer=a,this._placementEngine=s,this._workerTileHandler=u}return n(t,e),Object.defineProperty(t.prototype,"markerIndexStart",{get:function(){return this._markerTriangleElementsStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"markerIndexCount",{get:function(){return this._markerTriangleElementsNum},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textIndexStart",{get:function(){return this._textTriangleElementsStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textIndexCount",{get:function(){return this._textTriangleElementsNum},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sdfMarker",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.copy=function(e,n,r,i,o){return o=new t(this.layer,this.zoom,e,n,r,i,o,this._workerTileHandler),o.layerIndex=this.layerIndex,o.layerExtent=this.layerExtent,o._markerVertexStart=e.index,o._markerTriangleElementsStart=n.index,o._textVertexStart=r.index,o._textTriangleElementsStart=i.index,o._markerTriangleElementsNum=0,o._textTriangleElementsNum=0,o._symbolInstances=this._symbolInstances,o._glyphItems=this._glyphItems,o._textLayout=this._textLayout,o._markerLayout=this._markerLayout,o._isLinePlacement=this._isLinePlacement,o._avoidEdges=this._avoidEdges,o},t.prototype.getResources=function(e,n,r){var i=this.layer,o=this.zoom;e&&e.setExtent(this.layerExtent);for(var a=i.getLayoutValue("icon-image",o),s=i.getLayoutValue("text-field",o),u=i.getLayoutValue("text-font",o),i=i.getLayoutValue("text-transform",o),o=[],l=0,c=this._features;l<c.length;l++){
var h=c[l],p=h.getGeometry(e);if(p&&0!==p.length){var y=void 0;a&&(y=this._replaceKeys(a,h.values))&&n.add(y);var d=void 0,m=!1;if(s){switch(d=this._replaceKeys(s,h.values),i){case 2:d=d.toLowerCase();break;case 1:d=d.toUpperCase()}if(t._bidiEngine.hasBidiChar(d)&&(m=void 0,m="rtl"===t._bidiEngine.checkContextual(d)?"IDNNN":"ICNNN",d=t._bidiEngine.bidiTransform(d,m,"VLYSN"),m=!0),h=d.length,h>0){var g=r[u];g||(g=r[u]=new Set);for(var x=0;h>x;x++){var v=d.charCodeAt(x);g.add(v)}}}(y||d)&&(h=new f,h.sprite=y,h.label=d,h.rtl=m,h.geometry=p,o.push(h))}}this._symbolFeatures=o},t.prototype.processFeatures=function(e,n){e&&e.setExtent(this.layerExtent);var r,i=this.layer,o=this.zoom,c=this._isLinePlacement=1===i.getLayoutValue("symbol-placement",o),f=this._avoidEdges=i.getLayoutValue("symbol-avoid-edges",o)&&!c,p=8*i.getLayoutValue("symbol-spacing",o),y=i.getLayoutValue("icon-image",o),d=i.getLayoutValue("text-field",o),m=this._workerTileHandler;y&&(this._markerLayout=new a.IconLayout(i,o,c),r=m.getSpriteItems());var g,x;if(d){var v=this._textLayout=new a.TextLayout(i,o,c);switch(g=void 0,v.font&&v.font.length&&(g=v.font[0]),x=.5,v.anchor){case 5:case 1:case 7:x=0;break;case 6:case 2:case 8:x=1}switch(i=.5,v.anchor){case 5:case 3:case 6:i=0;break;case 7:case 4:case 8:i=1}switch(o=.5,v.justify){case 0:o=0;break;case 2:o=1}var y=24*v.letterSpacing,d=c?0:24*v.maxWidth,_=24*v.lineHeight,v=[24*v.offset[0],24*v.offset[1]];g=m.getGlyphItems(g),x=new l(g,d,_,y,v,x,i,o)}for(this._markerVertexStart=this._markerVertexBuffer.index,this._markerTriangleElementsStart=this._markerIndexBuffer.index,this._textVertexStart=this._textVertexBuffer.index,this._textTriangleElementsStart=this._textIndexBuffer.index,this._textTriangleElementsNum=this._markerTriangleElementsNum=0,this._symbolInstances=m=[],this._glyphItems=g,i=this._textLayout,o=1,i&&i.size&&(o=i.size/24),y=i?i.maxAngle*u.C_DEG_TO_RAD:0,d=i?8*i.size:0,_=0,v=this._symbolFeatures;_<v.length;_++){var b=v[_],w=void 0;b.sprite&&(w=r[b.sprite]);var T=void 0,k=b.label,I=0;if(k&&(T=x.getShaping(k,b.rtl))&&0<T.length){for(var I=1e30,k=-1e30,B=0,S=T;B<S.length;B++)var j=S[B],I=Math.min(I,j.x),k=Math.max(k,j.x);I=8*(k-I+48)*o}for(k=0,b=b.geometry;k<b.length;k++)for(B=b[k],j=void 0,c?(T&&0<T.length&&i&&i.size&&(S=8*i.size*(2+Math.min(2,4*Math.abs(i.offset[1]))),t._smoothVertices(B,S)),j=t._findAnchors(B,p,I)):j=[new s.Anchor(B[0].x,B[0].y)],S=0;S<j.length;S++){var E=j[S];!(0>E.x||4096<E.x||0>E.y||4096<E.y)&&(!c||!(I>0&&0===i.rotationAlignment)||t._honorsTextMaxAngle(B,E,I,y,d))&&m.push(new h(T,B,w,E))}}for(c=0;c<m.length;c++)this._processFeature(m[c],g,f)},t.prototype.updateSymbols=function(){this._markerVertexStart=this._markerVertexBuffer.index,this._markerTriangleElementsStart=this._markerIndexBuffer.index,this._textVertexStart=this._textVertexBuffer.index,this._textTriangleElementsStart=this._textIndexBuffer.index,this._textTriangleElementsNum=this._markerTriangleElementsNum=0;for(var e=this._glyphItems,t=this._avoidEdges,n=0,r=this._symbolInstances;n<r.length;n++)this._processFeature(r[n],e,t)},t.prototype._replaceKeys=function(e,t){return e.replace(/{([^{}]+)}/g,function(e,n){return n in t?t[n]:""})},t.prototype._processFeature=function(e,t,n){var r=e.line,i=e.iconMosaicItem,a=e.shaping,s=e.anchor,l=(e=this._markerLayout)&&!!i,c=!0,f=1;l&&(f=8*(e.size/(1/this._markerRatio)),c=e.optional||!i);var h,p=this._textLayout,y=p&&a&&0<a.length;h=1;var d=!0;y&&(h=p.size/24,h*=8,d=p.optional||!a||0===a.length);var m,g=new o.Point(0,-17);if(l){if(m=this._placementEngine.getIconPlacement(s,i,f,r,e,n),m.footprint.minzoom===u.C_INFINITY&&!c)return;s.minzoom>m.footprint.minzoom&&(m.footprint.minzoom=s.minzoom)}var x;if(y&&(x=this._placementEngine.getTextPlacement(s,g,a,t,h,r,p,n))){if(x.footprint.minzoom===u.C_INFINITY&&!d)return;s.minzoom>x.footprint.minzoom&&(x.footprint.minzoom=s.minzoom)}(!d&&!c||!c&&x&&x.footprint.minzoom!==u.C_INFINITY||!d&&m&&m.footprint.minzoom!==u.C_INFINITY)&&(t=Math.max(m.footprint.minzoom,x.footprint.minzoom),m.footprint.minzoom=t,x.footprint.minzoom=t),x&&x.footprint.minzoom!==u.C_INFINITY&&(p.ignorePlacement||this._placementEngine.add(x),this._addPlacedSymbols(x.shapes,x.footprint.minzoom,this.zoom,!1)),m&&m.footprint.minzoom!==u.C_INFINITY&&(e.ignorePlacement||this._placementEngine.add(m),this._addPlacedSymbols(m.shapes,m.footprint.minzoom,this.zoom,!0))},t.prototype._addPlacedSymbols=function(e,t,n,r){t=Math.max(n+u.log2(t),0);for(var i=0;i<e.length;i++){var o=e[i],a=Math.max(n+u.log2(o.minzoom),t),s=Math.min(n+u.log2(o.maxzoom),25);if(!(a>=s)){var l=o.tl,c=o.tr,f=o.bl,h=o.br,p=o.mosaicRect,y=-o.labelAngle,o=o.anchor,d=r?this._markerVertexBuffer:this._textVertexBuffer,m=r?this._markerIndexBuffer:this._textIndexBuffer,g=d.index,x=p.x,v=p.y,_=x+p.width,p=v+p.height;d.add(o.x,o.y,l.x,l.y,x,v,y,a,s,t),d.add(o.x,o.y,c.x,c.y,_,v,y,a,s,t),d.add(o.x,o.y,f.x,f.y,x,p,y,a,s,t),d.add(o.x,o.y,h.x,h.y,_,p,y,a,s,t),m.add(g+0,g+1,g+2),m.add(g+1,g+2,g+3),r?this._markerTriangleElementsNum+=6:this._textTriangleElementsNum+=6}}},t._findAnchors=function(e,t,n){t+=n;for(var r=0,i=e.length-1,a=0;i>a;a++)r+=o.Point.distance(e[a],e[a+1]);if(a=.5*(n||t),a>=r)return[];n=a/r,t=r/Math.max(Math.round(r/t),1);for(var r=0,i=-t/2,l=[],c=e.length-1,a=0;c>a;a++){for(var f=e[a],h=e[a+1],p=h.x-f.x,y=h.y-f.y,d=Math.sqrt(p*p+y*y),m=void 0;r+d>i+t;){var i=i+t,g=(i-r)/d,x=u.interpolate(f.x,h.x,g),g=u.interpolate(f.y,h.y,g);void 0===m&&(m=Math.atan2(y,p)),l.push(new s.Anchor(x,g,m,a,n))}r+=d}return l},t.deviation=function(e,t,n){return Math.atan2((t.x-e.x)*(n.y-t.y)-(t.y-e.y)*(n.x-t.x),(t.x-e.x)*(n.x-t.x)+(t.y-e.y)*(n.y-t.y))},t._honorsTextMaxAngle=function(e,t,n,r,i){var a=0;n/=2;for(var s=new o.Point(t.x,t.y),u=t.segment+1;a>-n;){if(--u,0>u)return!1;a-=o.Point.distance(e[u],s),s=e[u]}a+=o.Point.distance(e[u],e[u+1]),t=[];for(var s=0,l=e.length;n>a;){var c=e[u],f=void 0;do{if(++u,u===l)return!1;f=e[u]}while(f.isEqual(c));var h=u,p=void 0;do{if(++h,h===l)return!1;p=e[h]}while(p.isEqual(f));for(c=this.deviation(c,f,p),t.push({deviation:c,distToAnchor:a}),s+=c;a-t[0].distToAnchor>i;)s-=t.shift().deviation;if(Math.abs(s)>r)return!1;a+=o.Point.distance(f,p)}return!0},t._smoothVertices=function(e,t){if(!(0>=t)){var n=e.length;if(!(3>n)){var r=[],i=0;r.push(0);for(var a=1;n>a;a++)i+=o.Point.distance(e[a],e[a-1]),r.push(i);t=Math.min(t,.2*i),i=[],i.push(e[0].x),i.push(e[0].y);var s=e[n-1].x,u=e[n-1].y,a=o.Point.sub(e[0],e[1]);for(a.normalize(),e[0].x+=t*a.x,e[0].y+=t*a.y,a.assignSub(e[n-1],e[n-2]),a.normalize(),e[n-1].x+=t*a.x,e[n-1].y+=t*a.y,a=1;n>a;a++)r[a]+=t;r[n-1]+=t;for(var l=.5*t,a=1;n-1>a;a++){for(var c=0,f=0,h=0,p=a-1;p>=0&&!(r[p+1]<r[a]-l);p--){var y=l+r[p+1]-r[a],d=r[p+1]-r[p],m=r[a]-r[p]<l?1:y/d;if(1e-6>Math.abs(m))break;var g=m*m,x=m*y-.5*g*d,v=m*d/t,_=e[p+1],b=e[p].x-_.x,w=e[p].y-_.y,c=c+v/x*(_.x*m*y+.5*g*(y*b-d*_.x)-g*m*d*b/3),f=f+v/x*(_.y*m*y+.5*g*(y*w-d*_.y)-g*m*d*w/3),h=h+v}for(p=a+1;n>p&&!(r[p-1]>r[a]+l)&&(y=l-r[p-1]+r[a],d=r[p]-r[p-1],m=r[p]-r[a]<l?1:y/d,!(1e-6>Math.abs(m)));p++)g=m*m,x=m*y-.5*g*d,v=m*d/t,_=e[p-1],b=e[p].x-_.x,w=e[p].y-_.y,c+=v/x*(_.x*m*y+.5*g*(y*b-d*_.x)-g*m*d*b/3),f+=v/x*(_.y*m*y+.5*g*(y*w-d*_.y)-g*m*d*w/3),h+=v;i.push(c/h),i.push(f/h)}for(i.push(s),i.push(u),p=a=0;n>a;a++)e[a].x=i[p++],e[a].y=i[p++]}}},t._bidiEngine=new c,t}(i)})},"esri/layers/vectorTiles/views/vectorTiles/Placement":function(){define(["require","exports","./Geometry","./GeometryUtils","./Conflict"],function(e,t,n,r,i){e=function(){return function(e,t,n,r,i){void 0===n&&(n=0),void 0===r&&(r=-1),void 0===i&&(i=u),this.x=e,this.y=t,this.angle=n,this.segment=r,this.minzoom=i}}(),t.Anchor=e,e=function(){return function(e,t,n){this.glyph=e,this.x=t,this.y=n}}(),t.ShapedGlyph=e;var o=function(){return function(e,t,n,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=u),void 0===a&&(a=r.C_INFINITY),this.anchor=e,this.labelAngle=t,this.glyphAngle=n,this.upsideDown=i,this.minzoom=o,this.maxzoom=a}}(),a=function(){return function(e,t,n,r,i,o,a,s,u){this.tl=e,this.tr=t,this.bl=n,this.br=r,this.mosaicRect=i,this.labelAngle=o,this.anchor=a,this.minzoom=s,this.maxzoom=u}}();t.PlacedSymbol=a;var s=function(){return function(e,t){this.footprint=e,this.shapes=t}}();t.Placement=s;var u=.5;e=function(){function e(e){this.mapAngle=e,this._conflictEngine=new i.ConflictEngine(e)}return e.prototype.getIconPlacement=function(e,t,o,l,c,f){var h=t.width/t.pixelRatio,p=t.height/t.pixelRatio;l=c.offset[0]-h/2;var y=c.offset[1]-p/2,h=l+h,p=y+p,d=t.rect,m=new n.Point(l,y),g=new n.Point(l+d.width/t.pixelRatio,y+d.height/t.pixelRatio),x=new n.Point(l,g.y),v=new n.Point(g.x,y),_=c.rotate*r.C_DEG_TO_RAD;if(t=1===c.rotationAlignment,0<=e.segment&&!t&&(_+=e.angle),0!==_){var b=Math.cos(_),w=Math.sin(_);m.rotate(b,w),g.rotate(b,w),x.rotate(b,w),v.rotate(b,w)}return b=8*c.padding,w=new n.Point(e.x,e.y),e=new i.Footprint(this.mapAngle,b,t),e.addBox(w,new i.Box(l,y,h,p),o,_,u,r.C_INFINITY),o=new a(m,v,x,g,d,0,w,u,r.C_INFINITY),o=new s(e,[o]),l=u,c.allowOverlap||(l=this._conflictEngine.getMinZoom(o.footprint,l,f,t)),e.minzoom=l,o},e.prototype.getTextPlacement=function(e,t,l,c,f,h,p,y){for(var d,m=new n.Point(e.x,e.y),g=p.rotate*r.C_DEG_TO_RAD,x=0===p.rotationAlignment,v=p.keepUpright,_=u,b=!x,w=b?0:e.angle,T=0<=e.segment&&x,k=new i.Footprint(this.mapAngle,8*p.padding,b),I=[],B=!T,S=Number.POSITIVE_INFINITY,j=Number.NEGATIVE_INFINITY,E=S,L=j,P=T?v:x&&v,C=[],A=0;A<l.length;A++){var M=l[A],V=c[M.glyph];if(V){var N=V.rect;if(N&&!(0>=N.width||0>=N.height)){var F=V.metrics;B&&(d&&d!==M.y&&(k.addBox(m,new i.Box(S,E,j,L),f,g,u,r.C_INFINITY),S=Number.POSITIVE_INFINITY,j=Number.NEGATIVE_INFINITY,E=S,L=j),d=M.y);var z=[];if(T){if(V=(t.x+M.x+F.left-3+.5*V.metrics.width)*f,_=this._placeGlyph(e,_,V,h,e.segment,1,z),v&&(_=this._placeGlyph(e,_,V,h,e.segment,-1,z)),_>=2)break}else z.push(new o(m,w,w)),x&&v&&z.push(new o(m,w+r.C_PI,w+r.C_PI,!0));for(var V=M.x+t.x+F.left,M=M.y+t.y-F.top,D=V+F.width,F=M+F.height,O=new n.Point(V-3,M-3),R=new n.Point(O.x+N.width,O.y+N.height),U=new n.Point(O.x,R.y),q=new n.Point(R.x,O.y),G=0;G<z.length;G++){var H=z[G],Z=O.clone(),J=U.clone(),Y=q.clone(),W=R.clone(),$=M,K=F,Q=H.glyphAngle+g;if(0!==Q){var X=Math.cos(Q),ee=Math.sin(Q);Z.rotate(X,ee),W.rotate(X,ee),J.rotate(X,ee),Y.rotate(X,ee)}I.push(new a(Z,Y,J,W,N,H.labelAngle,H.anchor,H.minzoom,H.maxzoom)),(!P||this._legible(H.labelAngle))&&(B?(S>V&&(S=V),E>$&&(E=$),D>j&&(j=D),K>L&&(L=K)):2>H.minzoom&&k.addBox(H.anchor,new i.Box(V,$,D,K),f,Q,H.minzoom,H.maxzoom)),C.push(H)}}}}return _>=2?null:(B&&k.addBox(m,new i.Box(S,E,j,L),f,g,u,r.C_INFINITY),e=new s(k,I),p.allowOverlap||(_=this._conflictEngine.getMinZoom(e.footprint,_,y,b)),k.minzoom=_,e)},e.prototype.add=function(e){this._conflictEngine.add(e.footprint)},e.prototype._legible=function(e){return e=r.radToByte(e),65>e||e>=193},e.prototype._placeGlyph=function(e,t,i,a,s,u,l){var c=0>u?r.positiveMod(e.angle+r.C_PI,r.C_2PI):e.angle,f=this._legible(c),h=0;0>i&&(u*=-1,i*=-1,h=r.C_PI),u>0&&++s,e=new n.Point(e.x,e.y);var p=a[s],y=r.C_INFINITY;if(a.length<=s)return y;for(;;){var d=p.x-e.x,m=p.y-e.y,g=Math.sqrt(d*d+m*m),x=Math.max(i/g,t),d=r.positiveMod(Math.atan2(m/g,d/g)+h,r.C_2PI);if(l.push(new o(e,c,d,f,x,y)),t>=x)return x;e=p.clone();do{if(s+=u,a.length<=s||0>s)return x;p=a[s]}while(e.isEqual(p));y=p.x-e.x,d=p.y-e.y,m=Math.sqrt(y*y+d*d),y*=g/m,d*=g/m,e.x-=y,e.y-=d,y=x}},e}(),t.PlacementEngine=e})},"esri/layers/vectorTiles/views/vectorTiles/Conflict":function(){define(["require","exports","./Geometry","./GeometryUtils"],function(e,t,n,r){e=function(){function e(e,t,n,r){this.left=e,this.top=t,this.right=n,this.bottom=r}return e.prototype.clone=function(){return new e(this.left,this.top,this.right,this.bottom)},e.prototype.move=function(e,t){this.left+=e,this.top+=t,this.right+=e,this.bottom+=t},e.prototype.rotate=function(e,t){var n=this.left,r=this.right,i=this.top,o=this.bottom,a=n*e-i*t,s=n*t+i*e,u=r*e-i*t,i=r*t+i*e,l=n*e-o*t,n=n*t+o*e,c=r*e-o*t,r=r*t+o*e;this.left=Math.min(a,u,l,c),this.top=Math.min(s,i,n,r),this.right=Math.max(a,u,l,c),this.bottom=Math.max(s,i,n,r)},e.overlaps=function(e,t){return e.right>t.left&&e.left<t.right&&e.bottom>t.top&&e.top<t.bottom},e}(),t.Box=e;var i=function(){function e(e,t,n,r){this.anchor=e,this.corners=t,this.minzoom=n,this.maxzoom=r}return e.prototype.left=function(){return this.corners[0].x},e.prototype.right=function(){return this.corners[2].x},e.prototype.top=function(){return this.corners[1].y},e.prototype.bottom=function(){return this.corners[3].y},e}();t.Obstacle=i,e=function(){function e(e,t,n){this.obstacles=[],this.mapAngle=e,this.padding=t,this.isScreenAligned=n,this.minzoom=o}return e.prototype.addBox=function(e,t,r,o,a,s){var u=t.left*r-this.padding,l=t.top*r-this.padding,c=t.right*r+this.padding;if(t=t.bottom*r+this.padding,u=[new n.Point(u,l),new n.Point(c,l),new n.Point(c,t),new n.Point(u,t)],0!==this.mapAngle&&(l=Math.cos(this.mapAngle),c=Math.sin(this.mapAngle),e=e.clone(),e.rotate(l,c)),this.isScreenAligned||(o+=this.mapAngle),0!==o){for(l=Math.cos(o),c=Math.sin(o),u[0].rotate(l,c),u[1].rotate(l,c),u[2].rotate(l,c),u[3].rotate(l,c),o=0,l=1;4>l;l++)u[l].x<u[o].x?o=l:u[l].x===u[o].x&&u[l].y<u[o].y&&(o=l);if(o){for(c=[],l=0;4>l;l++)c.push(u[(l+o)%4]);u=c}}this.obstacles.push(new i(e,u,a,s))},e}(),t.Footprint=e;var o=.5;e=function(){function e(e){this._grid=[],this._angle=e,this._c=Math.cos(e),this._s=Math.sin(e)}return e.prototype.add=function(t){var n=this._grid,r=0;for(t=t.obstacles;r<t.length;r++)for(var i=t[r],o=i.anchor,a=e._gridClamp(Math.min(i.left()+o.x,o.x)),s=e._gridClamp(Math.max(i.right()+o.x,o.x)),u=e._gridClamp(Math.min(i.top()+o.y,o.y)),o=e._gridClamp(Math.max(i.bottom()+o.y,o.y));o>=u;u++)for(var l=a;s>=l;l++){var c=n[16*u+l];c||(c=n[16*u+l]=[]),c.push(i)}},e.prototype.getMinZoom=function(t,n,i,o){if(0===t.obstacles.length)return r.C_INFINITY;for(i=this._grid,o=0,t=t.obstacles;o<t.length;o++)for(var a=t[o],s=a.anchor,u=e._gridClamp(Math.min(a.left()+s.x,s.x)),l=e._gridClamp(Math.max(a.right()+s.x,s.x)),c=e._gridClamp(Math.min(a.top()+s.y,s.y)),s=e._gridClamp(Math.max(a.bottom()+s.y,s.y));s>=c;c++)for(var f=u;l>=f;f++){var h=i[16*c+f];if(h)for(var p=0;p<h.length;p++){var y=h[p];if(!(a.minzoom>=y.maxzoom||y.minzoom>=a.maxzoom)&&(n=e._calcPlacementZoom(a,y,n),n>=2))return r.C_INFINITY}}return 2>n?n:r.C_INFINITY},e._gridClamp=function(e){return r.clamp(e>>9,-7,8)},e._calcPlacementZoom=function(t,n,i){var o=n.anchor.x-t.anchor.x;if(0===o&&(t.right()<n.left()||n.right()<t.left()))return i;var a=n.anchor.y-t.anchor.y;if(0===a&&(t.bottom()<n.top()||n.bottom()<t.top()))return i;var s=r.C_INFINITY;if(0!==o){var u=(o>0?t.right()-n.left():t.left()-n.right())/o;s>u&&(s=u),o=o>0?e._calcExtZoomX(t,n,u):e._calcExtZoomX(n,t,u),s>o&&(s=o)}return 0!==a&&(o=(a>0?t.bottom()-n.top():t.top()-n.bottom())/a,s>o&&(s=o),a=a>0?e._calcExtZoomY(t,n,o):e._calcExtZoomY(n,t,o),s>a&&(s=a)),s<t.minzoom||s<n.minzoom?i:(s=Math.min(s,t.maxzoom,n.maxzoom),i>s&&(s=i),s)},e._calcExtZoomX=function(e,t,n){var r,i,o;if(e.anchor.y+e.corners[2].y/n<t.anchor.y+t.corners[0].y/n){r=e.corners[2].x-e.corners[3].x,o=e.corners[2].y-e.corners[3].y;var a=t.corners[1].x-t.corners[0].x;i=t.corners[1].y-t.corners[0].y,r*i-o*a>=0?e.anchor.y+e.corners[3].y/n<t.anchor.y+t.corners[0].y/n?(n=e.corners[3],r=t.corners[0],i=t.corners[1],o=1):(n=t.corners[0],r=e.corners[3],i=e.corners[2],o=-1):e.anchor.y+e.corners[2].y/n>t.anchor.y+t.corners[1].y/n?(n=e.corners[2],r=t.corners[0],i=t.corners[1],o=1):(n=t.corners[1],r=e.corners[3],i=e.corners[2],o=-1)}else r=e.corners[2].x-e.corners[1].x,o=e.corners[2].y-e.corners[1].y,a=t.corners[3].x-t.corners[0].x,i=t.corners[3].y-t.corners[0].y,0>r*i-o*a?e.anchor.y+e.corners[1].y/n>t.anchor.y+t.corners[0].y/n?(n=e.corners[1],r=t.corners[0],i=t.corners[3],o=1):(n=t.corners[0],r=e.corners[1],i=e.corners[2],o=-1):e.anchor.y+e.corners[2].y/n<t.anchor.y+t.corners[3].y/n?(n=e.corners[2],r=t.corners[0],i=t.corners[3],o=1):(n=t.corners[3],r=e.corners[1],i=e.corners[2],o=-1);return a=i.x-r.x,i=i.y-r.y,o*((n.y-r.y)*a-(n.x-r.x)*i)/((e.anchor.x-t.anchor.x)*i-(e.anchor.y-t.anchor.y)*a)},e._calcExtZoomY=function(e,t,n){var r,i,o;if(e.anchor.x+e.corners[3].x/n<t.anchor.x+t.corners[1].x/n){r=e.corners[3].x-e.corners[2].x,o=e.corners[3].y-e.corners[2].y;var a=t.corners[0].x-t.corners[1].x;i=t.corners[0].y-t.corners[1].y,0>r*i-o*a?e.anchor.x+e.corners[2].x/n<t.anchor.x+t.corners[1].x/n?(n=e.corners[2],r=t.corners[1],i=t.corners[0],o=1):(n=t.corners[1],r=e.corners[2],i=e.corners[3],o=-1):e.anchor.x+e.corners[3].x/n>t.anchor.x+t.corners[0].x/n?(n=e.corners[3],r=t.corners[1],i=t.corners[0],o=1):(n=t.corners[0],r=e.corners[2],i=e.corners[3],o=-1)}else r=e.corners[3].x-e.corners[0].x,o=e.corners[3].y-e.corners[0].y,a=t.corners[2].x-t.corners[1].x,i=t.corners[2].y-t.corners[1].y,r*i-o*a>0?e.anchor.x+e.corners[0].x/n>t.anchor.x+t.corners[1].x/n?(n=e.corners[0],r=t.corners[1],i=t.corners[2],o=1):(n=t.corners[1],r=e.corners[0],i=e.corners[3],o=-1):e.anchor.x+e.corners[3].x/n<t.anchor.x+t.corners[2].x/n?(n=e.corners[3],r=t.corners[1],i=t.corners[2],o=1):(n=t.corners[2],r=e.corners[0],i=e.corners[3],o=-1);return a=i.x-r.x,i=i.y-r.y,o*((n.y-r.y)*a-(n.x-r.x)*i)/((e.anchor.x-t.anchor.x)*i-(e.anchor.y-t.anchor.y)*a)},e}(),t.ConflictEngine=e})},"esri/layers/vectorTiles/views/vectorTiles/TextShaping":function(){define(["require","exports","./Placement"],function(e,t,n){return function(){function e(e,t,n,r,i,o,a,s){this._glyphItems=e,this._maxWidth=t,this._lineHeight=n,this._letterSpacing=r,this._offset=i,this._hAnchor=o,this._vAnchor=a,this._justify=s}return e.prototype.getShaping=function(e,t){for(var r=this._glyphItems,i=this._letterSpacing,o=this._offset[0],a=this._offset[1],s=[],u=0,l=e.length;l>u;u++){var c=e.charCodeAt(u),f=r[c];f&&(s.push(new n.ShapedGlyph(c,o,a)),o+=f.metrics.advance+i)}if(0<s.length){if(f=this._maxWidth,r=this._lineHeight,o=this._justify,l=s.length,c=a=i=0,0!==f)for(var h=0,p=0,u=0;l>u;u++){var y=s[u];if(y.x-=p,y.y=t?y.y-r*i:y.y+r*i,y.x>f&&h>0){for(var d=s[h+1].x,c=Math.max(d,c),m=h+1;u>=m;m++)s[m].y=t?s[m].y-r:s[m].y+r,s[m].x-=d;o&&this._applyJustification(s,a,h-1),a=h+1,h=0,p+=d,i++}32===y.glyph&&(h=u)}for(u=s[l-1],c=Math.max(c,u.x+this._glyphItems[u.glyph].metrics.advance),o&&this._applyJustification(s,a,l-1),l=(o-this._hAnchor)*c,u=(-this._vAnchor*(i+1)+.5)*r,t&&i&&(u+=i*r),r=0;r<s.length;r++)i=s[r],i.x+=l,i.y+=u}return s},e.prototype._applyJustification=function(e,t,n){for(var r=e[n],r=(r.x+this._glyphItems[r.glyph].metrics.advance)*this._justify;n>=t;t++)e[t].x-=r},e}()})},"dojox/string/BidiEngine":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/Stateful"],function(e,t,n){function r(e,t,n,a,u){var l=e;if(void 0===t&&(t=u.defInFormat),void 0===n&&(n=u.defOutFormat),void 0===a&&(a=u.defSwap),t!==n){var c,f=t.substring(0,1);c=t.substring(1,4);var h=n.substring(0,1),p=n.substring(1,4);"C"===c.charAt(0)&&(c=i(l),c="ltr"===c||"rtl"===c?c.toUpperCase():"L"===t.charAt(2)?"LTR":"RTL",t=f+c),"C"===p.charAt(0)&&(c=i(l),"rtl"===c?p="RTL":"ltr"===c?(l=l.split(""),l.reverse(),c=i(l.join("")),p=c.toUpperCase()):p="L"===n.charAt(2)?"LTR":"RTL",n=h+p)}if(t===n)return e;if(h=t.substring(0,1),l=t.substring(1,4),f=n.substring(0,1),p=n.substring(1,4),u.inFormat=t,u.outFormat=n,u.swap=a,"L"===h&&"VLTR"===n){if("LTR"===l)return u.dir=T,o(e,u);if("RTL"===l)return u.dir=k,o(e,u)}return"V"===h&&"V"===f?(u.dir="RTL"===l?k:T,s(e,u)):"L"===h&&"VRTL"===n?(u.dir="LTR"===l?T:k,e=o(e,u),s(e)):"VLTR"===t&&"LLTR"===n?(u.dir=T,o(e,u)):"V"===h&&"L"===f&&l!==p?(e=s(e),"RTL"===l?r(e,"LLTR","VLTR",a,u):r(e,"LRTL","VRTL",a,u)):"VRTL"===t&&"LRTL"===n?r(e,"LRTL","VRTL",a,u):"L"===h&&"L"===f?(t=u.swap,u.swap=t.substr(0,1)+"N","RTL"===l?(u.dir=k,e=o(e,u),u.swap="N"+t.substr(1,2),u.dir=T,e=o(e,u)):(u.dir=T,e=o(e,u),u.swap="N"+t.substr(1,2),e=r(e,"VLTR","LRTL",u.swap,u)),e):void 0}function i(e){return(e=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(e))?"z">=e[0]?"ltr":"rtl":""}function o(e,t){var n=e.split(""),r=[];if(a(n,r,t),0!==t.hiLevel&&t.swap.substr(0,1)!==t.swap.substr(1,2))for(var i=0;i<n.length;i++)if(1===r[i]){var o,s=n,u=i;e:{o=n[i];for(var l=void 0,f=0,h=S.length-1;h>=f;)if(l=Math.floor((f+h)/2),o<S[l][0])h=l-1;else{if(!(o>S[l][0])){o=S[l][1];break e}f=l+1}}s[u]=o}return c(2,n,r,t),c(1,n,r,t),v=r,n.join("")}function a(e,t,n){var r=e.length,i=n.dir?R:O,o=null,a=null,s=null,o=0,a=a=null,u=-1,l=a=null,c=[],h=[];for(n.hiLevel=n.dir,n.lastArabic=!1,n.hasUbatAl=!1,n.hasUbatB=!1,n.hasUbatS=!1,a=0;r>a;a++){var l=c,s=a,p=e[a].charCodeAt(0),y=ce[p>>8];l[s]=ee>y?y:fe[y-ee][255&p]}for(l=0;r>l;l++){if(h[l]=a=f(e,c,h,l,n),o=i[o][a],a=240&o,o&=15,t[l]=s=i[o][b],a>0){if(16===a)for(a=u;l>a;a++)t[a]=1;u=-1}if(a=i[o][w])-1===u&&(u=l);else if(u>-1){for(a=u;l>a;a++)t[a]=s;u=-1}c[l]===J&&(t[l]=0),n.hiLevel|=s}if(n.hasUbatS)for(e=0;r>e;e++)if(c[e]===Y)for(t[e]=n.dir,i=e-1;i>=0&&c[i]===$;i--)t[i]=n.dir}function s(e,t){var n=e.split("");if(t){var r=[];a(n,r,t),v=r}return n.reverse(),g.reverse(),n.join("")}function u(e){for(var t=0;t<z.length;t++)if(e>=z[t]&&e<=D[t])return!0;return!1}function l(e,t,n,r){for(;r>t*n&&p(e[t]);)t+=n;return r>t*n&&u(e[t])?!0:!1}function c(e,t,n,r){if(!(r.hiLevel<e))if(1!==e||r.dir!==k||r.hasUbatB){r=t.length;for(var i,o,a,s=0;r>s;){if(n[s]>=e){for(i=s+1;r>i&&n[i]>=e;)i++;for(o=i-1;o>s;s++,o--)a=t[s],t[s]=t[o],t[o]=a,a=g[s],g[s]=g[o],g[o]=a;s=i}s++}}else t.reverse(),g.reverse()}function f(e,t,n,r,i){return{UBAT_L:function(){return i.lastArabic=!1,U},UBAT_R:function(){return i.lastArabic=!1,q},UBAT_ON:function(){return Z},UBAT_AN:function(){return H},UBAT_EN:function(){return i.lastArabic?H:G},UBAT_AL:function(){return i.lastArabic=!0,i.hasUbatAl=!0,q},UBAT_WS:function(){return Z},UBAT_CS:function(){var e,o;return 1>r||r+1>=t.length||(e=n[r-1])!==G&&e!==H||(o=t[r+1])!==G&&o!==H?Z:(i.lastArabic&&(o=H),o===e?o:Z)},UBAT_ES:function(){return(r>0?n[r-1]:J)===G&&r+1<t.length&&t[r+1]===G?G:Z},UBAT_ET:function(){if(r>0&&n[r-1]===G)return G;if(i.lastArabic)return Z;for(var e=r+1,o=t.length;o>e&&t[e]===K;)e++;return o>e&&t[e]===G?G:Z},UBAT_NSM:function(){if("VLTR"===i.inFormat){for(var o=t.length,a=r+1;o>a&&t[a]===Q;)a++;if(o>a&&(o=e[r],a=t[a],(o>=1425&&2303>=o||64286===o)&&(a===q||a===W)))return q}return 1>r||t[r-1]===J?Z:n[r-1]},UBAT_B:function(){return i.lastArabic=!0,i.hasUbatB=!0,i.dir},UBAT_S:function(){return i.hasUbatS=!0,Z},UBAT_LRE:function(){return i.lastArabic=!1,Z},UBAT_RLE:function(){return i.lastArabic=!1,Z},UBAT_LRO:function(){return i.lastArabic=!1,Z},UBAT_RLO:function(){return i.lastArabic=!1,Z},UBAT_PDF:function(){return i.lastArabic=!1,Z},UBAT_BN:function(){return Z}}[X[t[r]]]()}function h(e,t){for(var n=0;n<P.length;n++)if(e===P[n])return t[n];return e}function p(e){return e>="Ù"&&"Ù">=e?!0:!1}function y(e){return"L"===e?"LTR":"R"===e?"RTL":"C"===e?"CLR":"D"===e?"CRL":void 0}function d(e,t){for(var n=0;n<j.length;n++)if(e===j[n])return t[n];return e}function m(e,t,n,r){for(var i=0;i<e.length;i++)(e[i]>t||!n&&e[i]===t)&&(e[i]+=r)}e.getObject("string",!0,dojox),e=t("dojox.string.BidiEngine",n,{inputFormat:"ILYNN",outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],levels:[],bidiTransform:function(e,t,n){if(this.sourceToTarget=[],this.targetToSource=[],!e)return"";var i=this.sourceToTarget,o=this.targetToSource,a=e.length;g=[],v=[];for(var s=0;a>s;s++)i[s]=s,o[s]=s,g[s]=s;if(!this.checkParameters(t,n))return e;t=this.inputFormat,n=this.outputFormat;var i=e,i=_,s=y(t.charAt(1)),o=y(n.charAt(1)),c="I"===t.charAt(0)?"L":t.charAt(0),a="I"===n.charAt(0)?"L":n.charAt(0),s=c+s,o=a+o,a=t.charAt(2)+n.charAt(2);for(i.defInFormat=s,i.defOutFormat=o,i.defSwap=a,e=r(e,s,o,a,i),i=!1,"R"===n.charAt(1)?i=!0:("C"===n.charAt(1)||"D"===n.charAt(1))&&(i=this.checkContextual(e)),o=this.sourceToTarget=g,a=Array(o.length),s=0;s<o.length;s++)a[o[s]]=s;if(x=this.targetToSource=a,t.charAt(3)===n.charAt(3))i=e;else if("S"===n.charAt(3))if(t=i,n=!0,0===e.length)i=void 0;else{void 0===t&&(t=!0),void 0===n&&(n=!0),e=String(e),e=e.split("");var f=0,o=1,i=e.length;t||(f=e.length-1,o=-1,i=1);for(var a=i,s=n,b=0,i=[],c=0;a>f*o;f+=o)if(u(e[f])||p(e[f])){var w;if(w="Ù"===e[f])e:{for(var T=e,k=f+o,I=o,B=a;B>k*I&&p(T[k]);)k+=I;if(w=" ",B>k*I)for(w=T[k],T=0;T<j.length;T++)if(j[T]===w){w=!0;break e}w=!1}if(w){for(e[f]=0===b?d(e[f+o],E):d(e[f+o],L),f+=o,b=e,w=f,T=o,k=a;k>w*T&&p(b[w]);)w+=T;k>w*T&&(b[w]=" "),s&&(i[c]=f,c++),b=0}else{if(w=e[f],1===b){if(T=e,k=f,l(e,f+o,o,a)){e:for(I=e[f],B=0;B<P.length;B++)if(I===P[B]){I=M[B];break e}}else I=h(e[f],A);T[k]=I}else!0===l(e,f+o,o,a)?e[f]=h(e[f],V):e[f]=h(e[f],C);p(w)||(b=1);e:{for(T=0;T<N.length;T++)if(N[T]===w){w=!0;break e}w=!1}!0===w&&(b=0)}}else b=0;for(o="",a=0;a<e.length;a++){if(s=n){e:{for(s=0;s<i.length;s++)if(i[s]===a)break e;s=-1}s=s>-1}s?(m(x,a,!t,-1),g.splice(a,1)):o+=e[a]}i=o}else if(t=e,n=i,e=!0,0===t.length)i=void 0;else for(void 0===e&&(e=!0),void 0===n&&(n=!0),t=String(t),i="",o=[],o=t.split(""),a=0;a<t.length;a++)s=!1,"ï¹°"<=o[a]&&"\ufeff">o[a]?(c=t.charCodeAt(a),"ï»µ"<=o[a]&&"ï»¼">=o[a]?(n?(a>0&&e&&" "===o[a-1]?i=i.substring(0,i.length-1)+"Ù":(i+="Ù",s=!0),i+=j[(c-65269)/2]):(i+=j[(c-65269)/2],i+="Ù",a+1<t.length&&e&&" "===o[a+1]?a++:s=!0),s&&(m(x,a,!0,1),g.splice(a,0,g[a]))):i+=F[c-65136]):i+=o[a];return this.sourceToTarget=g,this.targetToSource=x,this.levels=v,i},_inputFormatSetter:function(e){if(!I.test(e))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=e},_outputFormatSetter:function(e){if(!I.test(e))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=e},checkParameters:function(e,t){return e?this.set("inputFormat",e):e=this.inputFormat,t?this.set("outputFormat",t):t=this.outputFormat,e===t?!1:!0},checkContextual:function(e){if(e=i(e),"ltr"!==e&&"rtl"!==e){try{e=document.dir.toLowerCase()}catch(t){}"ltr"!==e&&"rtl"!==e&&(e="ltr")}return e},hasBidiChar:function(e){return B.test(e)}});var g=[],x=[],v=[],_={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},b=5,w=6,T=0,k=1,I=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,B=/[\u0591-\u06ff\ufb1d-\ufefc]/,S=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["Â«","Â»"],["Â»","Â«"],["â¹","âº"],["âº","â¹"],["â½","â¾"],["â¾","â½"],["â","â"],["â","â"],["â¤","â¥"],["â¥","â¤"],["â©","âª"],["âª","â©"],["ï¹","ï¹"],["ï¹","ï¹"],["ï¹","ï¹"],["ï¹","ï¹"],["ï¹","ï¹"],["ï¹","ï¹"],["ï¹¤","ï¹¥"],["ï¹¥","ï¹¤"]],j=["Ø¢","Ø£","Ø¥","Ø§"],E=["ï»µ","ï»·","ï»¹","ï»»"],L=["ï»¶","ï»¸","ï»º","ï»¼"],P="Ø§Ø¨ØªØ«Ø¬Ø­Ø®Ø¯Ø°Ø±Ø²Ø³Ø´ØµØ¶Ø·Ø¸Ø¹ØºÙÙÙÙÙÙÙÙÙØ¥Ø£Ø¢Ø©ÙÙÙÙÙÙÙØ¥Ø£Ø¢Ø©ÙÛØ¦Ø¤".split(""),C="ïºïºïºïºïºïº¡ïº¥ïº©ïº«ïº­ïº¯ïº±ïºµïº¹ïº½ï»ï»ï»ï»ï»ï»ï»ï»ï»¡ï»¥ï»©ï»­ï»±ïºïºïºïºï»¯ï¯¼ïºïºï¹°ï¹²ï¹´ï¹¶ï¹¸ï¹ºï¹¼ï¹¾ïºïºïº".split(""),A="ïºïºïºïºïºïº¢ïº¦ïºªïº¬ïº®ïº°ïº²ïº¶ïººïº¾ï»ï»ï»ï»ï»ï»ï»ï»ï»¢ï»¦ï»ªï»®ï»²ïºïºïºïºï»°ï¯½ïºïºï¹°ï¹²ï¹´ï¹¶ï¹¸ï¹ºï¹¼ï¹¾ïºïºïº".split(""),M="ïºïºïºïºïº ïº¤ïº¨ïºªïº¬ïº®ïº°ïº´ïº¸ïº¼ï»ï»ï»ï»ï»ï»ï»ï»ï» ï»¤ï»¨ï»¬ï»®ï»´ïºïºïºïºï»°ï¯¿ïºïºï¹±ï¹²ï¹´ï¹·ï¹¹ï¹»ï¹½ï¹¿ïºïºïº".split(""),V="ïºïºïºïºïºïº£ïº§ïº©ïº«ïº­ïº¯ïº³ïº·ïº»ïº¿ï»ï»ï»ï»ï»ï»ï»ï»ï»£ï»§ï»«ï»­ï»³ïºïºïºïºï»¯ï¯¾ïºïºï¹°ï¹²ï¹´ï¹¶ï¹¸ï¹ºï¹¼ï¹¾ïºïºïº".split(""),N="Ø¡Ø¢Ø£Ø¤Ø¥Ø§Ø©Ø¯Ø°Ø±Ø²ÙÙ".split(""),F="ÙÙÙØÙØÙÙÙÙÙÙÙÙÙÙØ¡Ø¢Ø¢Ø£Ø£Ø¤Ø¤Ø¥Ø¥Ø¦Ø¦Ø¦Ø¦Ø§Ø§Ø¨Ø¨Ø¨Ø¨Ø©Ø©ØªØªØªØªØ«Ø«Ø«Ø«Ø¬Ø¬Ø¬Ø¬Ø­Ø­Ø­Ø­Ø®Ø®Ø®Ø®Ø¯Ø¯Ø°Ø°Ø±Ø±Ø²Ø²Ø³Ø³Ø³Ø³Ø´Ø´Ø´Ø´ØµØµØµØµØ¶Ø¶Ø¶Ø¶Ø·Ø·Ø·Ø·Ø¸Ø¸Ø¸Ø¸Ø¹Ø¹Ø¹Ø¹ØºØºØºØºÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙï»µï»¶ï»·ï»¸ï»¹ï»ºï»»ï»¼ØØØ".split(""),z=["Ø¡","Ù"],D=["Øº","Ù"],O=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],R=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],U=0,q=1,G=2,H=3,Z=4,J=5,Y=6,W=7,$=8,K=11,Q=12,X="UBAT_L UBAT_R UBAT_EN UBAT_AN UBAT_ON UBAT_B UBAT_S UBAT_AL UBAT_WS UBAT_CS UBAT_ES UBAT_ET UBAT_NSM UBAT_LRE UBAT_RLE UBAT_PDF UBAT_LRO UBAT_RLO UBAT_BN".split(" "),ee=100;t=U,n=q;var te=G,ne=H,re=Z,ie=J,oe=Y,ae=W,se=$,ue=K,le=Q,ce=[ee+0,t,t,t,t,ee+1,ee+2,ee+3,n,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,ee+4,re,re,re,t,re,t,re,t,re,re,re,t,t,re,re,t,t,t,t,t,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,t,t,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,t,t,t,t,t,t,t,t,t,t,t,t,t,t,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,t,t,re,re,t,t,re,re,t,t,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,t,t,t,ee+5,ae,ae,ee+6,ee+7],fe=[[18,18,18,18,18,18,18,18,18,oe,ie,oe,se,ie,18,18,18,18,18,18,18,18,18,18,18,18,18,18,ie,ie,ie,oe,se,re,re,ue,ue,ue,re,re,re,re,re,10,9,10,9,9,te,te,te,te,te,te,te,te,te,te,9,re,re,re,re,re,re,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,re,re,re,re,re,re,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,re,re,re,re,18,18,18,18,18,18,ie,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,re,ue,ue,ue,ue,re,re,re,re,t,re,re,18,re,re,ue,ue,te,te,re,t,re,re,re,te,t,re,re,re,re,re,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,re,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,re,t,t,t,t,t,t,t,t],[t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,re,re,re,re,re,re,re,re,re,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,re,re,t,t,t,t,t,t,t,re,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,re,t,re,re,re,re,re,re,re,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,n,le,n,le,le,n,le,le,n,le,re,re,re,re,re,re,re,re,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,re,re,re,re,re,n,n,n,n,n,re,re,re,re,re,re,re,re,re,re,re],[ne,ne,ne,ne,re,re,re,re,ae,ue,ue,ae,9,ae,re,re,le,le,le,le,le,le,le,le,le,le,le,ae,re,re,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ue,ne,ne,ae,ae,ae,le,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,le,le,le,le,le,le,le,ne,re,le,le,le,le,le,le,ae,ae,le,le,re,le,le,le,le,ae,ae,te,te,te,te,te,te,te,te,te,te,ae,ae,ae,ae,ae,ae],[ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,re,ae,ae,le,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,re,re,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,le,le,le,le,le,le,le,le,le,le,le,ae,re,re,re,re,re,re,re,re,re,re,re,re,re,re,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,le,le,le,le,le,le,le,le,le,n,n,re,re,re,re,n,re,re,re,re,re],[se,se,se,se,se,se,se,se,se,se,se,18,18,18,t,n,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,se,ie,13,14,15,16,17,9,ue,ue,ue,ue,ue,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,9,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,se,18,18,18,18,18,re,re,re,re,re,18,18,18,18,18,18,te,t,re,re,te,te,te,te,te,te,10,10,re,re,re,t,te,te,te,te,te,te,te,te,te,te,10,10,re,re,re,re,t,t,t,t,t,t,t,t,t,t,t,t,t,re,re,re,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re],[t,t,t,t,t,t,t,re,re,re,re,re,re,re,re,re,re,re,re,t,t,t,t,t,re,re,re,re,re,n,le,n,n,n,n,n,n,n,n,n,n,10,n,n,n,n,n,n,n,n,n,n,n,n,n,re,n,n,n,n,n,re,n,re,n,n,re,n,n,re,n,n,n,n,n,n,n,n,n,n,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae],[le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,le,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,le,le,le,le,le,le,le,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,9,re,9,re,re,9,re,re,re,re,re,re,re,re,re,ue,re,re,10,10,re,re,re,re,re,ue,ue,re,re,re,re,re,ae,ae,ae,ae,ae,re,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,re,re,18],[re,re,re,ue,ue,ue,re,re,re,re,re,10,9,10,9,9,te,te,te,te,te,te,te,te,te,te,9,re,re,re,re,re,re,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,re,re,re,re,re,re,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,re,re,re,re,re,re,re,re,re,re,re,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,re,re,re,t,t,t,t,t,t,re,re,t,t,t,t,t,t,re,re,t,t,t,t,t,t,re,re,t,t,t,re,re,re,ue,ue,re,re,re,ue,ue,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re,re]];
return e})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(e,t,n,r){return e("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(e){var t=this._attrPairNames;return t[e]?t[e]:t[e]={s:"_"+e+"Setter",g:"_"+e+"Getter"}},postscript:function(e){e&&this.set(e)},_get:function(e,t){return"function"==typeof this[t.g]?this[t.g]():this[e]},get:function(e){return this._get(e,this._getAttrNames(e))},set:function(e,t){if("object"==typeof e){for(var n in e)e.hasOwnProperty(n)&&"_watchCallbacks"!=n&&this.set(n,e[n]);return this}n=this._getAttrNames(e);var i=this._get(e,n);n=this[n.s];var o;if("function"==typeof n?o=n.apply(this,Array.prototype.slice.call(arguments,1)):this[e]=t,this._watchCallbacks){var a=this;r(o,function(){a._watchCallbacks(e,i,t)})}return this},_changeAttrValue:function(e,t){var n=this.get(e);return this[e]=t,this._watchCallbacks&&this._watchCallbacks(e,n,t),this},watch:function(e,t){var r=this._watchCallbacks;if(!r)var i=this,r=this._watchCallbacks=function(e,t,n,o){var a=function(r){if(r){r=r.slice();for(var o=0,a=r.length;a>o;o++)r[o].call(i,e,t,n)}};a(r["_"+e]),o||a(r["*"])};t||"function"!=typeof e?e="_"+e:(t=e,e="*");var o=r[e];"object"!=typeof o&&(o=r[e]=[]),o.push(t);var a={};return a.unwatch=a.remove=function(){var e=n.indexOf(o,t);e>-1&&o.splice(e,1)},a}})})},"esri/layers/vectorTiles/views/vectorTiles/TileClipper":function(){define(["require","exports","./Geometry","./GeometryUtils"],function(e,t,n,r){var i=function(){return function(e,t,n){this.ratio=e,this.x=t,this.y=n}}();e=function(){function e(e,t,n){this.dz=e,this.yPos=t,this.xPos=n}return e.prototype.setExtent=function(e){this.finalRatio=4096/e*(1<<this.dz);var t;t=64/this.finalRatio,e>>=this.dz,t>e&&(t=e),this.margin=t,this.xmin=e*this.xPos-t,this.ymin=e*this.yPos-t,this.xmax=this.xmin+e+2*t,this.ymax=this.ymin+e+2*t},e.prototype.reset=function(e){this.type=e,this._prevIsIn=!1,this.lines=[],this.line=null},e.prototype.moveTo=function(e,t){this._pushLine(),this._prevIsIn=this._isIn(e,t),this._moveTo(e,t,this._prevIsIn),this._prevPt=new n.Point(e,t),this._firstPt=new n.Point(e,t)},e.prototype.lineTo=function(e,t){var r,o,a,s,u,l,c=this._isIn(e,t);if(c)this._prevIsIn?this._lineTo(e,t,!0):(r=this._prevPt,o=new n.Point(e,t),a=this._intersect(o,r),this._lineTo(a.x,a.y,!0),this._lineTo(o.x,o.y,!0));else{if(this._prevIsIn)o=this._prevPt,r=new n.Point(e,t),a=this._intersect(o,r),this._lineTo(a.x,a.y,!0);else{var f=this._prevPt;if(r=new n.Point(e,t),!(f.x<=this.xmin&&r.x<=this.xmin||f.x>=this.xmax&&r.x>=this.xmax||f.y<=this.ymin&&r.y<=this.ymin||f.y>=this.ymax&&r.y>=this.ymax))if(o=[],(f.x<this.xmin&&r.x>this.xmin||f.x>this.xmin&&r.x<this.xmin)&&(a=(this.xmin-f.x)/(r.x-f.x),l=f.y+a*(r.y-f.y),l<=this.ymin?u=!1:l>=this.ymax?u=!0:o.push(new i(a,this.xmin,l))),(f.x<this.xmax&&r.x>this.xmax||f.x>this.xmax&&r.x<this.xmax)&&(a=(this.xmax-f.x)/(r.x-f.x),l=f.y+a*(r.y-f.y),l<=this.ymin?u=!1:l>=this.ymax?u=!0:o.push(new i(a,this.xmax,l))),(f.y<this.ymin&&r.y>this.ymin||f.y>this.ymin&&r.y<this.ymin)&&(a=(this.ymin-f.y)/(r.y-f.y),l=f.x+a*(r.x-f.x),l<=this.xmin?s=!1:l>=this.xmax?s=!0:o.push(new i(a,l,this.ymin))),(f.y<this.ymax&&r.y>this.ymax||f.y>this.ymax&&r.y<this.ymax)&&(a=(this.ymax-f.y)/(r.y-f.y),l=f.x+a*(r.x-f.x),l<=this.xmin?s=!1:l>=this.xmax?s=!0:o.push(new i(a,l,this.ymax))),0===o.length)s?u?this._lineTo(this.xmax,this.ymax,!0):this._lineTo(this.xmax,this.ymin,!0):u?this._lineTo(this.xmin,this.ymax,!0):this._lineTo(this.xmin,this.ymin,!0);else if(1<o.length&&o[0].ratio>o[1].ratio)this._lineTo(o[1].x,o[1].y,!0),this._lineTo(o[0].x,o[0].y,!0);else for(a=0;a<o.length;a++)this._lineTo(o[a].x,o[a].y,!0)}this._lineTo(r.x,r.y,!1)}this._prevIsIn=c,this._prevPt=new n.Point(e,t)},e.prototype.close=function(){var e,t;0<this.line.length&&(e=this._firstPt,t=this._prevPt,(e.x!==t.x||e.y!==t.y)&&this.lineTo(e.x,e.y),e=this.line,t=e.length,t>=4&&(e[0].x===e[1].x&&e[0].x===e[t-2].x||e[0].y===e[1].y&&e[0].y===e[t-2].y))&&(e.pop(),e[0].x=e[t-2].x,e[0].y=e[t-2].y)},e.prototype.result=function(){return this._pushLine(),0===this.lines.length?null:(3===this.type&&o.simplify(this.margin*this.finalRatio,this.lines),this.lines)},e.prototype._isIn=function(e,t){return e>=this.xmin&&e<=this.xmax&&t>=this.ymin&&t<=this.ymax},e.prototype._intersect=function(e,t){var r,i;if(t.x>=this.xmin&&t.x<=this.xmax)i=t.y<=this.ymin?this.ymin:this.ymax,r=e.x+(i-e.y)/(t.y-e.y)*(t.x-e.x);else if(t.y>=this.ymin&&t.y<=this.ymax)r=t.x<=this.xmin?this.xmin:this.xmax,i=e.y+(r-e.x)/(t.x-e.x)*(t.y-e.y);else{i=t.y<=this.ymin?this.ymin:this.ymax,r=t.x<=this.xmin?this.xmin:this.xmax;var o=(r-e.x)/(t.x-e.x),a=(i-e.y)/(t.y-e.y);a>o?i=e.y+o*(t.y-e.y):r=e.x+a*(t.x-e.x)}return new n.Point(r,i)},e.prototype._pushLine=function(){this.line&&(1===this.type?0<this.line.length&&this.lines.push(this.line):2===this.type?1<this.line.length&&this.lines.push(this.line):3===this.type&&3<this.line.length&&this.lines.push(this.line)),this.line=[]},e.prototype._moveTo=function(e,t,r){3!==this.type?r&&(e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),t=Math.round((t-(this.ymin+this.margin))*this.finalRatio),this.line.push(new n.Point(e,t))):(r||(e<this.xmin&&(e=this.xmin),e>this.xmax&&(e=this.xmax),t<this.ymin&&(t=this.ymin),t>this.ymax&&(t=this.ymax)),e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),t=Math.round((t-(this.ymin+this.margin))*this.finalRatio),this.line.push(new n.Point(e,t)),this._is_v=this._is_h=!1)},e.prototype._lineTo=function(e,t,r){if(3!==this.type)if(r){if(e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),t=Math.round((t-(this.ymin+this.margin))*this.finalRatio),0<this.line.length&&(r=this.line[this.line.length-1],r.equals(e,t)))return;this.line.push(new n.Point(e,t))}else this.line&&0<this.line.length&&this._pushLine();else if(r||(e<this.xmin&&(e=this.xmin),e>this.xmax&&(e=this.xmax),t<this.ymin&&(t=this.ymin),t>this.ymax&&(t=this.ymax)),e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),t=Math.round((t-(this.ymin+this.margin))*this.finalRatio),this.line&&0<this.line.length){r=this.line[this.line.length-1];var i=r.x===e,o=r.y===t;i&&o||(this._is_h&&i?(r.x=e,r.y=t,r=this.line[this.line.length-2],this._is_h=r.x===e,this._is_v=r.y===t):this._is_v&&o?(r.x=e,r.y=t,r=this.line[this.line.length-2],this._is_h=r.x===e,this._is_v=r.y===t):(this.line.push(new n.Point(e,t)),this._is_h=i,this._is_v=o))}else this.line.push(new n.Point(e,t))},e}(),t.TileClipper=e,e=function(){function e(){}return e.prototype.setExtent=function(e){this._ratio=4096===e?1:4096/e},e.prototype.reset=function(e){this.type=e,this.lines=[],this.line=null},e.prototype.moveTo=function(e,t){this.line&&this.lines.push(this.line),this.line=[];var r=this._ratio;this.line.push(new n.Point(Math.round(e*r),Math.round(t*r)))},e.prototype.lineTo=function(e,t){var r=this._ratio;this.line.push(new n.Point(Math.round(e*r),Math.round(t*r)))},e.prototype.close=function(){var e=this.line;e&&!e[0].isEqual(e[e.length-1])&&e.push(e[0])},e.prototype.result=function(){return this.line&&this.lines.push(this.line),0===this.lines.length?null:(3===this.type&&1!==this._ratio&&o.simplify(64,this.lines),this.lines)},e}(),t.SimpleBuilder=e;var o=function(){function e(){}return e.simplify=function(t,n){if(n){for(var r=-t,i=4096+t,o=-t,a=4096+t,s=[],u=[],l=n.length,c=0;l>c;++c){var f=n[c];if(f&&!(2>f.length))for(var h=f[0],p=void 0,y=f.length,d=1;y>d;++d)p=f[d],h.x===p.x&&(h.x<=r&&(h.y>p.y?(s.push(c),s.push(d),s.push(0),s.push(-1)):(u.push(c),u.push(d),u.push(0),u.push(-1))),h.x>=i&&(h.y<p.y?(s.push(c),s.push(d),s.push(1),s.push(-1)):(u.push(c),u.push(d),u.push(1),u.push(-1)))),h.y===p.y&&(h.y<=o&&(h.x<p.x?(s.push(c),s.push(d),s.push(2),s.push(-1)):(u.push(c),u.push(d),u.push(2),u.push(-1))),h.y>=a&&(h.x>p.x?(s.push(c),s.push(d),s.push(3),s.push(-1)):(u.push(c),u.push(d),u.push(3),u.push(-1)))),h=p}0===s.length||0===u.length||(e.fillParent(n,u,s),e.fillParent(n,s,u),r=[],e.calcDeltas(r,u,s),e.calcDeltas(r,s,u),e.addDeltas(r,n))}},e.fillParent=function(e,t,n){for(var i=n.length,o=t.length,a=0;o>a;a+=4){for(var s=t[a],u=t[a+1],l=t[a+2],c=e[s][u-1],s=e[s][u],u=8092,f=-1,h=0;i>h;h+=4)if(n[h+2]===l){var p=n[h],y=n[h+1],d=e[p][y-1],p=e[p][y];switch(l){case 0:case 1:r.between(c.y,d.y,p.y)&&r.between(s.y,d.y,p.y)&&(d=Math.abs(p.y-d.y),u>d&&(u=d,f=h));break;case 2:case 3:r.between(c.x,d.x,p.x)&&r.between(s.x,d.x,p.x)&&(d=Math.abs(p.x-d.x),u>d&&(u=d,f=h))}}t[a+3]=f}},e.calcDeltas=function(t,n,r){for(var i=n.length,o=0;i>o;o+=4){var a=e.calcDelta(o,n,r,[]);t.push(n[o]),t.push(n[o+1]),t.push(n[o+2]),t.push(a)}},e.calcDelta=function(t,n,r,i){if(t=n[t+3],-1===t)return 0;var o=i.length;return o>1&&i[o-2]===t?0:(i.push(t),e.calcDelta(t,r,n,i)+1)},e.addDeltas=function(e,t){for(var n=e.length,r=0,i=0;n>i;i+=4){var o=e[i+3];o>r&&(r=o)}for(i=0;n>i;i+=4){var a=t[e[i]],s=e[i+1],o=r-e[i+3];switch(e[i+2]){case 0:a[s-1].x-=o,a[s].x-=o;break;case 1:a[s-1].x+=o,a[s].x+=o;break;case 2:a[s-1].y-=o,a[s].y-=o;break;case 3:a[s-1].y+=o,a[s].y+=o}}for(n=t.length,r=0;n>r;++r)(a=t[r])&&!(2>a.length)&&a[a.length-1].x!==a[0].x&&a[a.length-1].y!==a[0].y&&a.push(a[0])},e}()})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleRepository":function(){define(["require","exports","./StyleLayer"],function(e,t,n){return function(){function e(t,n){this.styleJSON=t,this.version=parseFloat(t.version),this.sprite=n?n.spriteUrl:t.sprite,this.glyphs=n?n.glyphsUrl:t.glyphs,this.layers=(t.layers||[]).map(e._create),this._identifyRefLayers()}return e.prototype._identifyRefLayers=function(){for(var e=[],t=[],n=0,r=this.layers;n<r.length;n++){var i=r[n];if(1===i.type){var o=i.sourceLayer,o=o+("|"+JSON.stringify(i.minzoom)),o=o+("|"+JSON.stringify(i.maxzoom)),o=o+("|"+JSON.stringify(i.filter));e.push({key:o,layer:i})}2===i.type&&(o=i.sourceLayer,o+="|"+JSON.stringify(i.minzoom),o+="|"+JSON.stringify(i.maxzoom),o+="|"+JSON.stringify(i.filter),o+="|"+JSON.stringify(i.layout["line-cap"]),o+="|"+JSON.stringify(i.layout["line-join"]),t.push({key:o,layer:i}))}this._assignRefLayers(e),this._assignRefLayers(t)},e.prototype._assignRefLayers=function(e){e.sort(function(e,t){return e.key<t.key?-1:e.key>t.key?1:0});for(var t,n,r=e.length,i=0;r>i;i++){var o=e[i];if(o.key===t)o.layer.refLayerId=n;else if(t=o.key,n=o.layer.id,1===o.layer.type&&!o.layer.hasPaintProperty("fill-outline-color"))for(var a=i+1;r>a;a++){var s=e[a];if(s.key!==t)break;if(s.layer.hasPaintProperty("fill-outline-color")){e[i]=s,e[a]=o,n=s.layer.id;break}}}},e._create=function(e,t,r){switch(t=1-(1+t)*(1/(r.length+1)),e.type){case"background":return new n.StyleLayer(0,e,t);case"fill":return new n.StyleLayer(1,e,t);case"line":return new n.StyleLayer(2,e,t);case"symbol":return new n.StyleLayer(3,e,t);case"raster":throw Error("Unsupported vector tile raster layer");case"circle":throw Error("Unsupported vector tile circle layer")}throw Error("Unknown vector tile layer")},e}()})}}}),define("esri/layers/vectorTiles/core/workers/worker-init",[],1);