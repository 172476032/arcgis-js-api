// COPYRIGHT Â© 2017 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/3.19/esri/copyright.txt for details.

// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.20/esri/copyright.txt for details.
//>>built

!function(e,t){var r,n=function(){},i=function(e){for(var t in e)return 0;return 1},o={}.toString,s=function(e){return"[object Function]"==o.call(e)},a=function(e){return"[object String]"==o.call(e)},u=function(e){return"[object Array]"==o.call(e)},c=function(e,t){if(e)for(var r=0;r<e.length;)t(e[r++])},l=function(e,t){for(var r in t)e[r]=t[r];return e},f=function(e,t){return l(Error(e),{src:"dojoLoader",info:t})},h=1,p=function(){return"_"+h++},d=function(e,t,r){return Z(e,t,r,0,d)},m=this,y=m.document,v=y&&y.createElement("DiV"),g=d.has=function(e){return s(x[e])?x[e]=x[e](m,y,v):x[e]},x=g.cache=t.hasCache;g.add=function(e,t,r,n){return(void 0===x[e]||n)&&(x[e]=t),r&&g(e)},l(t.hasCache,{"host-browser":0,dom:0,"dojo-dom-ready-api":0,"dojo-sniff":0,"dojo-inject-api":1,"host-webworker":1,"dojo-guarantee-console":0}),t.loaderPatch={injectUrl:function(e,t){try{importScripts(e),t()}catch(r){console.info("failed to load resource ("+e+")"),console.error(r)}}};for(var _ in e.has)g.add(_,e.has[_],0,1);d.async=1;var b=g("csp-restrictions")?function(){}:new Function("return eval(arguments[0]);");d.eval=function(e,t){return b(e+"\r\n//# sourceURL="+t)};var w={},T=d.signal=function(e,t){var r=w[e];c(r&&r.slice(0),function(e){e.apply(null,u(t)?t:[t])})},I=d.on=function(e,t){var r=w[e]||(w[e]=[]);return r.push(t),{remove:function(){for(var e=0;e<r.length;e++)if(r[e]===t){r.splice(e,1);break}}}},k=[],E={},S=[],B={},P=d.map={},j=[],C={},A="",L={},M={};_={};var N=function(e){var t,r,n,i;for(t in M)r=M[t],(n=t.match(/^url\:(.+)/))?L["url:"+fe(n[1],e)]=r:"*now"==t?i=r:"*noref"!=t&&(n=se(t,e,!0),L[n.mid]=L["url:"+n.url]=r);i&&i(W(e)),M={}},R=function(e){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(e){return"\\"+e})},V=function(e,t){t.splice(0,t.length);for(var r in e)t.push([r,e[r],new RegExp("^"+R(r)+"(/|$)"),r.length]);return t.sort(function(e,t){return t[3]-e[3]}),t},D=function(e,t){c(e,function(e){t.push([a(e[0])?new RegExp("^"+R(e[0])+"$"):e[0],e[1]])})},z=function(e){var t=e.name;t||(t=e,e={name:t}),e=l({main:"main"},e),e.location=e.location?e.location:t,e.packageMap&&(P[t]=e.packageMap),e.main.indexOf("./")||(e.main=e.main.substring(2)),B[t]=e},F=[],O=function(e,t,r){for(var n in e)"waitSeconds"==n&&(d.waitms=1e3*(e[n]||0)),"cacheBust"==n&&(A=e[n]?a(e[n])?e[n]:(new Date).getTime()+"":""),("baseUrl"==n||"combo"==n)&&(d[n]=e[n]),e[n]!==x&&(d.rawConfig[n]=e[n],"has"!=n&&g.add("config-"+n,e[n],0,t));d.baseUrl||(d.baseUrl="./"),/\/$/.test(d.baseUrl)||(d.baseUrl+="/");for(n in e.has)g.add(n,e.has[n],0,t);c(e.packages,z);for(var i in e.packagePaths)c(e.packagePaths[i],function(e){var t=i+"/"+e;a(e)&&(e={name:e}),e.location=t,z(e)});if(V(l(P,e.map),j),c(j,function(e){e[1]=V(e[1],[]),"*"==e[0]&&(j.star=e)}),V(l(E,e.paths),S),D(e.aliases,k),t)F.push({config:e.config});else for(n in e.config)t=ce(n,r),t.config=l(t.config||{},e.config[n]);e.cache&&(N(),M=e.cache,e.cache["*noref"]&&N()),T("config",[e,d.rawConfig])};if(g("dojo-cdn")){var U=y.getElementsByTagName("script");r=0;for(var q,G,Y,J;r<U.length;)q=U[r++],(Y=q.getAttribute("src"))&&(J=Y.match(/(((.*)\/)|^)dojo\.js(\W|$)/i))&&(G=J[3]||"",t.baseUrl=t.baseUrl||G),(Y=q.getAttribute("data-dojo-config")||q.getAttribute("djConfig"))&&(_=d.eval("({ "+Y+" })","data-dojo-config"))}d.rawConfig={},O(t,1),g("dojo-cdn")&&((B.dojo.location=G)&&(G+="/"),B.dijit.location=G+"../dijit/",B.dojox.location=G+"../dojox/"),O(e,1),O(_,1);var H=function(e){Ie(function(){c(e.deps,je)})},Z=function(e,t,r,i,o){var s;if(a(e)){if((s=ce(e,i,!0))&&s.executed)return s.result;throw f("undefinedModule",e)}if(u(e)||(O(e,0,i),e=t,t=r),u(e))if(e.length){r="require*"+p();for(var c,h=[],m=0;m<e.length;)c=e[m++],h.push(ce(c,i));s=l(ie("",r,0,""),{injected:2,deps:h,def:t||n,require:i?i.require:d,gc:1}),C[s.mid]=s,H(s);var y=Te&&!0;Ie(function(){we(s,y)}),s.executed||X.push(s),ke()}else t&&t();return o},W=function(e){if(!e)return d;var t=e.require;return t||(t=function(r,n,i){return Z(r,n,i,e,t)},e.require=l(t,d),t.module=e,t.toUrl=function(t){return fe(t,e)},t.toAbsMid=function(t){return le(t,e)}),t},X=[],$=[],K={},Q=function(e){e.injected=1,K[e.mid]=1,e.url&&(K[e.url]=e.pack||1),Ne()},ee=function(e){e.injected=2,delete K[e.mid],e.url&&delete K[e.url],i(K)&&Me()},te=d.idle=function(){return!$.length&&i(K)&&!X.length&&!Te},re=function(e,t){if(t)for(var r=0;r<t.length;r++)if(t[r][2].test(e))return t[r];return 0},ne=function(e){var t,r,n=[];for(e=e.replace(/\\/g,"/").split("/");e.length;)t=e.shift(),".."==t&&n.length&&".."!=r?(n.pop(),r=n[n.length-1]):"."!=t&&n.push(r=t);return n.join("/")},ie=function(e,t,r,n){return{pid:e,mid:t,pack:r,url:n,executed:0,def:0}},oe=function(e,t,r,n,i,o,a,u,l){var h,p,d,m;if(m=/^\./.test(e),/(^\/)|(\:)|(\.js$)/.test(e)||m&&!t)return ie(0,e,0,e);if(e=ne(m?t.mid+"/../"+e:e),/^\./.test(e))throw f("irrationalPath",e);t&&(d=re(t.mid,o)),(d=(d=d||o.star)&&re(e,d[1]))&&(e=d[1]+e.substring(d[3])),t=(J=e.match(/^([^\/]+)(\/(.+))?$/))?J[1]:"",(h=r[t])?e=t+"/"+(p=J[3]||h.main):t="";var y=0;return c(u,function(t){var r=e.match(t[0]);r&&0<r.length&&(y=s(t[1])?e.replace(t[0],t[1]):t[1])}),y?oe(y,0,r,n,i,o,a,u,l):(r=n[e])?l?ie(r.pid,r.mid,r.pack,r.url):n[e]:(n=(d=re(e,a))?d[1]+e.substring(d[3]):t?h.location+"/"+p:g("config-tlmSiblingOfDojo")?"../"+e:e,/(^\/)|(\:)/.test(n)||(n=i+n),ie(t,e,h,ne(n+".js")))},se=function(e,t,r){return oe(e,t,B,C,d.baseUrl,r?[]:j,r?[]:S,r?[]:k)},ae=function(e,t,r){return e.normalize?e.normalize(t,function(e){return le(e,r)}):le(t,r)},ue=0,ce=function(e,t,r){var n,i;return(n=e.match(/^(.+?)\!(.*)$/))?(i=ce(n[1],t,r),5!==i.executed||i.load||ge(i),i.load?(n=ae(i,n[2],t),e=i.mid+"!"+(i.dynamic?++ue+"!":"")+n):(n=n[2],e=i.mid+"!"+ ++ue+"!waitingForPlugin"),e={plugin:i,mid:e,req:W(t),prid:n}):e=se(e,t),C[e.mid]||!r&&(C[e.mid]=e)},le=d.toAbsMid=function(e,t){return se(e,t).mid},fe=d.toUrl=function(e,t){var r=se(e+"/x",t),n=r.url;return Ee(0===r.pid?e:n.substring(0,n.length-5))},he={injected:2,executed:5,def:3,result:3};G=function(e){return C[e]=l({mid:e},he)};var pe=G("require"),de=G("exports"),me=G("module"),ye={},ve=0,ge=function(e){var t=e.result;return e.dynamic=t.dynamic,e.normalize=t.normalize,e.load=t.load,e},xe=function(e){var t={};c(e.loadQ,function(r){var n=ae(e,r.prid,r.req.module),i=e.dynamic?r.mid.replace(/waitingForPlugin$/,n):e.mid+"!"+n,n=l(l({},r),{mid:i,prid:n,injected:0});C[i]&&C[i].injected||Se(C[i]=n),t[r.mid]=C[i],ee(r),delete C[r.mid]}),e.loadQ=0;var r,n=function(e){for(var r=e.deps||[],n=0;n<r.length;n++)(e=t[r[n].mid])&&(r[n]=e)};for(r in C)n(C[r]);c(X,n)},_e=function(e){for(d.trace("loader-finish-exec",[e.mid]),e.executed=5,e.defOrder=ve++,e.loadQ&&(ge(e),xe(e)),r=0;r<X.length;)X[r]===e?X.splice(r,1):r++;/^require\*/.test(e.mid)&&delete C[e.mid]},be=[],we=function(e,t){if(4===e.executed)return d.trace("loader-circular-dependency",[be.concat(e.mid).join("->")]),!e.def||t?ye:e.cjs&&e.cjs.exports;if(!e.executed){if(!e.def)return ye;var r,n=e.mid,i=e.deps||[],o=[],a=0;for(e.executed=4;r=i[a++];){if(r=r===pe?W(e):r===de?e.cjs.exports:r===me?e.cjs:we(r,t),r===ye)return e.executed=0,d.trace("loader-exec-module",["abort",n]),ye;o.push(r)}d.trace("loader-run-factory",[e.mid]);var u,n=e.def;if(g("config-dojo-loader-catches"))try{u=s(n)?n.apply(null,o):n}catch(c){T("error",e.result=f("factoryThrew",[e,c]))}else u=s(n)?n.apply(null,o):n;e.result=void 0===u&&e.cjs?e.cjs.exports:u,_e(e)}return e.result},Te=0,Ie=function(e){try{Te++,e()}catch(t){throw t}finally{Te--}te()&&T("idle",[])},ke=function(){Te||Ie(function(){for(var e,t,r=0;r<X.length;)e=ve,t=X[r],we(t),e!=ve?r=0:r++})};void 0===g("dojo-loader-eval-hint-url")&&g.add("dojo-loader-eval-hint-url",1);var Ee="function"==typeof e.fixupUrl?e.fixupUrl:function(e){return e+="",e+(A?(/\?/.test(e)?"&":"?")+A:"")},Se=function(e){var t=e.plugin;5!==t.executed||t.load||ge(t);var r=function(t){e.result=t,ee(e),_e(e),ke()};t.load?t.load(e.prid,e.req,r):t.loadQ?t.loadQ.push(e):(t.loadQ=[e],X.unshift(t),je(t))},Be=0,Pe=function(e,t){if(g("config-stripStrict")&&(e=e.replace(/(["'])use strict\1/g,"")),g("config-dojo-loader-catches"))try{e===Be?Be.call(null):d.eval(e,g("dojo-loader-eval-hint-url")?t.url:t.mid)}catch(r){T("error",f("evalModuleThrew",t))}else e===Be?Be.call(null):d.eval(e,g("dojo-loader-eval-hint-url")?t.url:t.mid)},je=function(e){var t=e.mid,r=e.url;if(!(e.executed||e.injected||K[t]||e.url&&(e.pack&&K[e.url]===e.pack||1==K[e.url])))if(Q(e),e.plugin)Se(e);else{var n=function(){if(Ae(e),2!==e.injected){if(g("dojo-enforceDefine"))return void T("error",f("noDefine",e));ee(e),l(e,he),d.trace("loader-define-nonmodule",[e.url])}ke()};(Be=L[t]||L["url:"+e.url])?(d.trace("loader-inject",["cache",e.mid,r]),Pe(Be,e),n()):(d.trace("loader-inject",["script",e.mid,r]),d.injectUrl(Ee(r),n,e))}},Ce=function(e,t,r){if(d.trace("loader-define-module",[e.mid,t]),2===e.injected)return T("error",f("multipleDefine",e)),e;l(e,{deps:t,def:r,cjs:{id:e.mid,uri:e.url,exports:e.result={},setExports:function(t){e.cjs.exports=t},config:function(){return e.config}}});for(var n=0;t[n];n++)t[n]=ce(t[n],e);return ee(e),s(r)||t.length||(e.result=r,_e(e)),e},Ae=function(e,t){for(var r,n,i=[];$.length;)n=$.shift(),t&&(n[0]=t.shift()),r=n[0]&&ce(n[0])||e,i.push([r,n[1],n[2]]);N(e),c(i,function(e){H(Ce.apply(null,e))})},Le=0,Me=n,Ne=n,Me=function(){Le&&clearTimeout(Le),Le=0},Ne=function(){Me(),d.waitms&&(Le=m.setTimeout(function(){Me(),T("error",f("timeout",K))},d.waitms))};d.log=function(){try{for(var e=0;e<arguments.length;e++)console.log(arguments[e])}catch(t){}},d.trace=n,G=function(e,t,r){var n=arguments.length,i=["require","exports","module"],o=[0,e,t];1==n?o=[0,s(e)?i:[],e]:2==n&&a(e)?o=[e,s(t)?i:[],t]:3==n&&(o=[e,t,r]),d.trace("loader-define",o.slice(0,2)),(n=o[0]&&ce(o[0]))&&!K[n.mid]?H(Ce(n,o[1],o[2])):(g("ie-event-behavior"),$.push(o))},G.amd={vendor:"dojotoolkit.org"},l(l(d,t.loaderPatch),e.loaderPatch),I("error",function(e){try{if(console.error(e),e instanceof Error){for(var t in e)console.log(t+":",e[t]);console.log(".")}}catch(r){}}),l(d,{uid:p,cache:L,packs:B}),m.define?T("error",f("defineAlreadyDefined",0)):(m.define=G,m.require=d,c(F,function(e){O(e)}),I=_.deps||e.deps||t.deps,_=_.callback||e.callback||t.callback,d.boot=I||_?[I||[],_]:0)}(this.dojoConfig||this.djConfig||this.require||{},{async:1,hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:".",name:"dojo"},{location:"../dijit",name:"dijit"},{location:"../dojox",name:"dojox"},{location:"../dgrid",main:"OnDemandGrid",name:"dgrid"},{location:"../dgrid1",main:"OnDemandGrid",name:"dgrid1"},{location:"../dstore",main:"Store",name:"dstore"},{location:"../put-selector",main:"put",name:"put-selector"},{location:"../xstyle",name:"xstyle"},{location:"../moment",main:"moment.js",name:"moment"},{location:"../esri",name:"esri"}]}),require({cache:{"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(e,t){t.add("bug-for-in-skips-shadowed",function(){for(var e in{toString:1})return 0;return 1});var r=t("bug-for-in-skips-shadowed")?"hasOwnProperty valueOf isPrototypeOf propertyIsEnumerable toLocaleString toString constructor".split(" "):[],n=r.length,i=function(t,r,n){n||(n=t[0]&&e.scopeMap[t[0]]?e.scopeMap[t.shift()][1]:e.global);try{for(var i=0;i<t.length;i++){var o=t[i];if(!(o in n)){if(!r)return;n[o]={}}n=n[o]}return n}catch(s){}},o=Object.prototype.toString,s=function(e,t,r){return(r||[]).concat(Array.prototype.slice.call(e,t||0))},a=/\{([^\}]+)\}/g,u={_extraNames:r,_mixin:function(e,i,o){var s,a,u,c={};for(s in i)a=i[s],s in e&&(e[s]===a||s in c&&c[s]===a)||(e[s]=o?o(a):a);if(t("bug-for-in-skips-shadowed")&&i)for(u=0;n>u;++u)s=r[u],a=i[s],s in e&&(e[s]===a||s in c&&c[s]===a)||(e[s]=o?o(a):a);return e},mixin:function(e,t){e||(e={});for(var r=1,n=arguments.length;n>r;r++)u._mixin(e,arguments[r]);return e},setObject:function(e,t,r){var n=e.split(".");return e=n.pop(),(r=i(n,!0,r))&&e?r[e]=t:void 0},getObject:function(e,t,r){return e?i(e.split("."),t,r):r},exists:function(e,t){return void 0!==u.getObject(e,!1,t)},isString:function(e){return"string"==typeof e||e instanceof String},isArray:Array.isArray||function(e){return"[object Array]"==o.call(e)},isFunction:function(e){return"[object Function]"===o.call(e)},isObject:function(e){return void 0!==e&&(null===e||"object"==typeof e||u.isArray(e)||u.isFunction(e))},isArrayLike:function(e){return!!e&&!u.isString(e)&&!u.isFunction(e)&&!(e.tagName&&"form"==e.tagName.toLowerCase())&&(u.isArray(e)||isFinite(e.length))},isAlien:function(e){return e&&!u.isFunction(e)&&/\{\s*\[native code\]\s*\}/.test(String(e))},extend:function(e,t){for(var r=1,n=arguments.length;n>r;r++)u._mixin(e.prototype,arguments[r]);return e},_hitchArgs:function(t,r){var n=u._toArray(arguments,2),i=u.isString(r);return function(){var o=u._toArray(arguments),s=i?(t||e.global)[r]:r;return s&&s.apply(t||this,n.concat(o))}},hitch:function(t,r){if(2<arguments.length)return u._hitchArgs.apply(e,arguments);if(r||(r=t,t=null),u.isString(r)){if(t=t||e.global,!t[r])throw['lang.hitch: scope["',r,'"] is null (scope="',t,'")'].join("");return function(){return t[r].apply(t,arguments||[])}}return t?function(){return r.apply(t,arguments||[])}:r},delegate:function(){function e(){}return function(t,r){e.prototype=t;var n=new e;return e.prototype=null,r&&u._mixin(n,r),n}}(),_toArray:t("ie")?function(){function e(e,t,r){for(r=r||[],t=t||0;t<e.length;t++)r.push(e[t]);return r}return function(t){return(t.item?e:s).apply(this,arguments)}}():s,partial:function(t){return u.hitch.apply(e,[null].concat(u._toArray(arguments)))},clone:function(e){if(!e||"object"!=typeof e||u.isFunction(e))return e;if(e.nodeType&&"cloneNode"in e)return e.cloneNode(!0);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);var t,r,n;if(u.isArray(e))for(t=[],r=0,n=e.length;n>r;++r)r in e&&(t[r]=u.clone(e[r]));else t=e.constructor?new e.constructor:{};return u._mixin(t,e,u.clone)},trim:String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(e,t,r){return e.replace(r||a,u.isFunction(t)?t:function(e,r){return u.getObject(r,!1,t)})}};return u.mixin(e,u),u})},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(e,t,r,n){var i,o=function(){return this}(),s={},a={},u={config:t,global:o,dijit:s,dojox:a},s={dojo:["dojo",u],dijit:["dijit",s],dojox:["dojox",a]};n=r.map&&r.map[n.id.match(/[^\/]+/)[0]];for(i in n)s[i]?s[i][0]=n[i]:s[i]=[n[i],{}];for(i in s)n=s[i],n[1]._scopeName=n[0],t.noGlobals||(o[n[0]]=n[1]);if(u.scopeMap=s,u.baseUrl=u.config.baseUrl=r.baseUrl,u.isAsync=r.async,u.locale=t.locale,o="$Rev: a1e2d9d $".match(/[0-9a-f]{7,}/),u.version={major:1,minor:12,patch:1,flag:"",revision:o?o[0]:NaN,toString:function(){var e=u.version;return e.major+"."+e.minor+"."+e.patch+e.flag+" ("+e.revision+")"}},e("csp-restrictions")||Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(u),u.exit=function(){},e.add("dojo-debug-messages",!!t.isDebug),u.deprecated=u.experimental=function(){},e("dojo-debug-messages")&&(u.deprecated=function(e,t,r){e="DEPRECATED: "+e,t&&(e+=" "+t),r&&(e+=" -- will be removed in version: "+r),console.warn(e)},u.experimental=function(e,t){var r="EXPERIMENTAL: "+e+" -- APIs subject to change without notice.";t&&(r+=" "+t),console.warn(r)}),t.modulePaths){u.deprecated("dojo.modulePaths","use paths configuration"),e={};for(i in t.modulePaths)e[i.replace(/\./g,"/")]=t.modulePaths[i];r({paths:e})}return u.moduleUrl=function(e,t){u.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var n=null;return e&&(n=r.toUrl(e.replace(/\./g,"/")+(t?"/"+t:"")+"/*.*").replace(/\/\*\.\*/,"")+(t?"":"/")),n},u._hasResource={},u})},"dojo/has":function(){define(["require","module"],function(e,t){var r=e.has||function(){};return r.clearElement=function(e){return e.innerHTML="",e},r.normalize=function(e,t){var n=e.match(/[\?:]|[^:\?]*/g),i=0,o=function(e){var t=n[i++];return":"==t?0:"?"==n[i++]?!e&&r(t)?o():(o(!0),o(e)):t||0};return(e=o())&&t(e)},r.load=function(e,t,r){e?t([e],r):r()},r})},"dojo/_base/config":function(){define(["../has","require"],function(e,t){var r,n={},i=t.rawConfig;for(r in i)n[r]=i[r];return!n.locale&&"undefined"!=typeof navigator&&(i=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language||navigator.userLanguage)&&(n.locale=i.toLowerCase()),n})},"dojo/sniff":function(){define(["./has"],function(e){return e})}}}),function(){var e=this.require;e({cache:{}}),!e.async&&e(["dojo"]),e.boot&&e.apply(null,e.boot)}(),require({cache:{"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has","./kernel"],function(e,t,r,n){var i=function(){return this}(),o={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:!0,zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,zoomRate:25,panDuration:350,panRate:25,logoLink:"http://www.esri.com"},autoSpatialIndexing:i.Worker&&!1,io:{errorHandler:function(e,r){t.publish("esri.Error",[e])},proxyUrl:null,alwaysUseProxy:!1,useCors:"with-credentials",corsEnabledServers:"server.arcgisonline.com services.arcgisonline.com www.arcgis.com tiles.arcgis.com tiles1.arcgis.com tiles2.arcgis.com tiles3.arcgis.com tiles4.arcgis.com basemaps.arcgis.com elevation3d.arcgis.com services.arcgis.com services1.arcgis.com services2.arcgis.com services3.arcgis.com services4.arcgis.com services5.arcgis.com services6.arcgis.com services7.arcgis.com static.arcgis.com utility.arcgisonline.com geocode.arcgis.com geoenrich.arcgis.com qaext.arcgis.com tilesqa.arcgis.com servicesqa.arcgis.com servicesqa1.arcgis.com servicesqa2.arcgis.com servicesqa3.arcgis.com geocodeqa.arcgis.com geoenrichqa.arcgis.com dev.arcgis.com devext.arcgis.com staticdev.arcgis.com tilesdevext.arcgis.com elevation3ddev.arcgis.com servicesdev.arcgis.com servicesdev1.arcgis.com servicesdev2.arcgis.com servicesdev3.arcgis.com geocodedev.arcgis.com geoenrichdev.arcgis.com basemapsdev.arcgis.com".split(" "),corsDetection:i.cordova?!1:!0,corsStatus:{},webTierAuthServers:[],proxyRules:[],postLength:2e3,timeout:6e4,useWorkers:"on-request",maxRequestWorkers:5,httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")},workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}}}};return r("extend-esri")&&(n.config=o),e.noGlobals||(i.esriConfig=o),o})},"dojo/topic":function(){define(["./Evented"],function(e){var t=new e;return{publish:function(e,r){return t.emit.apply(t,arguments)},subscribe:function(e,r){return t.on.apply(t,arguments)}}})},"dojo/Evented":function(){define(["./aspect","./on"],function(e,t){function r(){}var n=e.after;return r.prototype={on:function(e,r){return t.parse(this,e,r,function(e,t){return n(e,"on"+t,r,!0)})},emit:function(e,r){var n=[this];return n.push.apply(n,arguments),t.emit.apply(t,n)}},r})},"dojo/aspect":function(){define([],function(){function e(e,t,r,n){var i,o=e[t],s="around"==t;if(s){var a=r(function(){return o.advice(this,arguments)});i={remove:function(){a&&(a=e=r=null)},advice:function(e,t){return a?a.apply(e,t):o.advice(e,t)}}}else i={remove:function(){if(i.advice){var n=i.previous,o=i.next;o||n?(n?n.next=o:e[t]=o,o&&(o.previous=n)):delete e[t],e=r=i.advice=null}},id:e.nextId++,advice:r,receiveArguments:n};if(o&&!s)if("after"==t){for(;o.next&&(o=o.next););o.next=i,i.previous=o}else"before"==t&&(e[t]=i,i.next=o,o.previous=i);else e[t]=i;return i}function t(t){return function(n,i,o,s){var a,u=n[i];return u&&u.target==n||(n[i]=a=function(){for(var e=a.nextId,t=arguments,n=a.before;n;)n.advice&&(t=n.advice.apply(this,t)||t),n=n.next;if(a.around)var i=a.around.advice(this,t);for(n=a.after;n&&n.id<e;){if(n.advice)if(n.receiveArguments)var o=n.advice.apply(this,t),i=o===r?i:o;else i=n.advice.call(this,i,t);n=n.next}return i},u&&(a.around={advice:function(e,t){return u.apply(e,t)}}),a.target=n,a.nextId=a.nextId||0),n=e(a||u,t,o,s),o=null,n}}var r,n=t("after"),i=t("before"),o=t("around");return{before:i,around:o,after:n}})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./sniff"],function(e,t,r){function n(e,t,n,i,o){if(i=t.match(/(.*):(.*)/))return t=i[2],i=i[1],s.selector(i,t).call(o,e,n);if(r("touch")&&(a.test(t)&&(n=b(n)),r("event-orientationchange")||"orientationchange"!=t||(t="resize",e=window,n=b(n))),h&&(n=h(n)),e.addEventListener){var u=t in l,c=u?l[t]:t;return e.addEventListener(c,n,u),{remove:function(){e.removeEventListener(c,n,u)}}}if(y&&e.attachEvent)return y(e,"on"+t,n);throw Error("Target must be an event emitter")}function i(){this.cancelable=!1,this.defaultPrevented=!0}function o(){this.bubbles=!1}var s=function(e,t,r,i){return"function"!=typeof e.on||"function"==typeof t||e.nodeType?s.parse(e,t,r,n,i,this):e.on(t,r)};s.pausable=function(e,t,r,n){var i;return e=s(e,t,function(){return i?void 0:r.apply(this,arguments)},n),e.pause=function(){i=!0},e.resume=function(){i=!1},e},s.once=function(e,t,r,n){var i=s(e,t,function(){return i.remove(),r.apply(this,arguments)});return i},s.parse=function(e,t,r,n,i,o){var a;if(t.call)return t.call(o,e,r);if(t instanceof Array?a=t:-1<t.indexOf(",")&&(a=t.split(/\s*,\s*/)),a){var u=[];t=0;for(var c;c=a[t++];)u.push(s.parse(e,c,r,n,i,o));return u.remove=function(){for(var e=0;e<u.length;e++)u[e].remove()},u}return n(e,t,r,i,o)};var a=/^touch/;s.matches=function(e,r,n,i,o){for(o=o&&"function"==typeof o.matches?o:t.query,i=!1!==i,1!=e.nodeType&&(e=e.parentNode);!o.matches(e,r,n);)if(e==n||!1===i||!(e=e.parentNode)||1!=e.nodeType)return!1;return e},s.selector=function(e,t,r){return function(n,i){function o(t){return s.matches(t,e,n,r,a)}var a="function"==typeof e?{matches:e}:this,u=t.bubble;return u?s(n,u(o),i):s(n,t,function(e){var t=o(e.target);return t?(e.selectorTarget=t,i.call(t,e)):void 0})}};var u=[].slice,c=s.emit=function(e,t,r){var n=u.call(arguments,2),s="on"+t;if("parentNode"in e){var a,c=n[0]={};for(a in r)c[a]=r[a];c.preventDefault=i,c.stopPropagation=o,c.target=e,c.type=t,r=c}do e[s]&&e[s].apply(e,n);while(r&&r.bubbles&&(e=e.parentNode));return r&&r.cancelable&&r},l=r("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!r("event-stopimmediatepropagation"))var f=function(){this.modified=this.immediatelyStopped=!0},h=function(e){return function(t){return t.immediatelyStopped?void 0:(t.stopImmediatePropagation=f,e.apply(this,arguments))}};if(r("dom-addeventlistener"))s.emit=function(e,t,r){if(e.dispatchEvent&&document.createEvent){var n=(e.ownerDocument||document).createEvent("HTMLEvents");n.initEvent(t,!!r.bubbles,!!r.cancelable);for(var i in r)i in n||(n[i]=r[i]);return e.dispatchEvent(n)&&n}return c.apply(s,arguments)};else{s._fixEvent=function(e,t){if(e||(e=(t&&(t.ownerDocument||t.document||t).parentWindow||window).event),!e)return e;try{p&&e.type==p.type&&e.srcElement==p.target&&(e=p)}catch(r){}if(!e.target)switch(e.target=e.srcElement,e.currentTarget=t||e.srcElement,"mouseover"==e.type&&(e.relatedTarget=e.fromElement),"mouseout"==e.type&&(e.relatedTarget=e.toElement),e.stopPropagation||(e.stopPropagation=v,e.preventDefault=g),e.type){case"keypress":var n="charCode"in e?e.charCode:e.keyCode;10==n?(n=0,e.keyCode=13):13==n||27==n?n=0:3==n&&(n=99),e.charCode=n,n=e,n.keyChar=n.charCode?String.fromCharCode(n.charCode):"",n.charOrCode=n.keyChar||n.keyCode}return e};var p,d=function(e){this.handle=e};d.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var m=function(e){return function(t){t=s._fixEvent(t,this);var r=e.call(this,t);return t.modified&&(p||setTimeout(function(){p=null}),p=t),r}},y=function(t,n,i){if(i=m(i),((t.ownerDocument?t.ownerDocument.parentWindow:t.parentWindow||t.window||window)!=top||5.8>r("jscript"))&&!r("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var o=t[n];if(!o||!o.listeners){var s=o,o=Function("event","var callee = arguments.callee; for(var i = 0; i<callee.listeners.length; i++){var listener = _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");o.listeners=[],t[n]=o,o.global=this,s&&o.listeners.push(_dojoIEListeners_.push(s)-1)}return o.listeners.push(t=o.global._dojoIEListeners_.push(i)-1),new d(t)}return e.after(t,n,i,!0)},v=function(){this.cancelBubble=!0},g=s._preventDefault=function(){if(this.bubbledKeyCode=this.keyCode,this.ctrlKey)try{this.keyCode=0}catch(e){}this.defaultPrevented=!0,this.returnValue=!1,this.modified=!0}}if(r("touch"))var x=function(){},_=window.orientation,b=function(e){return function(t){var n=t.corrected;if(!n){var i=t.type;try{delete t.type}catch(o){}if(t.type){if(r("touch-can-modify-event-delegate"))x.prototype=t,n=new x;else{var s,n={};for(s in t)n[s]=t[s]}n.preventDefault=function(){t.preventDefault()},n.stopPropagation=function(){t.stopPropagation()}}else n=t,n.type=i;if(t.corrected=n,"resize"==i)return _==window.orientation?null:(_=window.orientation,n.type="orientationchange",e.call(this,n));"rotation"in n||(n.rotation=0,n.scale=1);var a,i=n.changedTouches[0];for(a in i)delete n[a],n[a]=i[a]}return e.call(this,n)}};return s})},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(e,t,r){var n=function(){return this}(),i=n.location,o=i.pathname,s=i.protocol,i={version:"3.20",_appBaseUrl:s+"//"+i.host+o.substring(0,o.lastIndexOf(o.split("/")[o.split("/").length-1]))};return t.noGlobals||(n.esri=i),e.isAsync||r.add("extend-esri",1),(i.dijit=i.dijit||{})._arcgisUrl=("http:"===s||"https:"===s?s:"http:")+"//www.arcgis.com/sharing/rest",i})},"esri/layers/vectorTiles/core/workers/WorkerConnection":function(){define(["require","exports","./WorkerProxy"],function(e,t,r){return function(){function e(e,t,n){this.id=n,this._target="function"==typeof e?new e(this):e,this.proxy=new r(this._target,t,this)}return e.prototype.invoke=function(e,t,r){return this.proxy.invoke(e,t,r,this.id)},e}()})},"esri/layers/vectorTiles/core/workers/WorkerProxy":function(){define(["require","exports","dojo/Deferred"],function(e,t,r){return function(){function e(e,t,r){this.parentModule=e,this.worker=t,this.connection=r,this.msgCount=0,this.outgoingJobs={},this.incomingJobs={},this.msgCount=0,this.outgoingJobs={},this.incomingJobs={}}return e.prototype.invoke=function(e,t,n,i){var o=this,s=++this.msgCount,a=new r(function(e){o.worker.postMessage({type:"<cancel>",id:s,connection:i,data:{reason:e}}),o.outgoingJobs[s]&&delete o.outgoingJobs[s]});return this.outgoingJobs[s]=a,this.worker.postMessage({type:e,id:s,connection:i,data:t},n),a.promise},e.prototype.message=function(e){var t=this;if(e&&e.data){var r=e.data.type;if(r){var n=e.data,i=e.data.id,o=e.data.connection;"<response>"===r&&i?(e=this.outgoingJobs[i])&&(delete this.outgoingJobs[i],n.error?e.reject(n.error):e.resolve(n.data)):"<cancel>"===r&&i?(e=this.incomingJobs[i])&&e.cancel(n.data.reason||"cancel"):(e=this.parentModule[r],"function"==typeof e&&(n=e.call(this.parentModule,n.data,this.connection),this.incomingJobs[i]=n,n.then(function(e){t.worker.postMessage({type:"<response>",id:i,connection:o,data:e?e.data:null},e?e.buffers:[])}).otherwise(function(e){e||(e="Error encountered at method "+r),t.worker.postMessage({type:"<response>",id:i,connection:o,data:null,error:e})}).always(function(){delete t.incomingJobs[i]})))}}},e}()})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise","./promise/instrumentation"],function(e,t,r,n,i){var o=Object.freeze||function(){},s=function(e,t,r,n,i){for(2===t&&l.instrumentRejected&&0===e.length&&l.instrumentRejected(r,!1,n,i),i=0;i<e.length;i++)a(e[i],t,r,n)},a=function(e,t,r,n){var i=e[t],o=e.deferred;if(i)try{var s=i(r);if(0===t)"undefined"!=typeof s&&c(o,t,s);else{if(s&&"function"==typeof s.then)return e.cancel=s.cancel,void s.then(u(o,1),u(o,2),u(o,0));c(o,1,s)}}catch(a){c(o,2,a)}else c(o,t,r);2===t&&l.instrumentRejected&&l.instrumentRejected(r,!!i,n,o.promise)},u=function(e,t){return function(r){c(e,t,r)}},c=function(e,t,r){if(!e.isCanceled())switch(t){case 0:e.progress(r);break;case 1:e.resolve(r);break;case 2:e.reject(r)}},l=function(e){var t,i,u,c=this.promise=new n,f=this,h=!1,p=[];Error.captureStackTrace&&(Error.captureStackTrace(f,l),Error.captureStackTrace(c,l)),this.isResolved=c.isResolved=function(){return 1===t},this.isRejected=c.isRejected=function(){return 2===t},this.isFulfilled=c.isFulfilled=function(){return!!t},this.isCanceled=c.isCanceled=function(){return h},this.progress=function(e,r){if(t){if(!0===r)throw Error("This deferred has already been fulfilled.");return c}return s(p,0,e,null,f),c},this.resolve=function(e,r){if(t){if(!0===r)throw Error("This deferred has already been fulfilled.");return c}return s(p,t=1,i=e,null,f),p=null,c};var d=this.reject=function(e,r){if(t){if(!0===r)throw Error("This deferred has already been fulfilled.");return c}return Error.captureStackTrace&&Error.captureStackTrace(u={},d),s(p,t=2,i=e,u,f),p=null,c};this.then=c.then=function(e,r,n){var o=[n,e,r];return o.cancel=c.cancel,o.deferred=new l(function(e){return o.cancel&&o.cancel(e)}),t&&!p?a(o,t,i,u):p.push(o),o.deferred.promise},this.cancel=c.cancel=function(n,o){if(t){if(!0===o)throw Error("This deferred has already been fulfilled.")}else{if(e){var s=e(n);n="undefined"==typeof s?n:s}if(h=!0,!t)return"undefined"==typeof n&&(n=new r),d(n),n;if(2===t&&i===n)return n}},o(c)};return l.prototype.toString=function(){return"[object Deferred]"},i&&i(l),l})},"dojo/errors/CancelError":function(){define(["./create"],function(e){return e("CancelError",null,null,{dojoType:"cancel",log:!1})})},"dojo/errors/create":function(){define(["../_base/lang"],function(e){return function(t,r,n,i){n=n||Error;var o=function(e){if(n===Error){Error.captureStackTrace&&Error.captureStackTrace(this,o);var t,i=Error.call(this,e);for(t in i)i.hasOwnProperty(t)&&(this[t]=i[t]);this.message=e,this.stack=i.stack}else n.apply(this,arguments);r&&r.apply(this,arguments)};return o.prototype=e.delegate(n.prototype,i),o.prototype.name=t,o.prototype.constructor=o}})},"dojo/promise/Promise":function(){define(["../_base/lang"],function(e){function t(){throw new TypeError("abstract")}return e.extend(function(){},{then:function(e,r,n){t()},cancel:function(e,r){t()},isResolved:function(){t()},isRejected:function(){t()},isFulfilled:function(){t()},isCanceled:function(){t()},always:function(e){return this.then(e,e)},otherwise:function(e){return this.then(null,e)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"dojo/promise/instrumentation":function(){define(["./tracer","../has","../_base/lang","../_base/array"],function(e,t,r,n){function i(e,t,r){if(!e||!1!==e.log){var n="";e&&e.stack&&(n+=e.stack),t&&t.stack&&(n+="\n    ----------------------------------------\n    rejected"+t.stack.split("\n").slice(1).join("\n").replace(/^\s+/," ")),r&&r.stack&&(n+="\n    ----------------------------------------\n"+r.stack),console.error(e,n)}}function o(e,t,r,n){t||i(e,r,n)}function s(e,t,r,i){n.some(u,function(r){return r.error===e?(t&&(r.handled=!0),!0):void 0})||u.push({error:e,rejection:r,handled:t,deferred:i,timestamp:(new Date).getTime()}),c||(c=setTimeout(a,l))}function a(){var e=(new Date).getTime(),t=e-l;u=n.filter(u,function(e){return e.timestamp<t?(e.handled||i(e.error,e.rejection,e.deferred),!1):!0}),c=u.length?setTimeout(a,u[0].timestamp+l-e):!1}t.add("config-useDeferredInstrumentation","report-unhandled-rejections");var u=[],c=!1,l=1e3;return function(n){
var i=t("config-useDeferredInstrumentation");if(i){e.on("resolved",r.hitch(console,"log","resolved")),e.on("rejected",r.hitch(console,"log","rejected")),e.on("progress",r.hitch(console,"log","progress"));var a=[];if("string"==typeof i&&(a=i.split(","),i=a.shift()),"report-rejections"===i)n.instrumentRejected=o;else{if("report-unhandled-rejections"!==i&&!0!==i&&1!==i)throw Error("Unsupported instrumentation usage <"+i+">");n.instrumentRejected=s,l=parseInt(a[0],10)||l}}}})},"dojo/promise/tracer":function(){define(["../_base/lang","./Promise","../Evented"],function(e,t,r){function n(e){setTimeout(function(){o.apply(i,e)},0)}var i=new r,o=i.emit;return i.emit=null,t.prototype.trace=function(){var t=e._toArray(arguments);return this.then(function(e){n(["resolved",e].concat(t))},function(e){n(["rejected",e].concat(t))},function(e){n(["progress",e].concat(t))}),this},t.prototype.traceRejected=function(){var t=e._toArray(arguments);return this.otherwise(function(e){n(["rejected",e].concat(t))}),this},i})},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(e,t,r){function n(e){return a[e]=new Function("item","index","array",e)}function i(e){var t=!e;return function(r,i,o){var s,u=0,c=r&&r.length||0;if(c&&"string"==typeof r&&(r=r.split("")),"string"==typeof i&&(i=a[i]||n(i)),o){for(;c>u;++u)if(s=!i.call(o,r[u],u,r),e^s)return!s}else for(;c>u;++u)if(s=!i(r[u],u,r),e^s)return!s;return t}}function o(e){var t=1,r=0,n=0;return e||(t=r=n=-1),function(i,o,a,c){if(c&&t>0)return u.lastIndexOf(i,o,a);c=i&&i.length||0;var l=e?c+n:r;for(a===s?a=e?r:c+n:0>a?(a=c+a,0>a&&(a=r)):a=a>=c?c+n:a,c&&"string"==typeof i&&(i=i.split(""));a!=l;a+=t)if(i[a]==o)return a;return-1}}var s,a={},u={every:i(!1),some:i(!0),indexOf:o(!0),lastIndexOf:o(!1),forEach:function(e,t,r){var i=0,o=e&&e.length||0;if(o&&"string"==typeof e&&(e=e.split("")),"string"==typeof t&&(t=a[t]||n(t)),r)for(;o>i;++i)t.call(r,e[i],i,e);else for(;o>i;++i)t(e[i],i,e)},map:function(e,t,r,i){var o=0,s=e&&e.length||0;if(i=new(i||Array)(s),s&&"string"==typeof e&&(e=e.split("")),"string"==typeof t&&(t=a[t]||n(t)),r)for(;s>o;++o)i[o]=t.call(r,e[o],o,e);else for(;s>o;++o)i[o]=t(e[o],o,e);return i},filter:function(e,t,r){var i,o=0,s=e&&e.length||0,u=[];if(s&&"string"==typeof e&&(e=e.split("")),"string"==typeof t&&(t=a[t]||n(t)),r)for(;s>o;++o)i=e[o],t.call(r,i,o,e)&&u.push(i);else for(;s>o;++o)i=e[o],t(i,o,e)&&u.push(i);return u},clearCache:function(){a={}}};return r.mixin(e,u),u})},"esri/layers/vectorTiles/views/vectorTiles/WorkerTileHandler":function(){define("require exports dojo/Deferred ../../core/promiseUtils ./WorkerTile ./style/StyleRepository".split(" "),function(e,t,r,n,i,o){return function(){function e(){this._tiles={},this._spriteInfo={},this._glyphInfo={}}return e.prototype.reset=function(){var e=new r;this._spriteInfo={},this._glyphInfo={};var t,n=this._tiles;for(t in n){var i=n[t];i&&i.setObsolete()}return this._tiles={},e.resolve(),e.promise},e.prototype.getLayers=function(){return this._layers},e.prototype.setLayers=function(e){return this._layers=new o(e).layers,n.resolve({data:""})},e.prototype.getTile=function(e,t){var r=this,o=e.key,s=new i(e.key,e.refKey,this,e.rotation),a=e.cacheTile;return t.invoke("fetchTileData",e.refKey).then(function(e){return s.setDataAndParse(e.protobuff,t).then(function(e){return a&&6!==s.status&&(r._tiles[o]=s),e}).otherwise(function(e){return s.setObsolete(),n.reject(e)})}).otherwise(function(e){return s.setObsolete(),r._tiles[s.tileKey]&&delete r._tiles[s.tileKey],n.reject(e)}).always(function(e){return e})},e.prototype.update=function(e){var t=this._tiles[e.key];return t?t.updateSymbols(e.rotation):n.reject()},e.prototype.destructTileData=function(e){return this._tiles[e.key]&&delete this._tiles[e.key],n.resolve()},e.prototype.fetchSprites=function(e,t){var r=[],i=this._spriteInfo;return e.forEach(function(e){void 0===i[e]&&r.push(e)}),0===r.length?n.resolve():t.invoke("getSprites",{sprites:r}).then(function(e){e=e.spriteItems;for(var t in e)i[t]=e[t]})},e.prototype.getSpriteItems=function(){return this._spriteInfo},e.prototype.fetchGlyphs=function(e,t,r,i){var o=[],s=this._glyphInfo[t];return s?r.forEach(function(e){s[e]||o.push(e)}):(s=this._glyphInfo[t]=[],r.forEach(function(e){return o.push(e)})),0===o.length?n.resolve():i.invoke("getGlyphs",{tileID:e,font:t,codePoints:o}).then(function(e){e=e.glyphItems;for(var t in e)s[t]=e[t]})},e.prototype.getGlyphItems=function(e){return this._glyphInfo[e]},e}()})},"esri/layers/vectorTiles/core/promiseUtils":function(){define(["require","exports","dojo/Deferred","./Error"],function(e,t,r,n){function i(e){if(e){if("function"!=typeof e.forEach){var t=Object.keys(e),n=t.map(function(t){return e[t]});return i(n).then(function(e){var r={};return t.forEach(function(t,n){return r[t]=e[n]}),r})}var o=new r,s=[],a=e.length;return 0===a&&o.resolve(s),e.forEach(function(e){var t={promise:e};s.push(t),e.then(function(e){t.value=e}).otherwise(function(e){t.error=e}).then(function(){--a,0===a&&o.resolve(s)})}),o.promise}}t.eachAlways=i,t.create=function(e){var t=new r;return e(function(e){return void 0===e&&(e=null),t.resolve(e)},t.reject),t.promise},t.reject=function(e){var t=new r;return t.reject(e),t.promise},t.resolve=function(e){void 0===e&&(e=null);var t=new r;return t.resolve(e),t.promise},t.after=function(e,t){void 0===t&&(t=null);var n=0,i=new r(function(){n&&(clearTimeout(n),n=0)}),n=setTimeout(function(){i.resolve(t)},e);return i.promise},t.timeout=function(e,t,i){var o=0,s=new r(e.cancel);return e.then(function(e){s.isFulfilled()||(s.resolve(e),o&&(clearTimeout(o),o=0))}),e.otherwise(function(e){s.isFulfilled()||(s.reject(e),o&&(clearTimeout(o),o=0))}),o=setTimeout(function(){var e=i||new n("promiseUtils:timeout","The wrapped promise did not resolve within "+t+" ms");s.reject(e)},t),s.promise},t.wrapCallback=function(e){var t=!1,n=new r(function(){return t=!0});return e(function(e){t||n.resolve(e)}),n.promise}})},"esri/layers/vectorTiles/core/Error":function(){define(["require","exports","./tsSupport/extendsHelper","./tsSupport/decorateHelper","./Message"],function(e,t,r,n,i){return e=function(e){function t(r,n,i){var o=e.call(this,r,n,i)||this;return o instanceof t?o:new t(r,n,i)}return r(t,e),t}(i),e.prototype.type="error",e})},"esri/layers/vectorTiles/core/tsSupport/extendsHelper":function(){define([],function(){return function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}})},"esri/layers/vectorTiles/core/tsSupport/decorateHelper":function(){define([],function(){return function(e,t,r,n){var i,o=arguments.length,s=3>o?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(3>o?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}})},"esri/layers/vectorTiles/core/Message":function(){define(["require","exports","./tsSupport/extendsHelper","./tsSupport/decorateHelper","dojo/string"],function(e,t,r,n,i){return function(){function e(t,r,n){this instanceof e&&(this.name=t,this.message=r&&i.substitute(r,n,function(e){return null==e?"":e})||"",this.details=n)}return e.prototype.toString=function(){return"["+this.name+"]: "+this.message},e}()})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(e,t){var r=/[&<>'"\/]/g,n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},i={};return t.setObject("dojo.string",i),i.escape=function(e){return e?e.replace(r,function(e){return n[e]}):""},i.rep=function(e,t){if(0>=t||!e)return"";for(var r=[];1&t&&r.push(e),t>>=1;)e+=e;return r.join("")},i.pad=function(e,t,r,n){return r||(r="0"),e=String(e),t=i.rep(r,Math.ceil((t-e.length)/r.length)),n?e+t:t+e},i.substitute=function(r,n,i,o){return o=o||e.global,i=i?t.hitch(o,i):function(e){return e},r.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(e,r,s){if(""==r)return"$";if(e=t.getObject(r,!1,n),s&&(e=t.getObject(s,!1,o).call(o,e,r)),s=i(e,r),"undefined"==typeof s)throw Error('string.substitute could not find key "'+r+'" in template');return s.toString()})},i.trim=String.prototype.trim?t.trim:function(e){e=e.replace(/^\s+/,"");for(var t=e.length-1;t>=0;t--)if(/\S/.test(e.charAt(t))){e=e.substring(0,t+1);break}return e},i})},"esri/layers/vectorTiles/views/vectorTiles/WorkerTile":function(){define("require exports dojo/Deferred ../../core/promiseUtils ../../core/executeAsync ./VertexMemoryBuffer ./IndexMemoryBuffer ./TileParser ./BackgroundBucket ./FillBucket ./LineBucket ./SymbolBucket ./Placement ./GeometryUtils".split(" "),function(e,t,r,n,i,o,s,a,u,c,l,f,h,p){return function(){function e(e,t,r,n){void 0===n&&(n=0),this.rotation=0,this._symbolBuckets=[],this.tileKey=e,this.refKey=t,this._workerTileHandler=r,this.status=0,this.rotation=n,this.placementEngine=new h.PlacementEngine(p.C_DEG_TO_RAD*n)}return e.prototype.setDataAndParse=function(e,t){var n=this;this.polygonVertexBuffer=new o.PolygonMemoryBuffer,this.polygonOutlineVertexBuffer=new o.PolygonOutlineMemoryBuffer,this.polygonIndexBuffer=new s.TriangleElementMemoryBuffer,this.polygonOutlineIndexBuffer=new s.TriangleElementMemoryBuffer,this.lineVertexBuffer=new o.LineMemoryBuffer,this.lineIndexBuffer=new s.TriangleElementMemoryBuffer,this.lineJoinVertexBuffer=new o.LineJoinMemoryBuffer,this.markerVertexBuffer=new o.SymbolMemoryBuffer,this.markerIndexBuffer=new s.TriangleElementMemoryBuffer,this.textVertexBuffer=new o.SymbolMemoryBuffer,this.textIndexBuffer=new s.TriangleElementMemoryBuffer;var i=new r(function(e){n.status=6});return this._parse(e,t).then(function(e){n.placementEngine=null;for(var t=new Uint32Array([2,n.polygonVertexBuffer.sizeInBytes,3,n.polygonOutlineVertexBuffer.sizeInBytes,6,n.polygonIndexBuffer.sizeInBytes,7,n.polygonOutlineIndexBuffer.sizeInBytes,0,n.lineVertexBuffer.sizeInBytes,8,n.lineIndexBuffer.sizeInBytes,1,n.lineJoinVertexBuffer.sizeInBytes,4,n.markerVertexBuffer.sizeInBytes,9,n.markerIndexBuffer.sizeInBytes,5,n.textVertexBuffer.sizeInBytes,10,n.textIndexBuffer.sizeInBytes]),r=[],o=e.length,s=0;o>s;s++){var a=e[s];a instanceof c?(r.push(a.layerIndex),r.push(1),r.push(a.polygonIndexStart),r.push(a.polygonIndexCount),r.push(a.polygonOutlineIndexStart),r.push(a.polygonOutlineIndexCount)):a instanceof l?(r.push(a.layerIndex),r.push(2),r.push(a.triangleIndexStart),r.push(a.triangleIndexCount),r.push(a.connectorStart),r.push(a.connectorCount)):a instanceof f?(r.push(a.layerIndex),r.push(3),r.push(0===a.textIndexCount?0:a.textIndexStart),r.push(a.textIndexCount),r.push(a.sdfMarker?1:0),a=a.markerPageMap,r.push(a.size),a.forEach(function(e,t){r.push(t),r.push(e[0]),r.push(e[1])})):a instanceof u&&(r.push(a.layerIndex),r.push(0))}e=new Uint32Array(r);var o=n.polygonVertexBuffer.toBuffer(),s=n.polygonOutlineVertexBuffer.toBuffer(),a=n.polygonIndexBuffer.toBuffer(),h=n.polygonOutlineIndexBuffer.toBuffer(),p=n.lineVertexBuffer.toBuffer(),d=n.lineIndexBuffer.toBuffer(),m=n.lineJoinVertexBuffer.toBuffer(),y=n.markerVertexBuffer.toBuffer(),v=n.markerIndexBuffer.toBuffer(),g=n.textVertexBuffer.toBuffer(),x=n.textIndexBuffer.toBuffer();n.placementEngine=null,n.polygonVertexBuffer=null,n.polygonIndexBuffer=null,n.polygonOutlineVertexBuffer=null,n.polygonOutlineIndexBuffer=null,n.lineVertexBuffer=null,n.lineIndexBuffer=null,n.lineJoinVertexBuffer=null,i.resolve({data:{bufferDataInfo:t.buffer,bucketDataInfo:e.buffer,bufferData:[o,s,a,h,p,d,m,y,v,g,x]},buffers:[o,a,s,h,p,d,m,y,v,g,x,t.buffer,e.buffer]})}),i.promise},e.prototype.addBucket=function(e){this._symbolBuckets.push(e)},e.prototype.updateSymbols=function(e){var t=this,r=this._symbolBuckets;if(!r)return n.resolve({data:null});this.rotation=e;var a=new h.PlacementEngine(e/256*360*p.C_DEG_TO_RAD),u=new o.SymbolMemoryBuffer,c=new s.TriangleElementMemoryBuffer,l=new o.SymbolMemoryBuffer,f=new s.TriangleElementMemoryBuffer,d=[],m=r.length,y=0;return i(function(){if(6===t.status)return!0;if(m>y){var e=r[y++].copy(u,c,l,f,a);e&&(d.push(e),e.updateSymbols())}return y>=m},5).then(function(){if(6===t.status||0===u.sizeInBytes&&0===c.sizeInBytes&&0===l.sizeInBytes&&0===f.sizeInBytes)return{data:null};var e=new Uint32Array([4,u.sizeInBytes,9,c.sizeInBytes,5,l.sizeInBytes,10,f.sizeInBytes]),r=[];m=d.length;for(var n=0;m>n;n++){var i=d[n];r.push(i.layerIndex),r.push(3),r.push(0===i.textIndexCount?0:i.textIndexStart),r.push(i.textIndexCount),r.push(i.sdfMarker?1:0),i=i.markerPageMap,r.push(i.size),i.forEach(function(e,t){r.push(t),r.push(e[0]),r.push(e[1])})}var n=new Uint32Array(r),i=u.toBuffer(),o=c.toBuffer(),s=l.toBuffer(),a=f.toBuffer();return{data:{bufferDataInfo:e.buffer,bucketDataInfo:n.buffer,bufferData:[i,o,s,a]},buffers:[i,o,s,a,e.buffer,n.buffer]}}).otherwise(function(e){return n.resolve({data:null})})},e.prototype.setObsolete=function(){this.status=6},e.prototype.getLayers=function(){return this._workerTileHandler.getLayers()},e.prototype.getWorkerTileHandler=function(){return this._workerTileHandler},e.prototype._parse=function(e,t){return e&&0!==e.byteLength?new a(e,this,t).parse():n.resolve([])},e}()})},"esri/layers/vectorTiles/core/executeAsync":function(){define(["require","exports","dojo/Deferred","./now"],function(e,t,r,n){return function(e,t){var i;(!t||0>=t)&&(t=500);var o=new r(function(){i&&clearTimeout(i)}),s=function(){if(!o.isFulfilled()){for(var r=n(),a=!1;!a&&n()-r<t;)a=!0===e();a?o.resolve():i=setTimeout(s,0)}};return i=setTimeout(s,0),o.promise}})},"esri/layers/vectorTiles/core/now":function(){define(["require","exports","./global"],function(e,t,r){return function(){var e=r.performance||{};if(e.now)return function(){return e.now()};if(e.webkitNow)return function(){return e.webkitNow()};if(e.mozNow)return function(){return e.mozNow()};if(e.msNow)return function(){return e.msNow()};if(e.oNow)return function(){return e.oNow()};var t;return t=e.timing&&e.timing.navigationStart?e.timing.navigationStart:Date.now(),function(){return Date.now()-t}}()})},"esri/layers/vectorTiles/core/global":function(){define(["require","exports"],function(e,t){return"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{}})},"esri/layers/vectorTiles/views/vectorTiles/VertexMemoryBuffer":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./MemoryBuffer ./GeometryUtils".split(" "),function(e,t,r,n,i,o){e=function(e){function t(){return e.call(this,12)||this}return r(t,e),t.prototype.add=function(e,t,r,n,o,s,a){var u=this.array,c=this.index;return e=i.i1616to32(e,t),u.push(e),e=i.i8888to32(Math.round(31*r),Math.round(31*n),o,s),u.push(e),e=i.i1616to32(a,0),u.push(e),c},t}(i),t.LineMemoryBuffer=e,e=function(e){function t(){return e.call(this,4)||this}return r(t,e),t.prototype.add=function(e,t){var r=this.index;return this.array.push(i.i1616to32(e,t)),r},t}(i),t.LineJoinMemoryBuffer=e,e=function(e){function t(){return e.call(this,4)||this}return r(t,e),t.prototype.add=function(e,t){this.array.push(i.i1616to32(e,t))},t}(i),t.PolygonMemoryBuffer=e,e=function(e){function t(){return e.call(this,8)||this}return r(t,e),t.prototype.add=function(e,t,r,n,o,s){var a=this.array,u=this.index;return e=i.i1616to32(e,t),a.push(e),e=i.i8888to32(Math.round(15*r),Math.round(15*n),o,s),a.push(e),u},t}(i),t.PolygonOutlineMemoryBuffer=e,e=function(e){function t(){return e.call(this,16)||this}return r(t,e),t.prototype.add=function(e,t,r,n,s,a,u,c,l,f){var h=this.array,p=this.index;return e=i.i1616to32(e,t),h.push(e),e=i.i1616to32(Math.round(32*r),Math.round(32*n)),h.push(e),e=i.i8888to32(s/4,a/4,0,0),h.push(e),e=i.i8888to32(Math.ceil(10*f),o.radToByte(u),10*c,10*Math.min(l,25)),h.push(e),p},t}(i),t.SymbolMemoryBuffer=e})},"esri/layers/vectorTiles/views/vectorTiles/MemoryBuffer":function(){define(["require","exports"],function(e,t){return function(){function e(e){this._array=[],0>=e&&console.error("strideInBytes must be positive!"),this._stride=e}return Object.defineProperty(e.prototype,"array",{get:function(){return this._array},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return 4*this._array.length/this._stride},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemSize",{get:function(){return this._stride},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sizeInBytes",{get:function(){return 4*this._array.length},enumerable:!0,configurable:!0}),e.prototype.toBuffer=function(){return new Uint32Array(this._array).buffer},e.i1616to32=function(e,t){return 65535&e|t<<16},e.i8888to32=function(e,t,r,n){return 255&e|(255&t)<<8|(255&r)<<16|n<<24},e.i8816to32=function(e,t,r){return 255&e|(255&t)<<8|r<<16},e}()})},"esri/layers/vectorTiles/views/vectorTiles/GeometryUtils":function(){define(["require","exports"],function(e,t){function r(e,t){return e%=t,e>=0?e:e+t}t.C_INFINITY=Number.POSITIVE_INFINITY,t.C_PI=Math.PI,t.C_2PI=2*t.C_PI,t.C_PI_BY_2=t.C_PI/2,t.C_RAD_TO_256=128/t.C_PI,t.C_256_TO_RAD=t.C_PI/128,t.C_DEG_TO_256=256/360,t.C_DEG_TO_RAD=t.C_PI/180,t.C_SQRT2=1.414213562,t.C_SQRT2_INV=1/t.C_SQRT2;var n=1/Math.LN2;t.positiveMod=r,t.radToByte=function(e){return r(e*t.C_RAD_TO_256,256)},t.degToByte=function(e){return r(e*t.C_DEG_TO_256,256)},t.log2=function(e){return Math.log(e)*n},t.sqr=function(e){return e*e},t.clamp=function(e,t,r){return Math.min(Math.max(e,t),r)},t.interpolate=function(e,t,r){return e*(1-r)+t*r},t.between=function(e,t,r){return e>=t&&r>=e||e>=r&&t>=e}})},"esri/layers/vectorTiles/views/vectorTiles/IndexMemoryBuffer":function(){define(["require","exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper","./MemoryBuffer"],function(e,t,r,n,i){e=function(e){function t(){return e.call(this,12)||this}return r(t,e),t.prototype.add=function(e,t,r){var n=this.array;n.push(e),n.push(t),n.push(r)},t}(i),t.TriangleElementMemoryBuffer=e,i=function(e){function t(){return e.call(this,4)||this}return r(t,e),t.prototype.add=function(e){this.array.push(e)},t}(i),t.PointElementMemoryBuffer=i})},"esri/layers/vectorTiles/views/vectorTiles/TileParser":function(){define("require exports dojo/promise/all ../../core/promiseUtils ../../core/executeAsync ../../core/pbf ./SourceLayerData ./Feature ./BackgroundBucket ./FillBucket ./LineBucket ./SymbolBucket ./TileClipper".split(" "),function(e,t,r,n,i,o,s,a,u,c,l,f,h){return function(){function e(e,t,r){this._pbfTile=new o(new Uint8Array(e),new DataView(e)),this._tile=t,this._connection=r,this._layers=t.getLayers(),r=t.tileKey.split("/").map(parseFloat);var n=r[0];e=r[1],r=r[2],this._level=n,t.refKey&&(t=t.refKey.split("/").map(parseFloat)[0],t=n-t,t>0&&(n=(1<<t)-1,this._tileClipper=new h.TileClipper(t,e&n,r&n))),this._tileClipper||(this._tileClipper=new h.SimpleBuilder)}return e.prototype.parse=function(){for(var e,t=this,o=this._parseTileData(this._pbfTile),s=this._layers,u=s.length,c=this._level,l=[],f={},h=new Set,u=u-1;u>=0;u--)if(e=s[u],!(e.minzoom&&c<e.minzoom||e.maxzoom&&c>=e.maxzoom||e.layout&&"none"===e.layout.visibility))if(0===e.type)e=this._createBucket(e),l.push(e);else{var p=e.sourceLayer,d=o[p];d&&(h.add(p),e=this._createBucket(e))&&(e.layerIndex=u,e.layerExtent=d.extent,(d=f[p])||(d=f[p]=[]),d.push(e))}var m=10*(this._level+1),y=[],v=[],g=[],x=[],_=this._tileClipper,b=new Set,w={},T=[];h.forEach(function(e){return T.push(e)});var I=0,k=0,E=T.length;return i(function(){if(6===t._tile.status)return!0;switch(I){case 0:if(E>k)for(var e=T[k++],r=o[e],n=f[e],e=r.getData();e.next(2);){var i=new a(e.getMessage(),r),s=i.values;if(!(s&&(s=s._minzoom)&&s>=m))for(var u=0,c=n;u<c.length;u++)s=c[u],s.pushFeature(i)}else{r=t._tile;for(e in f)for(n=f[e],i=0;i<n.length;i++)s=n[i],s.hasFeatures()&&(3===s.layer.type?(y.push(s),r.addBucket(s)):s.layer.refLayerId?g.push(s):(v.push(s),x[s.layer.id]=s));I=1,k=0,E=y.length}break;case 1:E>k?y[k++].getResources(_,b,w):I=2}return 2===I},50).then(function(){if(6===t._tile.status)return[];var e,o=[],s=t._tile.getWorkerTileHandler();0<b.size&&(e=s.fetchSprites(b,t._connection),o.push(e));for(var a in w)e=w[a],0<e.size&&(e=s.fetchGlyphs(t._tile.tileKey,a,e,t._connection),o.push(e));return r(o).then(function(e){if(6===t._tile.status)return[];var r=0,n=0,o=v.length;return i(function(){if(6===t._tile.status)return!0;switch(r){case 0:if(o>n){var e=v[n++];e.processFeatures(_,t._tile),l.push(e)}else r=1,n=0,o=g.length;break;case 1:for(var i=0;i<g.length;i++){var e=g[i],s=x[e.layer.refLayerId];s&&(s.assignBufferInfo(e),l.push(e))}r=2,n=0,o=y.length;break;case 2:o>n?(e=y[n++],e.processFeatures(_,t._tile),l.push(e)):r=3}return 3===r},50).then(function(){return l.sort(function(e,t){return e.layerIndex-t.layerIndex}),l})}).otherwise(function(e){return n.reject(Error(e))})}).otherwise(function(e){return n.reject(Error(e))})},e.prototype._parseTileData=function(e){for(var t={};e.next();)switch(e.tag()){case 3:var r=new s(e.getMessage());t[r.name]=r;break;default:e.skip()}return t},e.prototype._createBucket=function(e){switch(e.type){case 0:return this._createBackgroundBucket(e);case 1:return this._createFillBucket(e);case 2:return this._createLineBucket(e);case 3:return this._createSymbolBucket(e)}},e.prototype._createBackgroundBucket=function(e){return new u(e,this._level)},e.prototype._createFillBucket=function(e){var t=this._tile;return new c(e,this._level,t.polygonVertexBuffer,t.polygonIndexBuffer,t.polygonOutlineVertexBuffer,t.polygonOutlineIndexBuffer)},e.prototype._createLineBucket=function(e){var t=this._tile;return new l(e,this._level,t.lineVertexBuffer,t.lineIndexBuffer,t.lineJoinVertexBuffer)},e.prototype._createSymbolBucket=function(e){var t=this._tile;return new f(e,this._level,t.markerVertexBuffer,t.markerIndexBuffer,t.textVertexBuffer,t.textIndexBuffer,t.placementEngine,t.getWorkerTileHandler())},e}()})},"dojo/promise/all":function(){define(["../_base/array","../Deferred","../when"],function(e,t,r){var n=e.some;return function(e){var i,o;e instanceof Array?o=e:e&&"object"==typeof e&&(i=e);var s,a=[];if(i){o=[];for(var u in i)Object.hasOwnProperty.call(i,u)&&(a.push(u),o.push(i[u]));s={}}else o&&(s=[]);if(!o||!o.length)return(new t).resolve(s);var c=new t;c.promise.always(function(){s=a=null});var l=o.length;return n(o,function(e,t){return i||a.push(t),r(e,function(e){c.isFulfilled()||(s[a[t]]=e,0===--l&&c.resolve(s))},c.reject),c.isFulfilled()}),c.promise}})},"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(e,t){return function(r,n,i,o){var s=r&&"function"==typeof r.then,a=s&&r instanceof t;return s?(a||(s=new e(r.cancel),r.then(s.resolve,s.reject,s.progress),r=s.promise),n||i||o?r.then(n,i,o):r):1<arguments.length?n?n(r):r:(new e).resolve(r)}})},"esri/layers/vectorTiles/core/pbf":function(){define(["require","exports"],function(e,t){return function(){function e(e,t,r,n){this._tag=0,this._dataType=99,this._data=e,this._dataView=t,this._pos=r||0,this._end=n||e.byteLength}return e.prototype.clone=function(){return new e(this._data,this._dataView,this._pos,this._end)},e.prototype.next=function(e){for(;;){if(this._pos===this._end)return!1;var t=this._decodeVarint();if(this._tag=t>>3,this._dataType=7&t,!e||e===this._tag)break;this.skip()}return!0},e.prototype.empty=function(){return this._pos>=this._end},e.prototype.tag=function(){return this._tag},e.prototype.getInt32=function(){return this._decodeVarint()},e.prototype.getInt64=function(){return this._decodeVarint()},e.prototype.getUInt32=function(){return this._decodeVarint()},e.prototype.getUInt64=function(){return this._decodeVarint()},e.prototype.getSInt32=function(){return this._decodeSVarint()},e.prototype.getSInt64=function(){return this._decodeSVarint()},e.prototype.getBool=function(){var e=0!==this._data[this._pos];return this._skip(1),e},e.prototype.getEnum=function(){return this._decodeVarint()},e.prototype.getFixed64=function(){var e=this._dataView,t=this._pos,e=e.getUint32(t,!0)+4294967296*e.getUint32(t+4,!0);return this._skip(8),e},e.prototype.getSFixed64=function(){var e=this._dataView,t=this._pos,e=e.getUint32(t,!0)+4294967296*e.getInt32(t+4,!0);return this._skip(8),e},e.prototype.getDouble=function(){var e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e},e.prototype.getFixed32=function(){var e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e},e.prototype.getSFixed32=function(){var e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e},e.prototype.getFloat=function(){var e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e},e.prototype.getString=function(){var e=this._getLength(),t=this._pos,t=this._toString(this._data,t,t+e);return this._skip(e),t},e.prototype.getBytes=function(){var e=this._getLength(),t=this._pos,t=this._toBytes(this._data,t,t+e);return this._skip(e),t},e.prototype.getMessage=function(){var t=this._getLength(),r=this._pos,r=new e(this._data,this._dataView,r,r+t);return this._skip(t),r},e.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw Error("Invalid data type!")}},e.prototype._skip=function(e){if(this._pos+e>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=e},e.prototype._decodeVarint=function(){var e,t=this._data,r=this._pos,n=0;if(10<=this._end-r){if(e=t[r++],n|=127&e,0!==(128&e)&&(e=t[r++],n|=(127&e)<<7,0!==(128&e)&&(e=t[r++],n|=(127&e)<<14,0!==(128&e)&&(e=t[r++],n|=(127&e)<<21,0!==(128&e)&&(e=t[r++],n+=268435456*(127&e),0!==(128&e)&&(e=t[r++],n+=34359738368*(127&e),0!==(128&e)&&(e=t[r++],n+=4398046511104*(127&e),0!==(128&e)&&(e=t[r++],n+=562949953421312*(127&e),0!==(128&e)&&(e=t[r++],n+=72057594037927940*(127&e),0!==(128&e)&&(e=t[r++],n+=0x8000000000000000*(127&e),0!==(128&e)))))))))))throw Error("Varint too long!")}else{for(var i=1;r!==this._end&&(e=t[r],0!==(128&e));)++r,n+=(127&e)*i,i*=128;if(r===this._end)throw Error("Varint overrun!");++r,n+=e*i}return this._pos=r,n},e.prototype._decodeSVarint=function(){var e=this._decodeVarint();return e%2?-(e+1)/2:e/2},e.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()},e.prototype._toString=function(e,t,r){var n="",i="";for(r=Math.min(this._end,r);r>t;++t){var o=e[t];128&o?i+="%"+o.toString(16):(n+=decodeURIComponent(i)+String.fromCharCode(o),i="")}return i.length&&(n+=decodeURIComponent(i)),n},e.prototype._toBytes=function(e,t,r){return r=Math.min(this._end,r),new Uint8Array(e.buffer,t,r-t)},e}()})},"esri/layers/vectorTiles/views/vectorTiles/SourceLayerData":function(){define(["require","exports"],function(e,t){return function(){function e(t){for(this.extent=4096,this.keys=[],this.values=[],this._pbfLayer=t.clone();t.next();)switch(t.tag()){case 1:this.name=t.getString();break;case 3:this.keys.push(t.getString());break;case 4:this.values.push(e._parseValue(t.getMessage()));break;case 5:this.extent=t.getUInt32();break;default:t.skip()}}return e.prototype.getData=function(){return this._pbfLayer},e._parseValue=function(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getInt64();case 5:return e.getUInt64();case 6:return e.getSInt64();case 7:return e.getBool();default:e.skip()}return null},e}()})},"esri/layers/vectorTiles/views/vectorTiles/Feature":function(){define(["require","exports","./Geometry"],function(e,t,r){return function(){function e(e,t){this.values={};for(var r=t.keys,n=t.values;e.next();)switch(e.tag()){case 1:this.id=e.getUInt64();break;case 2:for(var i=e.getMessage(),o=this.values;!i.empty();){var s=i.getUInt32(),a=i.getUInt32();o[r[s]]=n[a]}break;case 3:this.type=e.getUInt32();break;case 4:this._pbfGeometry=e.getMessage();break;default:e.skip()}}return e.prototype.getGeometry=function(e){if(void 0!==this._geometry)return this._geometry;var t,n,i=this._pbfGeometry;e?e.reset(this.type):t=[];for(var o=1,s=0,a=0,u=0;!i.empty();)switch(0===s&&(s=i.getUInt32(),o=7&s,s>>=3),s--,o){case 1:a+=i.getSInt32(),u+=i.getSInt32(),e?e.moveTo(a,u):(n&&t.push(n),n=[],n.push(new r.Point(a,u)));break;case 2:a+=i.getSInt32(),u+=i.getSInt32(),e?e.lineTo(a,u):n.push(new r.Point(a,u));break;case 7:e?e.close():n&&!n[0].equals(a,u)&&n.push(n[0].clone());break;default:throw Error("Invalid path operation")}return e?e=e.result():(n&&t.push(n),e=t),this._geometry=e},e}()})},"esri/layers/vectorTiles/views/vectorTiles/Geometry":function(){define(["require","exports"],function(e,t){var r=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.equals=function(e,t){return e===this.x&&t===this.y},e.prototype.isEqual=function(e){return e.x===this.x&&e.y===this.y},e.prototype.setCoords=function(e,t){this.x=e,this.y=t},e.prototype.normalize=function(){var e=this.x,t=this.y,e=Math.sqrt(e*e+t*t);this.x/=e,this.y/=e},e.prototype.rightPerpendicular=function(){var e=this.x;this.x=this.y,this.y=-e},e.prototype.move=function(e,t){this.x+=e,this.y+=t},e.prototype.assign=function(e){this.x=e.x,this.y=e.y},e.prototype.assignAdd=function(e,t){this.x=e.x+t.x,this.y=e.y+t.y},e.prototype.assignSub=function(e,t){this.x=e.x-t.x,this.y=e.y-t.y},e.prototype.rotate=function(e,t){var r=this.x,n=this.y;this.x=r*e-n*t,this.y=r*t+n*e},e.prototype.scale=function(e){this.x*=e,this.y*=e},e.prototype.length=function(){var e=this.x,t=this.y;return Math.sqrt(e*e+t*t)},e.distance=function(e,t){var r=t.x-e.x,n=t.y-e.y;return Math.sqrt(r*r+n*n)},e.add=function(t,r){return new e(t.x+r.x,t.y+r.y)},e.sub=function(t,r){return new e(t.x-r.x,t.y-r.y)},e}();t.Point=r})},"esri/layers/vectorTiles/views/vectorTiles/BackgroundBucket":function(){define(["require","exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper","./Bucket"],function(e,t,r,n,i){return function(e){function t(t,r){return e.call(this,t,r)||this}return r(t,e),t}(i)})},"esri/layers/vectorTiles/views/vectorTiles/Bucket":function(){define(["require","exports"],function(e,t){return function(){function e(e,t){this.layerExtent=4096,this._features=[],this.layer=e,this.zoom=t,this._filter=e.getFeatureFilter()}return e.prototype.pushFeature=function(e){this._filter.filter(e)&&this._features.push(e)},e.prototype.hasFeatures=function(){return 0<this._features.length},e.prototype.processFeatures=function(e,t){},e.prototype.assignBufferInfo=function(e){},e}()})},"esri/layers/vectorTiles/views/vectorTiles/FillBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ./Geometry ../../core/libs/earcut/earcut".split(" "),function(e,t,r,n,i,o,s){return function(e){function t(t,r,n,i,o,s){return t=e.call(this,t,r)||this,t.polygonVertexBuffer=n,t.polygonIndexBuffer=i,t.polygonOutlineVertexBuffer=o,t.polygonOutlineIndexBuffer=s,t}return r(t,e),Object.defineProperty(t.prototype,"polygonIndexStart",{get:function(){return this._triangleElementsStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"polygonIndexCount",{get:function(){return this._triangleElementsNum},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"polygonOutlineIndexStart",{get:function(){return this._outlineElementsStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"polygonOutlineIndexCount",{get:function(){return this._outlineElementsNum},enumerable:!0,configurable:!0}),t.prototype.assignBufferInfo=function(e){e._triangleElementsStart=this._triangleElementsStart,e._triangleElementsNum=this._triangleElementsNum,e.layer.hasPaintProperty("fill-outline-color")?(e._outlineElementsStart=this._outlineElementsStart,e._outlineElementsNum=this._outlineElementsNum):(e._outlineElementsStart=0,e._outlineElementsNum=0)},t.prototype.processFeatures=function(e,t){this._triangleElementsStart=this.polygonIndexBuffer.index,this._triangleElementsNum=0,
this._outlineElementsStart=this.polygonOutlineIndexBuffer.index,this._outlineElementsNum=0,e&&e.setExtent(this.layerExtent);for(var r=this.layer.getPaintValue("fill-pattern",this.zoom),r=this.layer.getPaintValue("fill-antialias",this.zoom)&&void 0===r,n=0,i=this._features;n<i.length;n++){var o=i[n].getGeometry(e);this._processFeature(o,r)}},t.prototype._processFeature=function(e,r){if(e){var n=e.length;if(r)for(var i=0;n>i;i++)this._processOutline(e[i]);for(var o,i=0;n>i;i++){var s=t._area(e[i]);s>128?(void 0!==o&&this._processFill(e,o),o=[i]):-128>s&&void 0!==o&&o.push(i)}void 0!==o&&this._processFill(e,o)}},t.prototype._processOutline=function(e){var t,r,n,i=this.polygonOutlineVertexBuffer,s=this.polygonOutlineIndexBuffer,a=s.index,u=new o.Point(0,0),c=new o.Point(0,0),l=new o.Point(0,0),f=-1,h=-1,p=t=-1,d=-1,m=e.length;if(!(2>m)){var y=e[0];for(t=e[m-1];m&&t.isEqual(y);)--m,t=e[m-1];if(!(2>m-0)){for(y=0;m>y;++y){0===y?(t=e[m-1],r=e[0],n=e[1],u.assignSub(r,t),u.normalize(),u.rightPerpendicular()):(t=r,r=n,n=y!==m-1?e[y+1]:e[0],u.assign(c)),c.assignSub(n,r),c.normalize(),c.rightPerpendicular(),t=u.x*c.y-u.y*c.x,l.assignAdd(u,c),l.normalize();var v=-l.x*-u.x+-l.y*-u.y,v=Math.abs(0!==v?1/v:1);v>8&&(v=8),t>=0?(t=i.add(r.x,r.y,u.x,u.y,0,1),-1===p&&(p=t),f>=0&&h>=0&&t>=0&&s.add(f,h,t),h=i.add(r.x,r.y,v*-l.x,v*-l.y,0,-1),-1===d&&(d=h),f>=0&&h>=0&&t>=0&&s.add(f,h,t),f=h,h=t,t=i.add(r.x,r.y,l.x,l.y,0,1),f>=0&&h>=0&&t>=0&&s.add(f,h,t),h=i.add(r.x,r.y,c.x,c.y,0,1)):(t=i.add(r.x,r.y,v*l.x,v*l.y,0,1),-1===p&&(p=t),f>=0&&h>=0&&t>=0&&s.add(f,h,t),h=i.add(r.x,r.y,-u.x,-u.y,0,-1),-1===d&&(d=h),f>=0&&h>=0&&t>=0&&s.add(f,h,t),f=h,h=t,t=i.add(r.x,r.y,-l.x,-l.y,0,-1),f>=0&&h>=0&&t>=0&&s.add(f,h,t),f=i.add(r.x,r.y,-c.x,-c.y,0,-1)),f>=0&&h>=0&&t>=0&&s.add(f,h,t)}f>=0&&h>=0&&p>=0&&s.add(f,h,p),f>=0&&p>=0&&d>=0&&s.add(f,d,p),this._outlineElementsNum+=3*(s.index-a)}}},t.prototype._processFill=function(e,t){var r;1<t.length&&(r=[]);for(var n=0,i=0;i<t.length;i++){var o=t[i];0!==n&&r.push(n),n+=e[o].length}for(var n=2*n,i=new Float64Array(n),a=0,u=0;u<t.length;u++)for(var o=t[u],o=e[o],c=o.length,l=0;c>l;++l)i[a++]=o[l].x,i[a++]=o[l].y;if(r=s(i,r,2),a=r.length,a>0){for(u=this.polygonVertexBuffer.index,o=0;n>o;)this.polygonVertexBuffer.add(i[o++],i[o++]);for(n=0;a>n;)this.polygonIndexBuffer.add(u+r[n++],u+r[n++],u+r[n++]);this._triangleElementsNum+=a}},t._area=function(e){for(var t=0,r=e.length-1,n=0;r>n;n++)t+=(e[n].x-e[n+1].x)*(e[n].y+e[n+1].y);return t+=(e[r].x-e[0].x)*(e[r].y+e[0].y),.5*t},t}(i)})},"esri/layers/vectorTiles/core/libs/earcut/earcut":function(){define([],function(){function e(e,i,a){a=a||2,x=e.length/a+(i?2*i.length:0),_=!1;var c=i&&i.length,l=c?i[0]*a:e.length,f=t(e,0,l,a,!0),h=[];if(!f)return h;var p,m,y,v;if(c)e:{var g,b,w,T=a,c=[];for(v=0,g=i.length;g>v;v++)b=i[v]*T,w=g-1>v?i[v+1]*T:e.length,b=t(e,b,w,T,!1),b===b.next&&(b.steiner=!0),c.push(u(b));for(c.sort(o),v=0;v<c.length;v++){if(!f){f=null;break e}i=c[v],T=f,(T=s(i,T))&&(i=d(T,i),r(i,i.next)),f=r(f,f.next)}}if(_)return h;if(e.length>80*a){for(p=y=e[0],m=c=e[1],T=a;l>T;T+=a)v=e[T],i=e[T+1],p>v&&(p=v),m>i&&(m=i),v>y&&(y=v),i>c&&(c=i);y=Math.max(y-p,c-m)}return n(f,h,a,p,m,y),h}function t(e,t,r,n,i){var o;if(i===0<g(e,t,r,n))for(i=t;r>i;i+=n)o=m(i,e[i],e[i+1],o);else for(i=r-n;i>=t;i-=n)o=m(i,e[i],e[i+1],o);return o&&f(o,o.next)&&(y(o),o=o.next),o}function r(e,t){if(!e)return e;t||(t=e);var r,n=e,i=0,o=x*x/2;do{if(r=!1,n.steiner||!f(n,n.next)&&0!==l(n.prev,n,n.next))n=n.next;else{if(y(n),n=t=n.prev,n===n.next)return null;r=!0}if(i++>o)return _=!0,null}while(r||n!==t);return t}function n(e,t,o,s,u,m,v){if(e){if(!v&&m){var g=e,x=g;do null===x.z&&(x.z=a(x.x,x.y,s,u,m)),x.prevZ=x.prev,x=x.nextZ=x.next;while(x!==g);x.prevZ.nextZ=null,x.prevZ=null;var b,w,T,I,k,E,g=x,S=1;do{for(x=g,T=g=null,I=0;x;){for(I++,w=x,b=k=0;S>b&&(k++,w=w.nextZ);b++);for(E=S;k>0||E>0&&w;)0===k?(b=w,w=w.nextZ,E--):0!==E&&w?x.z<=w.z?(b=x,x=x.nextZ,k--):(b=w,w=w.nextZ,E--):(b=x,x=x.nextZ,k--),T?T.nextZ=b:g=b,b.prevZ=T,T=b;x=w}T.nextZ=null,S*=2}while(I>1)}for(g=e;e.prev!==e.next;){if(x=e.prev,w=e.next,m)e:{T=e,E=s;var B=u,P=m;if(I=T.prev,k=T,S=T.next,0<=l(I,k,S))T=!1;else{var j=I.x>k.x?I.x>S.x?I.x:S.x:k.x>S.x?k.x:S.x,C=I.y>k.y?I.y>S.y?I.y:S.y:k.y>S.y?k.y:S.y;for(b=a(I.x<k.x?I.x<S.x?I.x:S.x:k.x<S.x?k.x:S.x,I.y<k.y?I.y<S.y?I.y:S.y:k.y<S.y?k.y:S.y,E,B,P),E=a(j,C,E,B,P),B=T.nextZ;B&&B.z<=E;){if(B!==T.prev&&B!==T.next&&c(I.x,I.y,k.x,k.y,S.x,S.y,B.x,B.y)&&0<=l(B.prev,B,B.next)){T=!1;break e}B=B.nextZ}for(B=T.prevZ;B&&B.z>=b;){if(B!==T.prev&&B!==T.next&&c(I.x,I.y,k.x,k.y,S.x,S.y,B.x,B.y)&&0<=l(B.prev,B,B.next)){T=!1;break e}B=B.prevZ}T=!0}}else T=i(e);if(T)t.push(x.i/o),t.push(e.i/o),t.push(w.i/o),y(e),g=e=w.next;else{if(_)break;if(e=w,e===g){if(v){if(1===v){v=t,g=o,x=e;do w=x.prev,T=x.next.next,!f(w,T)&&h(w,x,x.next,T)&&p(w,T)&&p(T,w)&&(v.push(w.i/g),v.push(x.i/g),v.push(T.i/g),y(x),y(x.next),x=e=T),x=x.next;while(x!==e);e=x,n(e,t,o,s,u,m,2)}else if(2===v)e:{v=e;do{for(g=v.next.next;g!==v.prev;){if(x=v.i!==g.i){if(x=v,w=g,T=void 0,T=x.next.i!==w.i&&x.prev.i!==w.i){T=void 0;t:{T=x;do{if(T.i!==x.i&&T.next.i!==x.i&&T.i!==w.i&&T.next.i!==w.i&&h(T,T.next,x,w)){T=!0;break t}T=T.next}while(T!==x);T=!1}T=!T}if(I=void 0,I=T&&p(x,w)&&p(w,x)){T=x,I=!1,k=(x.x+w.x)/2,w=(x.y+w.y)/2;do T.y>w!=T.next.y>w&&k<(T.next.x-T.x)*(w-T.y)/(T.next.y-T.y)+T.x&&(I=!I),T=T.next;while(T!==x)}x=I}if(x){e=d(v,g),v=r(v,v.next),e=r(e,e.next),n(v,t,o,s,u,m),n(e,t,o,s,u,m);break e}g=g.next}v=v.next}while(v!==e)}}else n(r(e),t,o,s,u,m,1);break}}}}}function i(e){var t=e.prev,r=e.next;if(0<=l(t,e,r))return!1;for(var n=e.next.next,i=0;n!==e.prev;){if(c(t.x,t.y,e.x,e.y,r.x,r.y,n.x,n.y)&&0<=l(n.prev,n,n.next))return!1;if(n=n.next,i++>x)return _=!0,!1}return!0}function o(e,t){return e.x-t.x}function s(e,t){var r,n=t,i=e.x,o=e.y,s=-(1/0);do{if(!n)return null;if(o<=n.y&&o>=n.next.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(i>=a&&a>s){if(s=a,a===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(i===s)return r.prev;for(var u,a=r,l=r.x,f=r.y,h=1/0,n=r.next;n!==a;)i>=n.x&&n.x>=l&&c(f>o?i:s,o,l,f,f>o?s:i,o,n.x,n.y)&&(u=Math.abs(o-n.y)/(i-n.x),(h>u||u===h&&n.x>r.x)&&p(n,e)&&(r=n,h=u)),n=n.next;return r}function a(e,t,r,n,i){return e=32767*(e-r)/i,t=32767*(t-n)/i,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),1431655765&(e|e<<1)|(1431655765&(t|t<<1))<<1}function u(e){var t=e,r=e;do t.x<r.x&&(r=t),t=t.next;while(t!==e);return r}function c(e,t,r,n,i,o,s,a){return(i-s)*(t-a)-(e-s)*(o-a)>=0&&(e-s)*(n-a)-(r-s)*(t-a)>=0&&(r-s)*(o-a)-(i-s)*(n-a)>=0}function l(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function f(e,t){return e.x===t.x&&e.y===t.y}function h(e,t,r,n){return f(e,t)&&f(r,n)||f(e,n)&&f(r,t)?!0:0<l(e,t,r)!=0<l(e,t,n)&&0<l(r,n,e)!=0<l(r,n,t)}function p(e,t){return 0>l(e.prev,e,e.next)?0<=l(e,t,e.next)&&0<=l(e,e.prev,t):0>l(e,t,e.prev)||0>l(e,e.next,t)}function d(e,t){var r=new v(e.i,e.x,e.y),n=new v(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function m(e,t,r,n){return e=new v(e,t,r),n?(e.next=n.next,e.prev=n,n.next.prev=e,n.next=e):(e.prev=e,e.next=e),e}function y(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function v(e,t,r){this.i=e,this.x=t,this.y=r,this.nextZ=this.prevZ=this.z=this.next=this.prev=null,this.steiner=!1}function g(e,t,r,n){for(var i=0,o=r-n;r>t;t+=n)i+=(e[o]-e[t])*(e[t+1]+e[o+1]),o=t;return i}var x,_;return e.deviation=function(e,t,r,n){var i=t&&t.length,o=Math.abs(g(e,0,i?t[0]*r:e.length,r));if(i)for(var i=0,s=t.length;s>i;i++)o-=Math.abs(g(e,t[i]*r,s-1>i?t[i+1]*r:e.length,r));for(i=t=0;i<n.length;i+=3){var s=n[i]*r,a=n[i+1]*r,u=n[i+2]*r;t+=Math.abs((e[s]-e[u])*(e[a+1]-e[s+1])-(e[s]-e[a])*(e[u+1]-e[s+1]))}return 0===o&&0===t?0:Math.abs((t-o)/o)},e.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var s=0;t>s;s++)r.vertices.push(e[i][o][s]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r},e})},"esri/layers/vectorTiles/views/vectorTiles/LineBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ./style/StyleLayer ./LineTess".split(" "),function(e,t,r,n,i,o,s){return function(e){function t(t,r,n,i,o){return t=e.call(this,t,r)||this,t.extrudeVectorsDoubleBuffer=[s.allocExtrudeVectors(),s.allocExtrudeVectors()],t.recycledTriangleBridge=s.allocTriangles(20),t.recycledTrianglePie=s.allocTriangles(20),t.lineVertexBuffer=n,t.lineIndexBuffer=i,t}return r(t,e),Object.defineProperty(t.prototype,"triangleIndexStart",{get:function(){return this.triangleElementsStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"triangleIndexCount",{get:function(){return this.triangleElementsCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"connectorStart",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"connectorCount",{get:function(){return 0},enumerable:!0,configurable:!0}),t.prototype.assignBufferInfo=function(e){e.triangleElementsStart=this.triangleElementsStart,e.triangleElementsCount=this.triangleElementsCount},t.prototype.processFeatures=function(e,t){this.triangleElementsStart=this.lineIndexBuffer.index,this.triangleElementsCount=0,e&&e.setExtent(this.layerExtent);for(var r=new o.LineLayout(this.layer,this.zoom),n=0,i=this._features;n<i.length;n++){var s=i[n].getGeometry(e);this._processFeature(r,s)}},t.prototype._processFeature=function(e,t){if(t)for(var r=t.length,n=0;r>n;n++)this._processGeometry(t[n],e)},t.prototype._processGeometry=function(e,t){if(!(2>e.length)){var r=e[0],n=e[e.length-1],i=n.x-r.x,r=n.y-r.y,i=1e-6>i*i+r*r;if(!(2>e.length)){for(r=e[0],n=1;n<e.length;){var o=e[n].x-r.x,a=e[n].y-r.y;1e-6>o*o+a*a?e.splice(n,1):(r=e[n],++n)}if(!(2>e.length)){this.vertices=e,this.isClosed=i,this.cap=t.cap,this.join=t.join,this.almostParallelRads=.05,this.veryShallowRads=.1,this.miterSafeRads=s.MITER_SAFE_RADS,this.miterLimitMag=Math.min(t.miterLimit,s.SYSTEM_MAG_LIMIT),this.roundLimitRads=Math.min(t.roundLimit,.5),this.newRoundJoinsSafeRads=2.3;for(var r=this.lineIndexBuffer.index,n=0,u=void 0,o=0;o<e.length;++o){var c=e[o],a=u===this.extrudeVectorsDoubleBuffer[o%2]?this.extrudeVectorsDoubleBuffer[(o+1)%2]:this.extrudeVectorsDoubleBuffer[o%2];this._computeExtrudeVectors(a,o),this._writeGPUVertices(c.x,c.y,n,a),!a.capCenter||i&&o===e.length-1||this._writeGPUPieElements(a),u&&this._writeGPUBridgeElements(u,a),o<e.length-1&&(u=e[o+1],c=s.length([u.x-c.x,u.y-c.y]),n+=c),u=a}this.triangleElementsCount+=3*(this.lineIndexBuffer.index-r)}}}},t.prototype._computeExtrudeVectors=function(e,t){var r=this.vertices,n=this.isClosed,i=r[t],o=[void 0,void 0],a=[void 0,void 0];if(t>0&&t<r.length-1){var u=r[(t+r.length-1)%r.length],c=r[(t+1)%r.length];s.normalize(o,[i.x-u.x,i.y-u.y]),s.normalize(a,[c.x-i.x,c.y-i.y])}else if(0===t)c=r[(t+1)%r.length],s.normalize(a,[c.x-i.x,c.y-i.y]),n?(u=r[r.length-2],s.normalize(o,[i.x-u.x,i.y-u.y])):o=a;else{if(t!==r.length-1)throw Error("Parameter i out of range.");u=r[(t+r.length-1)%r.length],s.normalize(o,[i.x-u.x,i.y-u.y]),n?(u=r[1],s.normalize(a,[u.x-i.x,u.y-i.y])):a=o}n||0!==t?n||t!==r.length-1?this._computeJoinExtrudeVectors(e,o,a):this._computeCapExtrudeVectors(e,o,a,s.CapPosition.END):this._computeCapExtrudeVectors(e,o,a,s.CapPosition.START)},t.prototype._computeCapExtrudeVectors=function(e,t,r,n){if(0===this.cap)s.buttCap(e,t,r);else if(1===this.cap)s.roundCap(e,t,r,n,s.getNumberOfSlices(Math.PI));else{if(2!==this.cap)throw Error("Unknown cap type!");s.squareCap(e,t,r,n)}},t.prototype._computeJoinExtrudeVectors=function(e,t,r){var n=s.getRads(t,r);if(n>Math.PI-this.almostParallelRads)s.rectJoin(e,t,r);else if(2===this.join||n<this.veryShallowRads)n<this.almostParallelRads?s.fastMiterJoin(e,t,r):n<this.miterSafeRads?s.miterJoin(e,t,r):s.bevelJoin(e,t,r,this.miterLimitMag);else if(0===this.join)s.bevelJoin(e,t,r,1);else if(1===this.join){var i=s.getNumberOfSlices(n);n<this.newRoundJoinsSafeRads?2>i||n<this.roundLimitRads?s.bevelJoin(e,t,r,1):s.roundJoin(e,t,r,i):s.unitRoundJoin(e,t,r,i)}},t.prototype._writeGPUVertices=function(e,t,r,n){for(var i=0;i<n.vectors.count;++i){var o=this.lineVertexBuffer.add(e,t,n.vectors.items[i].vector[0],n.vectors.items[i].vector[1],0,n.vectors.items[i].side,r);n.vectors.items[i].base=o}},t.prototype._writeGPUBridgeElements=function(e,t){s.bridge(this.recycledTriangleBridge,e,t,!1);for(var r=0;r<this.recycledTriangleBridge.count;++r){var n=this.recycledTriangleBridge.items[r];this.lineIndexBuffer.add(n.v1.base,n.v2.base,n.v3.base)}},t.prototype._writeGPUPieElements=function(e){for(s.pie(this.recycledTrianglePie,e),e=0;e<this.recycledTrianglePie.count;++e){var t=this.recycledTrianglePie.items[e];this.lineIndexBuffer.add(t.v1.base,t.v2.base,t.v3.base)}},t}(i)})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleLayer":function(){define(["require","exports","./StyleDefinition","./StyleProperty","./Filter"],function(e,t,r,n,i){e=function(){function e(e,t,n){switch(this.type=e,this.id=t.id,this.source=t.source,this.sourceLayer=t["source-layer"],this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,this.filter=t.filter,this.layout=t.layout,this.paint=t.paint,this.z=n,e){case 0:this._layoutDefinition=r.StyleDefinition.backgroundLayoutDefinition,this._paintDefinition=r.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=r.StyleDefinition.fillLayoutDefinition,this._paintDefinition=r.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=r.StyleDefinition.lineLayoutDefinition,this._paintDefinition=r.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=r.StyleDefinition.symbolLayoutDefinition,this._paintDefinition=r.StyleDefinition.symbolPaintDefinition}this._layoutProperties=this._parseLayout(this.layout),this._paintProperties=this._parsePaint(this.paint)}return e.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=i.createFilter(this.filter)},e.prototype.hasLayoutProperty=function(e){var t=this._layoutProperties;return t&&t[e]?!0:!1},e.prototype.hasPaintProperty=function(e){var t=this._paintProperties;return t?void 0!==t[e]:!1},e.prototype.getLayoutValue=function(e,t){var r,n=this._layoutProperties;return n&&(n=n[e])&&(r=n.getValue(t)),n=this._layoutDefinition[e],void 0===r&&(r=n["default"]),"enum"===n.type&&(r=n.values.indexOf(r)),r},e.prototype.getPaintValue=function(e,t){var r,n=this._paintProperties;return n&&(n=n[e])&&(r=n.getValue(t)),n=this._paintDefinition[e],void 0===r&&(r=n["default"]),"enum"===n.type&&(r=n.values.indexOf(r)),r},e.prototype._parseLayout=function(e){var t,r={};for(t in e)r[t]=new n(this._layoutDefinition[t],e[t]);return r},e.prototype._parsePaint=function(e){var t,r={};for(t in e)r[t]=new n(this._paintDefinition[t],e[t]);return r},e}(),t.StyleLayer=e,e=function(){return function(e,t){this.cap=e.getLayoutValue("line-cap",t),this.join=e.getLayoutValue("line-join",t),this.miterLimit=e.getLayoutValue("line-miter-limit",t),this.roundLimit=e.getLayoutValue("line-round-limit",t)}}(),t.LineLayout=e,e=function(){return function(e,t,r){this.allowOverlap=e.getLayoutValue("icon-allow-overlap",t),this.ignorePlacement=e.getLayoutValue("icon-ignore-placement",t),this.optional=e.getLayoutValue("icon-optional",t),this.rotationAlignment=e.getLayoutValue("icon-rotation-alignment",t),this.size=e.getLayoutValue("icon-size",t),this.rotate=e.getLayoutValue("icon-rotate",t),this.padding=e.getLayoutValue("icon-padding",t),this.keepUpright=e.getLayoutValue("icon-keep-upright",t),this.offset=e.getLayoutValue("icon-offset",t),r&&1===this.rotationAlignment&&!e.hasLayoutProperty("icon-rotation-alignment")&&(this.rotationAlignment=0)}}(),t.IconLayout=e,e=function(){return function(e,t,r){this.allowOverlap=e.getLayoutValue("text-allow-overlap",t),this.ignorePlacement=e.getLayoutValue("text-ignore-placement",t),this.optional=e.getLayoutValue("text-optional",t),this.rotationAlignment=e.getLayoutValue("text-rotation-alignment",t),this.font=e.getLayoutValue("text-font",t),this.maxWidth=e.getLayoutValue("text-max-width",t),this.lineHeight=e.getLayoutValue("text-line-height",t),this.letterSpacing=e.getLayoutValue("text-letter-spacing",t),this.justify=e.getLayoutValue("text-justify",t),this.anchor=e.getLayoutValue("text-anchor",t),this.maxAngle=e.getLayoutValue("text-max-angle",t),this.size=e.getLayoutValue("text-size",t),this.rotate=e.getLayoutValue("text-rotate",t),this.padding=e.getLayoutValue("text-padding",t),this.keepUpright=e.getLayoutValue("text-keep-upright",t),this.transform=e.getLayoutValue("text-transform",t),this.offset=e.getLayoutValue("text-offset",t),r&&1===this.rotationAlignment&&!e.hasLayoutProperty("text-rotation-alignment")&&(this.rotationAlignment=0)}}(),t.TextLayout=e})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleDefinition":function(){define(["require","exports"],function(e,t){var r=function(){return function(){}}();r.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}},r.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}},r.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"line-cap":{type:"enum",values:["butt","round","square"],"default":"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],"default":"miter"},"line-miter-limit":{type:"number","default":2},"line-round-limit":{type:"number","default":1.05}},r.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"symbol-placement":{type:"enum",values:["point","line"],"default":"point"},"symbol-spacing":{type:"number",minimum:1,"default":250},"symbol-avoid-edges":{type:"boolean","default":!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean","default":!1},"icon-ignore-placement":{type:"boolean","default":!1},"icon-optional":{type:"boolean","default":!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport"],"default":"viewport"},"icon-size":{type:"number",minimum:0,"default":1},"icon-rotate":{type:"number","default":0},"icon-padding":{type:"number",minimum:0,"default":2},"icon-keep-upright":{type:"boolean","default":!0},"icon-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport"],"default":"viewport"},"text-font":{type:"array",value:"string","default":["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,"default":16},"text-max-width":{type:"number",minimum:0,"default":10},"text-line-height":{type:"number","default":1.2},"text-letter-spacing":{type:"number","default":0},"text-justify":{type:"enum",values:["left","center","right"],"default":"center"},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),"default":"center"},"text-max-angle":{type:"number",minimum:0,"default":45},"text-rotate":{type:"number","default":0},"text-padding":{type:"number",minimum:0,"default":2},"text-keep-upright":{type:"boolean","default":!0},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],"default":"none"},"text-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-allow-overlap":{type:"boolean","default":!1},"text-ignore-placement":{type:"boolean","default":!1},"text-optional":{type:"boolean","default":!1}},r.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,"default":1},"background-color":{type:"color","default":[0,0,0,1]},"background-pattern":{type:"string"}},r.fillPaintDefinition={"fill-opacity":{type:"number",minimum:0,maximum:1,"default":1},"fill-antialias":{type:"boolean","default":!0},"fill-color":{type:"color","default":[0,0,0,1]},"fill-outline-color":{type:"color","default":[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,"default":[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"fill-pattern":{type:"string"}},r.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,"default":1},"line-color":{type:"color","default":[0,0,0,1]},"line-translate":{type:"array",value:"number",length:2,"default":[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"line-width":{type:"number",minimum:0,"default":1},"line-gap-width":{type:"number",minimum:0,"default":0},"line-offset":{type:"number","default":0},"line-blur":{type:"number",minimum:0,"default":0},"line-dasharray":{type:"array",value:"number","default":[]},"line-pattern":{type:"string"}},r.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,maximum:1,"default":1},"icon-color":{type:"color","default":[0,0,0,1]},"icon-halo-color":{type:"color","default":[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,"default":0},"icon-halo-blur":{type:"number",minimum:0,"default":0},"icon-translate":{type:"array",value:"number",length:2,"default":[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"text-opacity":{type:"number",minimum:0,maximum:1,"default":1},"text-color":{type:"color","default":[0,0,0,1]},"text-halo-color":{type:"color","default":[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,"default":0},"text-halo-blur":{type:"number",minimum:0,"default":0},"text-translate":{type:"array",value:"number",length:2,"default":[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}},r.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,"default":1},"raster-hue-rotate":{type:"number","default":0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,"default":0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,"default":1},"raster-saturation":{type:"number",minimum:-1,maximum:1,"default":0},"raster-contrast":{type:"number",minimum:-1,maximum:1,"default":0},"raster-fade-duration":{type:"number",minimum:0,"default":300}},r.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,"default":1},"circle-radius":{type:"number",minimum:0,"default":5},"circle-color":{type:"color","default":[0,0,0,1]},"circle-blur":{type:"number",minimum:0,"default":0},"circle-translate":{type:"array",value:"number",length:2,"default":[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}},t.StyleDefinition=r})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleProperty":function(){define(["require","exports","../../../Color","../GeometryUtils"],function(e,t,r,n){return function(){function e(t,r){var n;switch(t.type){case"number":n=!0;break;case"color":n=!0,r=e._parseColor(r);break;case"array":n="number"===t.value;break;default:n=!1}this.getValue=n?this._interpolate(r):this._piecewise(r)}return e.prototype._piecewise=function(e){var t=e.stops;return t?function(e){var r=t.length;if(0!==r){for(var n=0,i=0;r>i&&t[i][0]<=e;i++)n=i;return t[n][1]}}:function(){return e}},e.prototype._interpolate=function(e){var t=e.stops;if(t){var r=e.base||1;return function(e){for(var i,o,s=t.length,a=0;s>a;a++){var u=t[a];if(!(u[0]<=e)){o=u;break}i=u}if(i&&o){if(a=o[0]-i[0],e-=i[0],e=1===r?e/a:(Math.pow(r,e)-1)/(Math.pow(r,a)-1),Array.isArray(i[1])){for(i=i[1],o=o[1],s=[],a=0;a<i.length;a++)s.push(n.interpolate(i[a],o[a],e));return s}return n.interpolate(i[1],o[1],e)}return i?i[1]:o?o[1]:void 0}}return function(){return e}},e._parseColor=function(t){if(Array.isArray(t))return t;if("string"==typeof t)return t=new r(t),[t.r/255,t.g/255,t.b/255,t.a||1];if(t&&t.stops)return t.stops=t.stops.map(function(t){return[t[0],e._parseColor(t[1])]}),t;throw Error("Incorrect color definition "+t)},e}()})},"esri/layers/vectorTiles/Color":function(){define(["require","exports","esri/Color"],function(e,t,r){return function(){return function(e){return new r(e)}}()})},"esri/Color":function(){define(["dojo/_base/declare","dojo/_base/Color","dojo/has","./kernel"],function(e,t,r,n){e=e([t],{declaredClass:"esri.Color"}),e.toJsonColor=function(e){return e&&[e.r,e.g,e.b,1<e.a?e.a:Math.round(255*e.a)]},e.toDojoColor=function(e){return e&&new t([e[0],e[1],e[2],e[3]/255])};var i,o="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(i=0;i<o.length;i++)e[o[i]]=t[o[i]];return r("extend-esri")&&(n.Color=e),e})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(e,t,r){function n(e,t){throw Error("declare"+(t?" "+t:"")+": "+e)}function i(e,t){for(var r,i,o,s,a,u=[],c=[{cls:0,refs:[]}],l={},f=1,h=e.length,p=0;h>p;++p){for((r=e[p])?"[object Function]"!=w.call(r)&&n("mixin #"+p+" is not a callable constructor.",t):n("mixin #"+p+" is unknown. Did you use dojo.require to pull it in?",t),i=r._meta?r._meta.bases:[r],o=0,r=i.length-1;r>=0;--r)s=i[r].prototype,s.hasOwnProperty("declaredClass")||(s.declaredClass="uniqName_"+T++),s=s.declaredClass,l.hasOwnProperty(s)||(l[s]={count:0,refs:[],cls:i[r]},++f),s=l[s],o&&o!==s&&(s.refs.push(o),++o.count),o=s;++o.count,c[0].refs.push(o)}for(;c.length;){for(o=c.pop(),u.push(o.cls),--f;a=o.refs,1==a.length;){if(o=a[0],!o||--o.count){o=0;break}u.push(o.cls),--f}if(o)for(p=0,h=a.length;h>p;++p)o=a[p],--o.count||c.push(o)}return f&&n("can't build consistent linearization",t),r=e[0],u[0]=r?r._meta&&r===u[u.length-r._meta.bases.length]?r._meta.bases.length:1:0,u}function o(e,t,r,i){var o,s,a,u,c,l,f=this._inherited=this._inherited||{};if("string"==typeof e&&(o=e,e=t,t=r,r=i),"function"==typeof e)a=e,e=t,t=r;else try{a=e.callee}catch(h){if(!(h instanceof TypeError))throw h;n("strict mode inherited() requires the caller function to be passed before arguments",this.declaredClass)}if((o=o||a.nom)||n("can't deduce a name to call inherited()",this.declaredClass),r=i=0,u=this.constructor._meta,i=u.bases,l=f.p,"constructor"!=o){if(f.c!==a&&(l=0,c=i[0],u=c._meta,u.hidden[o]!==a)){(s=u.chains)&&"string"==typeof s[o]&&n("calling chained method with inherited: "+o,this.declaredClass);do if(u=c._meta,s=c.prototype,u&&(s[o]===a&&s.hasOwnProperty(o)||u.hidden[o]===a))break;while(c=i[++l]);l=c?l:-1}if(c=i[++l])if(s=c.prototype,c._meta&&s.hasOwnProperty(o))r=s[o];else{a=b[o];do if(s=c.prototype,(r=s[o])&&(c._meta?s.hasOwnProperty(o):r!==a))break;while(c=i[++l])}r=c&&r||b[o]}else{if(f.c!==a&&(l=0,(u=i[0]._meta)&&u.ctor!==a)){for((s=u.chains)&&"manual"===s.constructor||n("calling chained constructor with inherited",this.declaredClass);(c=i[++l])&&(!(u=c._meta)||u.ctor!==a););l=c?l:-1}for(;(c=i[++l])&&!(r=(u=c._meta)?u.ctor:c););r=c&&r}return f.c=r,f.p=l,r?!0===t?r:r.apply(this,t||e):void 0}function s(e,t,r){return"string"==typeof e?"function"==typeof t?this.__inherited(e,t,r,!0):this.__inherited(e,t,!0):"function"==typeof e?this.__inherited(e,t,!0):this.__inherited(e,!0)}function a(e,t,r,n){var i=this.getInherited(e,t,r);return i?i.apply(this,n||r||t||e):void 0}function u(e){for(var t=this.constructor._meta.bases,r=0,n=t.length;n>r;++r)if(t[r]===e)return!0;return this instanceof e}function c(e,n){for(var i in n)"constructor"!=i&&n.hasOwnProperty(i)&&(e[i]=n[i]);if(t("bug-for-in-skips-shadowed"))for(var o=r._extraNames,s=o.length;s;)i=o[--s],"constructor"!=i&&n.hasOwnProperty(i)&&(e[i]=n[i])}function l(e){return g.safeMixin(this.prototype,e),this}function f(e,t){return e instanceof Array||"function"==typeof e||(t=e,e=void 0),t=t||{},e=e||[],g([this].concat(e),t)}function h(e,t){return function(){var r,n,i=arguments,o=i,s=i[0];n=e.length;var a;if(!(this instanceof i.callee))return v(i);if(t&&(s&&s.preamble||this.preamble))for(a=Array(e.length),a[0]=i,r=0;(s=i[0])&&(s=s.preamble)&&(i=s.apply(this,i)||i),s=e[r].prototype,(s=s.hasOwnProperty("preamble")&&s.preamble)&&(i=s.apply(this,i)||i),++r!=n;)a[r]=i;for(r=n-1;r>=0;--r)s=e[r],(s=(n=s._meta)?n.ctor:s)&&s.apply(this,a?a[r]:i);(s=this.postscript)&&s.apply(this,o)}}function p(e,t){return function(){var r=arguments,n=r,i=r[0];return this instanceof r.callee?(t&&(i&&(i=i.preamble)&&(n=i.apply(this,n)||n),(i=this.preamble)&&i.apply(this,n)),e&&e.apply(this,r),void((i=this.postscript)&&i.apply(this,r))):v(r)}}function d(e){return function(){var t,r,n=arguments,i=0;if(!(this instanceof n.callee))return v(n);for(;t=e[i];++i)if(t=(r=t._meta)?r.ctor:t){t.apply(this,n);break}(t=this.postscript)&&t.apply(this,n)}}function m(e,t,r){return function(){var n,i,o=0,s=1;for(r&&(o=t.length-1,s=-1);n=t[o];o+=s)i=n._meta,(n=(i?i.hidden:n.prototype)[e])&&n.apply(this,arguments)}}function y(e){return x.prototype=e.prototype,e=new x,x.prototype=null,e}function v(e){var t=e.callee,r=y(t);return t.apply(r,e),r}function g(e,a,v){"string"!=typeof e&&(v=a,a=e,e=""),v=v||{};var x,T,k,E,S,B,P,j=1,C=a;if("[object Array]"==w.call(a)?(B=i(a,e),k=B[0],j=B.length-k,a=B[j]):(B=[0],a?"[object Function]"==w.call(a)?(k=a._meta,B=B.concat(k?k.bases:a)):n("base class is not a callable constructor.",e):null!==a&&n("unknown base class. Did you use dojo.require to pull it in?",e)),a)for(T=j-1;x=y(a),T;--T)k=B[T],(k._meta?c:_)(x,k.prototype),E=t("csp-restrictions")?function(){}:new Function,E.superclass=a,E.prototype=x,a=x.constructor=E;else x={};for(g.safeMixin(x,v),k=v.constructor,k!==b.constructor&&(k.nom="constructor",x.constructor=k),T=j-1;T;--T)(k=B[T]._meta)&&k.chains&&(P=_(P||{},k.chains));if(x["-chains-"]&&(P=_(P||{},x["-chains-"])),a&&a.prototype&&a.prototype["-chains-"]&&(P=_(P||{},a.prototype["-chains-"])),k=!P||!P.hasOwnProperty("constructor"),B[0]=E=P&&"manual"===P.constructor?d(B):1==B.length?p(v.constructor,k):h(B,k),E._meta={bases:B,hidden:v,chains:P,parents:C,ctor:v.constructor},E.superclass=a&&a.prototype,E.extend=l,E.createSubclass=f,E.prototype=x,x.constructor=E,x.getInherited=s,x.isInstanceOf=u,x.inherited=I,x.__inherited=o,e&&(x.declaredClass=e,r.setObject(e,E)),P)for(S in P)x[S]&&"string"==typeof P[S]&&"constructor"!=S&&(k=x[S]=m(S,B,"after"===P[S]),k.nom=S);return E}var x,_=r.mixin,b=Object.prototype,w=b.toString,T=0;x=t("csp-restrictions")?function(){}:new Function;var I=e.config.isDebug?a:o;return e.safeMixin=g.safeMixin=function(e,n){var i,o;for(i in n)o=n[i],o===b[i]&&i in b||"constructor"==i||("[object Function]"==w.call(o)&&(o.nom=i),e[i]=o);if(t("bug-for-in-skips-shadowed")&&n)for(var s=r._extraNames,a=s.length;a;)i=s[--a],o=n[i],o===b[i]&&i in b||"constructor"==i||("[object Function]"==w.call(o)&&(o.nom=i),e[i]=o);return e},e.declare=g})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(e,t,r,n){var i=e.Color=function(e){e&&this.setColor(e)};return i.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:n.transparentColor||[0,0,0,0]},t.extend(i,{r:255,g:255,b:255,a:1,_set:function(e,t,r,n){this.r=e,this.g=t,this.b=r,this.a=n},setColor:function(e){return t.isString(e)?i.fromString(e,this):t.isArray(e)?i.fromArray(e,this):(this._set(e.r,e.g,e.b,e.a),e instanceof i||this.sanitize()),this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+r.map(["r","g","b"],function(e){return e=this[e].toString(16),2>e.length?"0"+e:e},this).join("")},toCss:function(e){var t=this.r+", "+this.g+", "+this.b;return(e?"rgba("+t+", "+this.a:"rgb("+t)+")"},toString:function(){return this.toCss(!0)}}),i.blendColors=e.blendColors=function(e,t,n,o){var s=o||new i;return r.forEach(["r","g","b","a"],function(r){s[r]=e[r]+(t[r]-e[r])*n,"a"!=r&&(s[r]=Math.round(s[r]))}),s.sanitize()},i.fromRgb=e.colorFromRgb=function(e,t){var r=e.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);
return r&&i.fromArray(r[1].split(/\s*,\s*/),t)},i.fromHex=e.colorFromHex=function(e,t){var n=t||new i,o=4==e.length?4:8,s=(1<<o)-1;return e=Number("0x"+e.substr(1)),isNaN(e)?null:(r.forEach(["b","g","r"],function(t){var r=e&s;e>>=o,n[t]=4==o?17*r:r}),n.a=1,n)},i.fromArray=e.colorFromArray=function(e,t){var r=t||new i;return r._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(r.a)&&(r.a=1),r.sanitize()},i.fromString=e.colorFromString=function(e,t){var r=i.named[e];return r&&i.fromArray(r,t)||i.fromRgb(e,t)||i.fromHex(e,t)},i})},"esri/layers/vectorTiles/views/vectorTiles/style/Filter":function(){define(["require","exports"],function(e,t){var r=function(){function e(t,r,n){this._op=t,"$type"===r?(this._val=n instanceof Array?n.map(function(t){return e._types.indexOf(t)}):e._types.indexOf(n),this._op+=11):(this._key=r,this._val=n)}return e.prototype.filter=function(e){switch(this._op){case 0:return this._val;case 1:return e.values[this._key]===this._val;case 2:return e.values[this._key]!==this._val;case 3:return e.values[this._key]<this._val;case 4:return e.values[this._key]>this._val;case 5:return e.values[this._key]<=this._val;case 6:return e.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(e.values[this._key]);case 8:return-1===this._val.indexOf(e.values[this._key]);case 9:for(var t=0,r=this._val;t<r.length;t++){var n=r[t];if(n.filter(e))return!0}return!1;case 10:for(t=0,r=this._val;t<r.length;t++)if(n=r[t],!n.filter(e))return!1;return!0;case 11:for(t=0,r=this._val;t<r.length;t++)if(n=r[t],n.filter(e))return!1;return!0;case 12:return e.type===this._val;case 13:return e.type!==this._val;case 14:return e.type<this._val;case 15:return e.type>this._val;case 16:return e.type>=this._val;case 17:return e.type<=this._val;case 18:return-1!==this._val.indexOf(e.type);case 19:return-1===this._val.indexOf(e.type)}},e.createFilter=function(t){if(!t)return new e(0,void 0,!0);var r=t[0];if(1>=t.length)return new e(0,void 0,"any"!==r);switch(r){case"==":return new e(1,t[1],t[2]);case"!=":return new e(2,t[1],t[2]);case">":return new e(4,t[1],t[2]);case"<":return new e(3,t[1],t[2]);case">=":return new e(6,t[1],t[2]);case"<=":return new e(5,t[1],t[2]);case"in":return new e(7,t[1],t.slice(2));case"!in":return new e(8,t[1],t.slice(2));case"any":return new e(9,void 0,t.slice(1).map(e.createFilter.bind(this)));case"all":return new e(10,void 0,t.slice(1).map(e.createFilter.bind(this)));case"none":return new e(11,void 0,t.slice(1).map(e.createFilter.bind(this)));default:throw Error("invalid operator: "+r)}},e}();return r._types=["Unknown","Point","LineString","Polygon"],r})},"esri/layers/vectorTiles/views/vectorTiles/LineTess":function(){define(["require","exports"],function(e,t){function r(e){for(var t={items:[],count:0},r=0;e>r;++r)t.items.push(void 0);return t}function n(e,t){return e[0]*t[0]+e[1]*t[1]}function i(e){return Math.sqrt(n(e,e))}function o(e,t){var r=i(t);return e[0]=t[0]/r,e[1]=t[1]/r,e}function s(e,t){return e[0]=-t[1],e[1]=t[0],e}function a(e,t){return e[0]*t[1]-e[1]*t[0]}function u(e,t){return e[0]=-t[0],e[1]=-t[1],e}function c(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function l(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function f(e,t){var r=n(e,t);return r>.999?0:-.999>r?Math.PI:Math.acos(r)}function h(e,t,r,n,o){if(0===n)e.count=0;else{var s=i(t),a=c(x[0],t,1/s);r=c(x[1],r,1/s),a=f(a,r),a=(o?-1:1)*a/n,o=Math.cos(a),a=Math.sin(a),r=t[0];var u=t[1];for(t=0;n-1>t;++t)s=r,r=o*s-a*u,u=a*s+o*u,e.items[t][0]=r,e.items[t][1]=u;e.count=n-1}}function p(e){for(var t=e.count,r=Math.floor(t/2),n=0;r>n;++n){var i=e.items[n];e.items[n]=e.items[t-n-1],e.items[t-n-1]=i}}function d(e,t,r){r=s(x[0],r),t=u(x[1],r);var n=e.vectors.items[0];n.vector[0]=r[0],n.vector[1]=r[1],n.side=-1,r=e.vectors.items[1],r.vector[0]=t[0],r.vector[1]=t[1],r.side=1,e.vectors.count=2,t=e.lists[m.ENTRY],t.items[0]=0,t.items[1]=1,t.count=2,t=e.lists[m.EXIT],t.items[0]=0,t.items[1]=1,t.count=2,e.lists[m.CAP].count=0,e.capCenter=void 0}var m;!function(e){e[e.ENTRY=1]="ENTRY",e[e.EXIT=2]="EXIT",e[e.CAP=3]="CAP"}(m=t.VectorRole||(t.VectorRole={}));var y;!function(e){e[e.START=1]="START",e[e.END=2]="END"}(y=t.CapPosition||(t.CapPosition={})),t.SYSTEM_MAG_LIMIT=3.8,t.MITER_SAFE_RADS=2*Math.acos(1/t.SYSTEM_MAG_LIMIT);var v=t.SYSTEM_MAG_LIMIT*t.SYSTEM_MAG_LIMIT,g=16/(2*Math.PI);t.allocTriangles=function(e){for(var t={items:[],count:0},r=0;e>r;++r)t.items.push({v1:{vector:[void 0,void 0],side:void 0},v2:{vector:[void 0,void 0],side:void 0},v3:{vector:[void 0,void 0],side:void 0}});return t},t.allocExtrudeVectors=function(){for(var e={items:[],count:0},t=0;30>t;++t)e.items.push({vector:[void 0,void 0],side:void 0});return t={},t[m.ENTRY]=r(20),t[m.EXIT]=r(20),t[m.CAP]=r(20),{vectors:e,lists:t}};for(var x=[],_=0;32>_;++_)x.push([void 0,void 0]);var b=function(e){for(var t={items:[],count:0},r=0;e>r;++r)t.items.push([void 0,void 0]);return t}(16);t.length=i,t.normalize=o,t.getNumberOfSlices=function(e){return Math.round(e*g)},t.getRads=f;var w=[void 0,void 0],T=[void 0,void 0];t.bridge=function(e,t,r,n){var i=t.vectors;t=t.lists[m.EXIT];var o=r.vectors;r=r.lists[m.ENTRY];var s,a;if(t.count===r.count+1)n=t.items,s=i.items,a=r.items,o=o.items;else if(r.count===t.count+1)n=r.items,s=o.items,a=t.items,o=i.items;else{if(t.count!==r.count)throw Error("Cannot bridge "+t.count+" to "+r.count+".");n?(n=t.items,s=i.items,a=r.items,o=o.items):(n=r.items,s=o.items,a=t.items,o=i.items)}for(i=t.count+r.count-2,e.count=i,w[0]=n,w[1]=a,T[0]=s,T[1]=o,t=0;i>t;++t)o=e.items[t],r=(t+0)%2,r=T[r][w[r][Math.floor((t+0)/2)]],o.v1.vector[0]=r.vector[0],o.v1.vector[1]=r.vector[1],o.v1.side=r.side,o.v1.base=r.base,r=(t+1)%2,r=T[r][w[r][Math.floor((t+1)/2)]],o.v2.vector[0]=r.vector[0],o.v2.vector[1]=r.vector[1],o.v2.side=r.side,o.v2.base=r.base,r=(t+2)%2,r=T[r][w[r][Math.floor((t+2)/2)]],o.v3.vector[0]=r.vector[0],o.v3.vector[1]=r.vector[1],o.v3.side=r.side,o.v3.base=r.base},t.pie=function(e,t){if(0===t.lists[m.CAP].count)e.count=0;else{if(1===t.lists[m.CAP].count)throw Error("A single vector is not enough to define a pie.");e.count=t.lists[m.CAP].count-1;for(var r=0;r<e.count;++r){var n=e.items[r],i=t.vectors.items[t.lists[m.CAP].items[r]];n.v1.vector[0]=i.vector[0],n.v1.vector[1]=i.vector[1],n.v1.side=i.side,n.v1.base=i.base,i=t.vectors.items[t.lists[m.CAP].items[r+1]],n.v2.vector[0]=i.vector[0],n.v2.vector[1]=i.vector[1],n.v2.side=i.side,n.v2.base=i.base,i=t.vectors.items[t.capCenter],n.v3.vector[0]=i.vector[0],n.v3.vector[1]=i.vector[1],n.v3.side=i.side,n.v3.base=i.base}}},t.buttCap=function(e,t,r){d(e,t,r)},t.roundCap=function(e,t,r,n,i){d(e,t,r),r=n===y.START?0:1,n=n===y.START?1:0,e.capCenter=e.vectors.count,t=e.vectors.items[e.capCenter],t.vector[0]=0,t.vector[1]=0,t.side=0,++e.vectors.count,h(b,e.vectors.items[r].vector,e.vectors.items[n].vector,i,!1),i=e.vectors.count,t=e.lists[m.CAP],t.items[0]=r,r=e.vectors.items[r].side;for(var o=e.vectors.items[n].side,s=0;s<b.count;++s){var a=s<b.count/2?r:o,u=b.items[s],c=e.vectors.items[i+s];c.vector[0]=u[0],c.vector[1]=u[1],c.side=a,t.items[s+1]=i+s}t.items[b.count+1]=n,t.count=b.count+2,e.vectors.count=i+b.count};var I=Math.cos(Math.PI/4),k=Math.sin(Math.PI/4),E=Math.sqrt(2);t.squareCap=function(e,t,r,n){d(e,t,r),t=n===y.START?0:1,r=n===y.START?1:0;var i=x[0],o=x[1],s=x[2],a=x[3];n=x[4];var u=e.vectors.items[t].vector;i[0]=I*u[0]-k*u[1],i[1]=k*u[0]+I*u[1],c(a,i,E),o[0]=I*i[0]-k*i[1],o[1]=k*i[0]+I*i[1],s[0]=I*o[0]-k*o[1],s[1]=k*o[0]+I*o[1],c(n,s,E),t=e.vectors.items[t],t.vector[0]=a[0],t.vector[1]=a[1],e=e.vectors.items[r],e.vector[0]=n[0],e.vector[1]=n[1]},t.squareCapAlt=function(e,t,r,n){d(e,t,r),t=n===y.START?0:1,n=n===y.START?1:0,e.capCenter=e.vectors.count,r=e.vectors.items[e.capCenter],r.vector[0]=0,r.vector[1]=0,r.side=0,++e.vectors.count;var i=x[0],o=x[1],s=x[2],a=x[3];r=x[4];var u=e.vectors.items[t].vector;i[0]=I*u[0]-k*u[1],i[1]=k*u[0]+I*u[1],c(a,i,E),o[0]=I*i[0]-k*i[1],o[1]=k*i[0]+I*i[1],s[0]=I*o[0]-k*o[1],s[1]=k*o[0]+I*o[1],c(r,s,E),i=e.vectors.count,o=e.lists[m.CAP],o.items[0]=t,s=e.vectors.items[i+0],s.vector[0]=a[0],s.vector[1]=a[1],s.side=e.vectors.items[t].side,o.items[1]=i+0,t=e.vectors.items[i+1],t.vector[0]=r[0],t.vector[1]=r[1],t.side=e.vectors.items[n].side,o.items[2]=i+1,o.items[3]=n,o.count=4,e.vectors.count+=2},t.fastMiterJoin=d,t.miterJoin=function(e,t,r){t=s(x[0],t),r=s(x[1],r);var i=x[2];i[0]=t[0]+r[0],i[1]=t[1]+r[1],r=o(x[3],i),t=n(r,t),r=c(x[4],r,1/t),t=u(x[5],r),i=e.vectors.items[0],i.vector[0]=r[0],i.vector[1]=r[1],i.side=-1,r=e.vectors.items[1],r.vector[0]=t[0],r.vector[1]=t[1],r.side=1,e.vectors.count=2,t=e.lists[m.ENTRY],t.items[0]=0,t.items[1]=1,t.count=2,t=e.lists[m.EXIT],t.items[0]=0,t.items[1]=1,t.count=2,e.lists[m.CAP].count=0,e.capCenter=void 0},t.bevelJoin=function(e,t,r,i){var f=i*i;i=a(t,r);var h=i>0?[-1,1]:[1,-1],d=h[0],h=h[1],y=i>0?u(x[0],s(x[1],t)):s(x[2],t),g=i>0?u(x[3],s(x[4],r)):s(x[5],r),_=x[6];_[0]=y[0]+g[0],_[1]=y[1]+g[1];var _=o(x[7],_),b=u(x[8],_),w=n(_,y),T=a(_,y),I=Math.abs(T/w),k=1+I*I,E=v>k?[I,!1]:[Math.sqrt(v-1),!0],T=E[0],E=E[1],I=f>k?[I,!1]:[Math.sqrt(f-1),!0],f=I[0];(I=I[1])&&E?(E=e.vectors.items[0],l(E.vector,u(x[9],y),c(x[10],u(x[11],t),T)),E.side=d,b=e.vectors.items[1],l(b.vector,u(x[12],g),c(x[13],r,T)),b.side=d,d=e.vectors.items[2],d.vector[0]=0,d.vector[1]=0,d.side=0,d=e.vectors.items[3],l(d.vector,y,c(x[14],t,f)),d.side=h,t=e.vectors.items[4],l(t.vector,g,c(x[15],u(x[16],r),f)),t.side=h,e.vectors.count=5,r=e.lists[m.ENTRY],r.items[0]=0,r.items[1]=2,r.items[2]=3,r.count=3,r=e.lists[m.EXIT],r.items[0]=1,r.items[1]=2,r.items[2]=4,r.count=3,r=e.lists[m.CAP],r.items[0]=3,r.items[1]=4,r.count=2,e.capCenter=2):!I&&E?(E=e.vectors.items[0],l(E.vector,u(x[9],y),c(x[10],u(x[11],t),T)),E.side=d,b=e.vectors.items[1],l(b.vector,u(x[12],g),c(x[13],r,T)),b.side=d,d=e.vectors.items[2],d.vector[0]=0,d.vector[1]=0,d.side=0,d=e.vectors.items[3],c(d.vector,_,1/w),d.side=h,e.vectors.count=4,r=e.lists[m.ENTRY],r.items[0]=0,r.items[1]=2,r.items[2]=3,r.count=3,r=e.lists[m.EXIT],r.items[0]=1,r.items[1]=2,r.items[2]=3,r.count=3,e.lists[m.CAP].count=0,e.capCenter=void 0):I&&!E?(E=e.vectors.items[0],c(E.vector,b,1/w),E.side=d,b=e.vectors.items[1],b.vector[0]=0,b.vector[1]=0,b.side=0,d=e.vectors.items[2],l(d.vector,y,c(x[9],t,f)),d.side=h,d=e.vectors.items[3],l(d.vector,g,c(x[10],u(x[11],r),f)),d.side=h,e.vectors.count=4,r=e.lists[m.ENTRY],r.items[0]=0,r.items[1]=1,r.items[2]=2,r.count=3,r=e.lists[m.EXIT],r.items[0]=0,r.items[1]=1,r.items[2]=3,r.count=3,r=e.lists[m.CAP],r.items[0]=2,r.items[1]=3,r.count=2,e.capCenter=1):I||E||(E=e.vectors.items[0],c(E.vector,b,1/w),E.side=d,b=e.vectors.items[1],c(b.vector,_,1/w),b.side=h,e.vectors.count=2,r=e.lists[m.ENTRY],r.items[0]=0,r.items[1]=1,r.count=2,r=e.lists[m.EXIT],r.items[0]=0,r.items[1]=1,r.count=2,e.lists[m.CAP].count=0,e.capCenter=void 0),0>i&&(p(e.lists[m.ENTRY]),p(e.lists[m.EXIT]))},t.roundJoin=function(e,t,r,i){var f=a(t,r),d=f>0?[-1,1]:[1,-1],y=d[0],d=d[1],g=f>0?u(x[0],s(x[1],t)):s(x[2],t),_=f>0?u(x[3],s(x[4],r)):s(x[5],r),w=x[6];w[0]=g[0]+_[0],w[1]=g[1]+_[1];var T=o(x[7],w),w=u(x[8],T),I=n(T,g),T=a(T,g),T=Math.abs(T/I),k=v>1+T*T?[T,!1]:[Math.sqrt(v-1),!0],T=k[0];for(k[1]?(k=e.vectors.items[0],k.vector[0]=g[0],k.vector[1]=g[1],k.side=d,k=e.vectors.items[1],k.vector[0]=_[0],k.vector[1]=_[1],k.side=d,k=e.vectors.items[2],l(k.vector,u(x[9],g),c(x[10],u(x[11],t),T)),k.side=y,t=e.vectors.items[3],l(t.vector,u(x[12],_),c(x[13],r,T)),t.side=y,r=e.vectors.items[4],r.vector[0]=0,r.vector[1]=0,r.side=0,e.vectors.count=5,r=e.lists[m.ENTRY],r.items[0]=2,r.items[1]=4,r.items[2]=0,r.count=3,r=e.lists[m.EXIT],r.items[0]=3,r.items[1]=4,r.items[2]=1,r.count=3,e.capCenter=4):(k=e.vectors.items[0],k.vector[0]=g[0],k.vector[1]=g[1],k.side=d,k=e.vectors.items[1],k.vector[0]=_[0],k.vector[1]=_[1],k.side=d,k=e.vectors.items[2],c(k.vector,w,1/I),k.side=y,t=e.vectors.items[3],t.vector[0]=0,t.vector[1]=0,t.side=0,e.vectors.count=4,r=e.lists[m.ENTRY],r.items[0]=2,r.items[1]=3,r.items[2]=0,r.count=3,r=e.lists[m.EXIT],r.items[0]=2,r.items[1]=3,r.items[2]=1,r.count=3,e.capCenter=3),h(b,g,_,i,0>f),i=e.vectors.count,g=e.lists[m.CAP],_=g.items[0]=0;_<b.count;++_)r=b.items[_],y=e.vectors.items[i+_],y.vector[0]=r[0],y.vector[1]=r[1],y.side=d,g.items[_+1]=i+_;g.items[b.count+1]=1,g.count=b.count+2,e.vectors.count=i+b.count,0>f&&(p(e.lists[m.ENTRY]),p(e.lists[m.EXIT]))},t.unitRoundJoin=function(e,t,r,n){var i=a(t,r),o=i>0?[-1,1]:[1,-1],c=o[0],o=o[1];t=i>0?u(x[0],s(x[1],t)):s(x[2],t),r=i>0?u(x[3],s(x[4],r)):s(x[5],r);var l=e.vectors.items[0];for(l.vector[0]=t[0],l.vector[1]=t[1],l.side=o,l=e.vectors.items[1],l.vector[0]=r[0],l.vector[1]=r[1],l.side=o,l=e.vectors.items[2],u(l.vector,t),l.side=c,l=e.vectors.items[3],u(l.vector,r),l.side=c,c=e.vectors.items[4],c.vector[0]=0,c.vector[1]=0,c.side=0,e.vectors.count=5,c=e.lists[m.ENTRY],c.items[0]=2,c.items[1]=4,c.items[2]=0,c.count=3,c=e.lists[m.EXIT],c.items[0]=3,c.items[1]=4,c.items[2]=1,c.count=3,e.capCenter=4,h(b,t,r,n,0>i),n=e.vectors.count,t=e.lists[m.CAP],c=t.items[0]=0;c<b.count;++c)r=b.items[c],l=e.vectors.items[n+c],l.vector[0]=r[0],l.vector[1]=r[1],l.side=o,t.items[c+1]=n+c;t.items[b.count+1]=1,t.count=b.count+2,e.vectors.count=n+b.count,0>i&&(p(e.lists[m.ENTRY]),p(e.lists[m.EXIT]))},t.rectJoin=function(e,t,r){t=s(x[0],t),r=s(x[1],r);var n=e.vectors.items[0];n.vector[0]=t[0],n.vector[1]=t[1],n.side=-1,n=e.vectors.items[1],n.vector[0]=r[0],n.vector[1]=r[1],n.side=-1,n=e.vectors.items[2],u(n.vector,t),n.side=1,t=e.vectors.items[3],u(t.vector,r),t.side=1,e.vectors.count=4,t=e.lists[m.ENTRY],t.items[0]=0,t.items[1]=2,t.count=2,t=e.lists[m.EXIT],t.items[0]=1,t.items[1]=3,t.count=2,e.capCenter=void 0}})},"esri/layers/vectorTiles/views/vectorTiles/SymbolBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./Bucket ./Geometry ./style/StyleLayer ./Placement ./GeometryUtils ./TextShaping dojox/string/BidiEngine".split(" "),function(e,t,r,n,i,o,s,a,u,c,l){function f(e,t){if(e.iconMosaicItem&&t.iconMosaicItem){if(e.iconMosaicItem.page!==t.iconMosaicItem.page)return e.iconMosaicItem.page<t.iconMosaicItem.page?-1:1}else{if(e.iconMosaicItem&&!t.iconMosaicItem)return 1;if(!e.iconMosaicItem&&t.iconMosaicItem)return-1}return 0}var h=function(){return function(){}}(),p=function(){return function(e,t,r,n){this.line=t,this.shaping=e,this.iconMosaicItem=r,this.anchor=n}}();return function(){return function(){}}(),e=function(e){function t(t,r,n,i,o,s,a,u){return t=e.call(this,t,r)||this,t._markerRatio=1,t._markerMap=new Map,t._markerVertexBuffer=n,t._markerIndexBuffer=i,t._textVertexBuffer=o,t._textIndexBuffer=s,t._placementEngine=a,t._workerTileHandler=u,t}return r(t,e),Object.defineProperty(t.prototype,"markerPageMap",{get:function(){return this._markerMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textIndexStart",{get:function(){return this._textTriangleElementsStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textIndexCount",{get:function(){return this._textTriangleElementsNum},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sdfMarker",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.copy=function(e,r,n,i,o){return o=new t(this.layer,this.zoom,e,r,n,i,o,this._workerTileHandler),o.layerIndex=this.layerIndex,o.layerExtent=this.layerExtent,o._markerVertexStart=e.index,o._markerTriangleElementsStart=r.index,o._textVertexStart=n.index,o._textTriangleElementsStart=i.index,o._markerTriangleElementsNum=0,o._textTriangleElementsNum=0,o._symbolInstances=this._symbolInstances,o._glyphItems=this._glyphItems,o._textLayout=this._textLayout,o._markerLayout=this._markerLayout,o._isLinePlacement=this._isLinePlacement,o._avoidEdges=this._avoidEdges,o},t.prototype.getResources=function(e,r,n){var i=this.layer,o=this.zoom;e&&e.setExtent(this.layerExtent);for(var s=i.getLayoutValue("icon-image",o),a=i.getLayoutValue("text-field",o),u=i.getLayoutValue("text-font",o),i=i.getLayoutValue("text-transform",o),o=[],c=0,l=this._features;c<l.length;c++){var f=l[c],p=f.getGeometry(e);if(p&&0!==p.length){var d=void 0;s&&(d=this._replaceKeys(s,f.values))&&r.add(d);var m=void 0,y=!1;if(a){switch(m=this._replaceKeys(a,f.values),i){case 2:m=m.toLowerCase();break;case 1:m=m.toUpperCase()}if(t._bidiEngine.hasBidiChar(m)&&(y=void 0,y="rtl"===t._bidiEngine.checkContextual(m)?"IDNNN":"ICNNN",m=t._bidiEngine.bidiTransform(m,y,"VLYSN"),y=!0),f=m.length,f>0){var v=n[u];v||(v=n[u]=new Set);for(var g=0;f>g;g++){var x=m.charCodeAt(g);v.add(x)}}}(d||m)&&(f=new h,f.sprite=d,f.label=m,f.rtl=y,f.geometry=p,o.push(f))}}this._symbolFeatures=o},t.prototype.processFeatures=function(e,r){e&&e.setExtent(this.layerExtent);var n,i=this.layer,o=this.zoom,l=this._isLinePlacement=1===i.getLayoutValue("symbol-placement",o),h=this._avoidEdges=i.getLayoutValue("symbol-avoid-edges",o)&&!l,d=8*i.getLayoutValue("symbol-spacing",o),m=i.getLayoutValue("icon-image",o),y=i.getLayoutValue("text-field",o),v=this._workerTileHandler;m&&(this._markerLayout=new s.IconLayout(i,o,l),n=v.getSpriteItems());var g,x;if(y){var _=this._textLayout=new s.TextLayout(i,o,l);switch(g=void 0,_.font&&_.font.length&&(g=_.font[0]),x=.5,_.anchor){case 5:case 1:case 7:x=0;break;case 6:case 2:case 8:x=1}switch(i=.5,_.anchor){case 5:case 3:case 6:i=0;break;case 7:case 4:case 8:i=1}switch(o=.5,_.justify){case 0:o=0;break;case 2:o=1}var m=24*_.letterSpacing,y=l?0:24*_.maxWidth,b=24*_.lineHeight,_=[24*_.offset[0],24*_.offset[1]];g=v.getGlyphItems(g),x=new c(g,y,b,m,_,x,i,o)}for(this._markerVertexStart=this._markerVertexBuffer.index,this._markerTriangleElementsStart=this._markerIndexBuffer.index,this._textVertexStart=this._textVertexBuffer.index,this._textTriangleElementsStart=this._textIndexBuffer.index,this._textTriangleElementsNum=this._markerTriangleElementsNum=0,this._markerMap.clear(),this._symbolInstances=v=[],this._glyphItems=g,i=this._textLayout,o=1,i&&i.size&&(o=i.size/24),m=i?i.maxAngle*u.C_DEG_TO_RAD:0,y=i?8*i.size:0,b=0,_=this._symbolFeatures;b<_.length;b++){var w=_[b],T=void 0;w.sprite&&(T=n[w.sprite]);var I=void 0,k=w.label,E=0;if(k&&(I=x.getShaping(k,w.rtl))&&0<I.length){for(var E=1e30,k=-1e30,S=0,B=I;S<B.length;S++)var P=B[S],E=Math.min(E,P.x),k=Math.max(k,P.x);E=(k-E+48)*o*8}for(k=0,w=w.geometry;k<w.length;k++)for(S=w[k],P=void 0,l?(I&&0<I.length&&i&&i.size&&t._smoothVertices(S,8*i.size*(2+Math.min(2,4*Math.abs(i.offset[1])))),P=t._findAnchors(S,d,E)):P=[new a.Anchor(S[0].x,S[0].y)],B=0;B<P.length;B++){var j=P[B];0>j.x||4096<j.x||0>j.y||4096<j.y||l&&E>0&&0===i.rotationAlignment&&!t._honorsTextMaxAngle(S,j,E,m,y)||v.push(new p(I,S,T,j))}}for(v.sort(f),l=0;l<v.length;l++)this._processFeature(v[l],g,h)},t.prototype.updateSymbols=function(){this._markerVertexStart=this._markerVertexBuffer.index,this._markerTriangleElementsStart=this._markerIndexBuffer.index,this._textVertexStart=this._textVertexBuffer.index,this._textTriangleElementsStart=this._textIndexBuffer.index,this._textTriangleElementsNum=this._markerTriangleElementsNum=0,this._markerMap.clear();for(var e=this._glyphItems,t=this._avoidEdges,r=0,n=this._symbolInstances;r<n.length;r++)this._processFeature(n[r],e,t)},t.prototype._replaceKeys=function(e,t){return e.replace(/{([^{}]+)}/g,function(e,r){return r in t?t[r]:""})},t.prototype._processFeature=function(e,t,r){var n=e.line,i=e.iconMosaicItem,s=e.shaping,a=e.anchor,c=(e=this._markerLayout)&&!!i,l=!0,f=1;c&&(f=e.size/(1/this._markerRatio)*8,l=e.optional||!i);var h,p=this._textLayout,d=p&&s&&0<s.length;h=1;var m=!0;d&&(h=p.size/24,h*=8,m=p.optional||!s||0===s.length);var y,v=new o.Point(0,-17);if(c){if(y=this._placementEngine.getIconPlacement(a,i,f,n,e,r),y.footprint.minzoom===u.C_INFINITY&&!l)return;a.minzoom>y.footprint.minzoom&&(y.footprint.minzoom=a.minzoom)}var g;if(d&&(g=this._placementEngine.getTextPlacement(a,v,s,t,h,n,p,r))){if(g.footprint.minzoom===u.C_INFINITY&&!m)return;a.minzoom>g.footprint.minzoom&&(g.footprint.minzoom=a.minzoom)}(!m&&!l||!l&&g&&g.footprint.minzoom!==u.C_INFINITY||!m&&y&&y.footprint.minzoom!==u.C_INFINITY)&&(t=Math.max(y.footprint.minzoom,g.footprint.minzoom),y.footprint.minzoom=t,g.footprint.minzoom=t),g&&g.footprint.minzoom!==u.C_INFINITY&&(p.ignorePlacement||this._placementEngine.add(g),this._addPlacedSymbols(g.shapes,g.footprint.minzoom,this.zoom,!1)),y&&y.footprint.minzoom!==u.C_INFINITY&&(e.ignorePlacement||this._placementEngine.add(y),this._addPlacedSymbols(y.shapes,y.footprint.minzoom,this.zoom,!0,i.page))},t.prototype._addPlacedSymbols=function(e,t,r,n,i){void 0===i&&(i=-1),t=Math.max(r+u.log2(t),0);for(var o=0;o<e.length;o++){var s=e[o],a=Math.max(r+u.log2(s.minzoom),t),c=Math.min(r+u.log2(s.maxzoom),25);if(!(a>=c)){var l=s.tl,f=s.tr,h=s.bl,p=s.br,d=s.mosaicRect,m=-s.labelAngle,s=s.anchor,y=n?this._markerVertexBuffer:this._textVertexBuffer,v=n?this._markerIndexBuffer:this._textIndexBuffer,g=y.index,x=d.x,_=d.y,b=x+d.width,d=_+d.height;y.add(s.x,s.y,l.x,l.y,x,_,m,a,c,t),y.add(s.x,s.y,f.x,f.y,b,_,m,a,c,t),y.add(s.x,s.y,h.x,h.y,x,d,m,a,c,t),y.add(s.x,s.y,p.x,p.y,b,d,m,a,c,t),v.add(g+0,g+1,g+2),v.add(g+1,g+2,g+3),n?(this._markerMap.has(i)?this._markerMap.get(i)[1]+=6:this._markerMap.set(i,[this._markerTriangleElementsStart+this._markerTriangleElementsNum/3,6]),this._markerTriangleElementsNum+=6):this._textTriangleElementsNum+=6}}},t._findAnchors=function(e,t,r){t+=r;for(var n=0,i=e.length-1,s=0;i>s;s++)n+=o.Point.distance(e[s],e[s+1]);if(s=.5*(r||t),s>=n)return[];r=s/n,t=n/Math.max(Math.round(n/t),1);for(var n=0,i=-t/2,c=[],l=e.length-1,s=0;l>s;s++){for(var f=e[s],h=e[s+1],p=h.x-f.x,d=h.y-f.y,m=Math.sqrt(p*p+d*d),y=void 0;n+m>i+t;){var i=i+t,v=(i-n)/m,g=u.interpolate(f.x,h.x,v),v=u.interpolate(f.y,h.y,v);void 0===y&&(y=Math.atan2(d,p)),c.push(new a.Anchor(g,v,y,s,r))}n+=m}return c},t.deviation=function(e,t,r){return Math.atan2((t.x-e.x)*(r.y-t.y)-(t.y-e.y)*(r.x-t.x),(t.x-e.x)*(r.x-t.x)+(t.y-e.y)*(r.y-t.y))},t._honorsTextMaxAngle=function(e,t,r,n,i){var s=0;r/=2;for(var a=new o.Point(t.x,t.y),u=t.segment+1;s>-r;){if(--u,0>u)return!1;s-=o.Point.distance(e[u],a),a=e[u]}s+=o.Point.distance(e[u],e[u+1]),t=[];for(var a=0,c=e.length;r>s;){var l=e[u],f=void 0;do{if(++u,u===c)return!1;f=e[u]}while(f.isEqual(l));var h=u,p=void 0;do{if(++h,h===c)return!1;p=e[h]}while(p.isEqual(f));for(l=this.deviation(l,f,p),t.push({deviation:l,distToAnchor:s}),a+=l;s-t[0].distToAnchor>i;)a-=t.shift().deviation;if(Math.abs(a)>n)return!1;s+=o.Point.distance(f,p)}return!0},t._smoothVertices=function(e,t){if(!(0>=t)){var r=e.length;if(!(3>r)){var n=[],i=0;n.push(0);for(var s=1;r>s;s++)i+=o.Point.distance(e[s],e[s-1]),n.push(i);t=Math.min(t,.2*i),i=[],i.push(e[0].x),i.push(e[0].y);var a=e[r-1].x,u=e[r-1].y,s=o.Point.sub(e[0],e[1]);for(s.normalize(),e[0].x+=t*s.x,e[0].y+=t*s.y,s.assignSub(e[r-1],e[r-2]),s.normalize(),e[r-1].x+=t*s.x,e[r-1].y+=t*s.y,s=1;r>s;s++)n[s]+=t;n[r-1]+=t;for(var c=.5*t,s=1;r-1>s;s++){for(var l=0,f=0,h=0,p=s-1;p>=0&&!(n[p+1]<n[s]-c);p--){var d=c+n[p+1]-n[s],m=n[p+1]-n[p],y=n[s]-n[p]<c?1:d/m;if(1e-6>Math.abs(y))break;var v=y*y,g=y*d-.5*v*m,x=y*m/t,_=e[p+1],b=e[p].x-_.x,w=e[p].y-_.y,l=l+x/g*(_.x*y*d+.5*v*(d*b-m*_.x)-v*y*m*b/3),f=f+x/g*(_.y*y*d+.5*v*(d*w-m*_.y)-v*y*m*w/3),h=h+x}for(p=s+1;r>p&&!(n[p-1]>n[s]+c)&&(d=c-n[p-1]+n[s],m=n[p]-n[p-1],y=n[p]-n[s]<c?1:d/m,!(1e-6>Math.abs(y)));p++)v=y*y,g=y*d-.5*v*m,x=y*m/t,_=e[p-1],b=e[p].x-_.x,w=e[p].y-_.y,l+=x/g*(_.x*y*d+.5*v*(d*b-m*_.x)-v*y*m*b/3),f+=x/g*(_.y*y*d+.5*v*(d*w-m*_.y)-v*y*m*w/3),h+=x;i.push(l/h),i.push(f/h)}for(i.push(a),i.push(u),p=s=0;r>s;s++)e[s].x=i[p++],e[s].y=i[p++]}}},t}(i),e._bidiEngine=new l,e})},"esri/layers/vectorTiles/views/vectorTiles/Placement":function(){define(["require","exports","./Geometry","./GeometryUtils","./Conflict"],function(e,t,r,n,i){e=function(){return function(e,t,r,n,i){void 0===r&&(r=0),void 0===n&&(n=-1),void 0===i&&(i=u),this.x=e,this.y=t,this.angle=r,this.segment=n,this.minzoom=i}}(),t.Anchor=e,e=function(){return function(e,t,r){this.glyph=e,this.x=t,this.y=r}}(),t.ShapedGlyph=e;var o=function(){return function(e,t,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=u),void 0===s&&(s=n.C_INFINITY),this.anchor=e,this.labelAngle=t,this.glyphAngle=r,this.upsideDown=i,this.minzoom=o,this.maxzoom=s}}(),s=function(){return function(e,t,r,n,i,o,s,a,u){this.tl=e,this.tr=t,this.bl=r,this.br=n,this.mosaicRect=i,this.labelAngle=o,this.anchor=s,this.minzoom=a,this.maxzoom=u}}();t.PlacedSymbol=s;var a=function(){return function(e,t){this.footprint=e,this.shapes=t}}();t.Placement=a;var u=.5;e=function(){function e(e){this.mapAngle=e,this._conflictEngine=new i.ConflictEngine(e)}return e.prototype.getIconPlacement=function(e,t,o,c,l,f){var h=t.width/t.pixelRatio,p=t.height/t.pixelRatio;c=l.offset[0]-h/2;var d=l.offset[1]-p/2,h=c+h,p=d+p,m=t.rect,y=c-1,v=d-1,g=y+m.width/t.pixelRatio,x=v+m.height/t.pixelRatio;t=new r.Point(y,v);var _=new r.Point(g,x),y=new r.Point(y,x),g=new r.Point(g,v),x=l.rotate*n.C_DEG_TO_RAD,v=1===l.rotationAlignment;if(0<=e.segment&&!v&&(x+=e.angle),0!==x){var b=Math.cos(x),w=Math.sin(x);t.rotate(b,w),_.rotate(b,w),y.rotate(b,w),g.rotate(b,w)}return b=8*l.padding,w=new r.Point(e.x,e.y),e=new i.Footprint(this.mapAngle,b,v),e.addBox(w,new i.Box(c,d,h,p),o,x,u,n.C_INFINITY),o=new s(t,g,y,_,m,0,w,u,n.C_INFINITY),o=new a(e,[o]),c=u,l.allowOverlap||(c=this._conflictEngine.getMinZoom(o.footprint,c,f,v)),e.minzoom=c,o},e.prototype.getTextPlacement=function(e,t,c,l,f,h,p,d){for(var m,y=new r.Point(e.x,e.y),v=p.rotate*n.C_DEG_TO_RAD,g=0===p.rotationAlignment,x=p.keepUpright,_=u,b=!g,w=b?0:e.angle,T=0<=e.segment&&g,I=new i.Footprint(this.mapAngle,8*p.padding,b),k=[],E=!T,S=Number.POSITIVE_INFINITY,B=Number.NEGATIVE_INFINITY,P=S,j=B,C=T?x:g&&x,A=[],L=0;L<c.length;L++){var M=c[L],N=l[M.glyph];if(N){var R=N.rect;if(!(!R||0>=R.width||0>=R.height)){var V=N.metrics;E&&(m&&m!==M.y&&(I.addBox(y,new i.Box(S,P,B,j),f,v,u,n.C_INFINITY),S=Number.POSITIVE_INFINITY,B=Number.NEGATIVE_INFINITY,P=S,j=B),m=M.y);var D=[];if(T){if(N=(t.x+M.x+V.left-3+.5*N.metrics.width)*f,_=this._placeGlyph(e,_,N,h,e.segment,1,D),x&&(_=this._placeGlyph(e,_,N,h,e.segment,-1,D)),_>=2)break}else D.push(new o(y,w,w)),g&&x&&D.push(new o(y,w+n.C_PI,w+n.C_PI,!0));for(var N=M.x+t.x+V.left,M=M.y+t.y-V.top,z=N+V.width,V=M+V.height,F=new r.Point(N-3,M-3),O=new r.Point(F.x+R.width,F.y+R.height),U=new r.Point(F.x,O.y),q=new r.Point(O.x,F.y),G=0;G<D.length;G++){var Y=D[G],J=F.clone(),H=U.clone(),Z=q.clone(),W=O.clone(),X=M,$=V,K=Y.glyphAngle+v;if(0!==K){var Q=Math.cos(K),ee=Math.sin(K);J.rotate(Q,ee),W.rotate(Q,ee),H.rotate(Q,ee),Z.rotate(Q,ee)}k.push(new s(J,Z,H,W,R,Y.labelAngle,Y.anchor,Y.minzoom,Y.maxzoom)),(!C||this._legible(Y.labelAngle))&&(E?(S>N&&(S=N),P>X&&(P=X),z>B&&(B=z),$>j&&(j=$)):2>Y.minzoom&&I.addBox(Y.anchor,new i.Box(N,X,z,$),f,K,Y.minzoom,Y.maxzoom)),A.push(Y)}}}}return _>=2?null:(E&&I.addBox(y,new i.Box(S,P,B,j),f,v,u,n.C_INFINITY),e=new a(I,k),p.allowOverlap||(_=this._conflictEngine.getMinZoom(e.footprint,_,d,b)),I.minzoom=_,e)},e.prototype.add=function(e){this._conflictEngine.add(e.footprint)},e.prototype._legible=function(e){return e=n.radToByte(e),65>e||e>=193},e.prototype._placeGlyph=function(e,t,i,s,a,u,c){var l=0>u?n.positiveMod(e.angle+n.C_PI,n.C_2PI):e.angle,f=this._legible(l),h=0;0>i&&(u*=-1,i*=-1,h=n.C_PI),u>0&&++a,e=new r.Point(e.x,e.y);var p=s[a],d=n.C_INFINITY;if(s.length<=a)return d;for(;;){var m=p.x-e.x,y=p.y-e.y,v=Math.sqrt(m*m+y*y),g=Math.max(i/v,t),m=n.positiveMod(Math.atan2(y/v,m/v)+h,n.C_2PI);if(c.push(new o(e,l,m,f,g,d)),t>=g)return g;e=p.clone();do{if(a+=u,s.length<=a||0>a)return g;p=s[a]}while(e.isEqual(p));d=p.x-e.x,m=p.y-e.y,y=Math.sqrt(d*d+m*m),d*=v/y,m*=v/y,e.x-=d,e.y-=m,d=g}},e}(),t.PlacementEngine=e})},"esri/layers/vectorTiles/views/vectorTiles/Conflict":function(){define(["require","exports","./Geometry","./GeometryUtils"],function(e,t,r,n){e=function(){function e(e,t,r,n){this.left=e,this.top=t,this.right=r,this.bottom=n}return e.prototype.clone=function(){return new e(this.left,this.top,this.right,this.bottom)},e.prototype.move=function(e,t){this.left+=e,this.top+=t,this.right+=e,this.bottom+=t},e.prototype.rotate=function(e,t){var r=this.left,n=this.right,i=this.top,o=this.bottom,s=r*e-i*t,a=r*t+i*e,u=n*e-i*t,i=n*t+i*e,c=r*e-o*t,r=r*t+o*e,l=n*e-o*t,n=n*t+o*e;this.left=Math.min(s,u,c,l),this.top=Math.min(a,i,r,n),this.right=Math.max(s,u,c,l),this.bottom=Math.max(a,i,r,n)},e.overlaps=function(e,t){return e.right>t.left&&e.left<t.right&&e.bottom>t.top&&e.top<t.bottom},e}(),t.Box=e;var i=function(){function e(e,t,r,n){this.anchor=e,this.corners=t,this.minzoom=r,this.maxzoom=n}return e.prototype.left=function(){return this.corners[0].x},e.prototype.right=function(){return this.corners[2].x},e.prototype.top=function(){return this.corners[1].y},e.prototype.bottom=function(){return this.corners[3].y},e}();t.Obstacle=i,e=function(){function e(e,t,r){this.obstacles=[],this.mapAngle=e,this.padding=t,this.isScreenAligned=r,this.minzoom=o}return e.prototype.addBox=function(e,t,n,o,s,a){var u=t.left*n-this.padding,c=t.top*n-this.padding,l=t.right*n+this.padding;if(t=t.bottom*n+this.padding,u=[new r.Point(u,c),new r.Point(l,c),new r.Point(l,t),new r.Point(u,t)],0!==this.mapAngle&&(c=Math.cos(this.mapAngle),l=Math.sin(this.mapAngle),e=e.clone(),e.rotate(c,l)),this.isScreenAligned||(o+=this.mapAngle),0!==o){for(c=Math.cos(o),l=Math.sin(o),u[0].rotate(c,l),u[1].rotate(c,l),u[2].rotate(c,l),u[3].rotate(c,l),o=0,c=1;4>c;c++)u[c].x<u[o].x?o=c:u[c].x===u[o].x&&u[c].y<u[o].y&&(o=c);if(o){for(l=[],c=0;4>c;c++)l.push(u[(c+o)%4]);u=l}}this.obstacles.push(new i(e,u,s,a))},e}(),t.Footprint=e;var o=.5;e=function(){function e(e){this._grid=[],this._angle=e,this._c=Math.cos(e),this._s=Math.sin(e)}return e.prototype.add=function(t){var r=this._grid,n=0;for(t=t.obstacles;n<t.length;n++)for(var i=t[n],o=i.anchor,s=e._gridClamp(Math.min(i.left()+o.x,o.x)),a=e._gridClamp(Math.max(i.right()+o.x,o.x)),u=e._gridClamp(Math.min(i.top()+o.y,o.y)),o=e._gridClamp(Math.max(i.bottom()+o.y,o.y));o>=u;u++)for(var c=s;a>=c;c++){var l=r[16*u+c];l||(l=r[16*u+c]=[]),l.push(i)}},e.prototype.getMinZoom=function(t,r,i,o){if(0===t.obstacles.length)return n.C_INFINITY;for(i=this._grid,o=0,t=t.obstacles;o<t.length;o++)for(var s=t[o],a=s.anchor,u=e._gridClamp(Math.min(s.left()+a.x,a.x)),c=e._gridClamp(Math.max(s.right()+a.x,a.x)),l=e._gridClamp(Math.min(s.top()+a.y,a.y)),a=e._gridClamp(Math.max(s.bottom()+a.y,a.y));a>=l;l++)for(var f=u;c>=f;f++){var h=i[16*l+f];if(h)for(var p=0;p<h.length;p++){var d=h[p];if(!(s.minzoom>=d.maxzoom||d.minzoom>=s.maxzoom)&&(r=e._calcPlacementZoom(s,d,r),r>=2))return n.C_INFINITY}}return 2>r?r:n.C_INFINITY},e._gridClamp=function(e){return n.clamp(e>>9,-7,8)},e._calcPlacementZoom=function(t,r,i){var o=r.anchor.x-t.anchor.x;if(0===o&&(t.right()<r.left()||r.right()<t.left()))return i;var s=r.anchor.y-t.anchor.y;if(0===s&&(t.bottom()<r.top()||r.bottom()<t.top()))return i;var a=n.C_INFINITY;if(0!==o){var u=(o>0?t.right()-r.left():t.left()-r.right())/o;a>u&&(a=u),o=o>0?e._calcExtZoomX(t,r,u):e._calcExtZoomX(r,t,u),a>o&&(a=o)}return 0!==s&&(o=(s>0?t.bottom()-r.top():t.top()-r.bottom())/s,a>o&&(a=o),s=s>0?e._calcExtZoomY(t,r,o):e._calcExtZoomY(r,t,o),a>s&&(a=s)),a<t.minzoom||a<r.minzoom?i:(a=Math.min(a,t.maxzoom,r.maxzoom),i>a&&(a=i),a)},e._calcExtZoomX=function(e,t,r){var n,i,o;if(e.anchor.y+e.corners[2].y/r<t.anchor.y+t.corners[0].y/r){n=e.corners[2].x-e.corners[3].x,o=e.corners[2].y-e.corners[3].y;var s=t.corners[1].x-t.corners[0].x;i=t.corners[1].y-t.corners[0].y,n*i-o*s>=0?e.anchor.y+e.corners[3].y/r<t.anchor.y+t.corners[0].y/r?(r=e.corners[3],n=t.corners[0],i=t.corners[1],o=1):(r=t.corners[0],n=e.corners[3],i=e.corners[2],o=-1):e.anchor.y+e.corners[2].y/r>t.anchor.y+t.corners[1].y/r?(r=e.corners[2],n=t.corners[0],i=t.corners[1],o=1):(r=t.corners[1],n=e.corners[3],i=e.corners[2],o=-1)}else n=e.corners[2].x-e.corners[1].x,o=e.corners[2].y-e.corners[1].y,s=t.corners[3].x-t.corners[0].x,i=t.corners[3].y-t.corners[0].y,0>n*i-o*s?e.anchor.y+e.corners[1].y/r>t.anchor.y+t.corners[0].y/r?(r=e.corners[1],
n=t.corners[0],i=t.corners[3],o=1):(r=t.corners[0],n=e.corners[1],i=e.corners[2],o=-1):e.anchor.y+e.corners[2].y/r<t.anchor.y+t.corners[3].y/r?(r=e.corners[2],n=t.corners[0],i=t.corners[3],o=1):(r=t.corners[3],n=e.corners[1],i=e.corners[2],o=-1);return s=i.x-n.x,i=i.y-n.y,o*((r.y-n.y)*s-(r.x-n.x)*i)/((e.anchor.x-t.anchor.x)*i-(e.anchor.y-t.anchor.y)*s)},e._calcExtZoomY=function(e,t,r){var n,i,o;if(e.anchor.x+e.corners[3].x/r<t.anchor.x+t.corners[1].x/r){n=e.corners[3].x-e.corners[2].x,o=e.corners[3].y-e.corners[2].y;var s=t.corners[0].x-t.corners[1].x;i=t.corners[0].y-t.corners[1].y,0>n*i-o*s?e.anchor.x+e.corners[2].x/r<t.anchor.x+t.corners[1].x/r?(r=e.corners[2],n=t.corners[1],i=t.corners[0],o=1):(r=t.corners[1],n=e.corners[2],i=e.corners[3],o=-1):e.anchor.x+e.corners[3].x/r>t.anchor.x+t.corners[0].x/r?(r=e.corners[3],n=t.corners[1],i=t.corners[0],o=1):(r=t.corners[0],n=e.corners[2],i=e.corners[3],o=-1)}else n=e.corners[3].x-e.corners[0].x,o=e.corners[3].y-e.corners[0].y,s=t.corners[2].x-t.corners[1].x,i=t.corners[2].y-t.corners[1].y,n*i-o*s>0?e.anchor.x+e.corners[0].x/r>t.anchor.x+t.corners[1].x/r?(r=e.corners[0],n=t.corners[1],i=t.corners[2],o=1):(r=t.corners[1],n=e.corners[0],i=e.corners[3],o=-1):e.anchor.x+e.corners[3].x/r<t.anchor.x+t.corners[2].x/r?(r=e.corners[3],n=t.corners[1],i=t.corners[2],o=1):(r=t.corners[2],n=e.corners[0],i=e.corners[3],o=-1);return s=i.x-n.x,i=i.y-n.y,o*((r.y-n.y)*s-(r.x-n.x)*i)/((e.anchor.x-t.anchor.x)*i-(e.anchor.y-t.anchor.y)*s)},e}(),t.ConflictEngine=e})},"esri/layers/vectorTiles/views/vectorTiles/TextShaping":function(){define(["require","exports","./Placement"],function(e,t,r){return function(){function e(e,t,r,n,i,o,s,a){this._glyphItems=e,this._maxWidth=t,this._lineHeight=r,this._letterSpacing=n,this._offset=i,this._hAnchor=o,this._vAnchor=s,this._justify=a}return e.prototype.getShaping=function(e,t){for(var n=this._glyphItems,i=this._letterSpacing,o=this._offset[0],s=this._offset[1],a=[],u=e.length,c=0;u>c;c++){var l=e.charCodeAt(c),f=n[l];f&&(a.push(new r.ShapedGlyph(l,o,s)),o+=f.metrics.advance+i)}if(0<a.length){if(f=this._maxWidth,n=this._lineHeight,o=this._justify,s=a.length,l=u=i=0,0!==f)for(var h=0,p=0,c=0;s>c;c++){var d=a[c];if(d.x-=p,d.y=t?d.y-n*i:d.y+n*i,d.x>f&&h>0){for(var m=a[h+1].x,l=Math.max(m,l),y=h+1;c>=y;y++)a[y].y=t?a[y].y-n:a[y].y+n,a[y].x-=m;o&&this._applyJustification(a,u,h-1),u=h+1,h=0,p+=m,i++}32===d.glyph&&(h=c)}for(c=a[s-1],l=Math.max(l,c.x+this._glyphItems[c.glyph].metrics.advance),o&&this._applyJustification(a,u,s-1),c=(o-this._hAnchor)*l,o=(-this._vAnchor*(i+1)+.5)*n,t&&i&&(o+=i*n),n=0;n<a.length;n++)i=a[n],i.x+=c,i.y+=o}return a},e.prototype._applyJustification=function(e,t,r){for(var n=e[r],n=(n.x+this._glyphItems[n.glyph].metrics.advance)*this._justify;r>=t;t++)e[t].x-=n},e}()})},"dojox/string/BidiEngine":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/Stateful"],function(e,t,r){function n(e,t,r,s,u){var c=e;if(void 0===t&&(t=u.defInFormat),void 0===r&&(r=u.defOutFormat),void 0===s&&(s=u.defSwap),t!==r){var l,f=t.substring(0,1);l=t.substring(1,4);var h=r.substring(0,1),p=r.substring(1,4);"C"===l.charAt(0)&&(l=i(c),l="ltr"===l||"rtl"===l?l.toUpperCase():"L"===t.charAt(2)?"LTR":"RTL",t=f+l),"C"===p.charAt(0)&&(l=i(c),"rtl"===l?p="RTL":"ltr"===l?(c=c.split(""),c.reverse(),l=i(c.join("")),p=l.toUpperCase()):p="L"===r.charAt(2)?"LTR":"RTL",r=h+p)}if(t===r)return e;if(h=t.substring(0,1),c=t.substring(1,4),f=r.substring(0,1),p=r.substring(1,4),u.inFormat=t,u.outFormat=r,u.swap=s,"L"===h&&"VLTR"===r){if("LTR"===c)return u.dir=T,o(e,u);if("RTL"===c)return u.dir=I,o(e,u)}return"V"===h&&"V"===f?(u.dir="RTL"===c?I:T,a(e,u)):"L"===h&&"VRTL"===r?(u.dir="LTR"===c?T:I,e=o(e,u),a(e)):"VLTR"===t&&"LLTR"===r?(u.dir=T,o(e,u)):"V"===h&&"L"===f&&c!==p?(e=a(e),"RTL"===c?n(e,"LLTR","VLTR",s,u):n(e,"LRTL","VRTL",s,u)):"VRTL"===t&&"LRTL"===r?n(e,"LRTL","VRTL",s,u):"L"===h&&"L"===f?(t=u.swap,u.swap=t.substr(0,1)+"N","RTL"===c?(u.dir=I,e=o(e,u),u.swap="N"+t.substr(1,2),u.dir=T,e=o(e,u)):(u.dir=T,e=o(e,u),u.swap="N"+t.substr(1,2),e=n(e,"VLTR","LRTL",u.swap,u)),e):void 0}function i(e){return(e=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(e))?"z">=e[0]?"ltr":"rtl":""}function o(e,t){var r=e.split(""),n=[];if(s(r,n,t),0!==t.hiLevel&&t.swap.substr(0,1)!==t.swap.substr(1,2))for(var i=0;i<r.length;i++)if(1===n[i]){var o,a=i;e:{o=r[i];for(var u=void 0,c=0,f=S.length-1;f>=c;)if(u=Math.floor((c+f)/2),o<S[u][0])f=u-1;else{if(!(o>S[u][0])){o=S[u][1];break e}c=u+1}}r[a]=o}return l(2,r,n,t),l(1,r,n,t),x=n,r.join("")}function s(e,t,r){var n=e.length,i=r.dir?O:F,o=null,s=null,a=null,o=0,s=s=null,u=-1,c=s=null,l=[],h=[];for(r.hiLevel=r.dir,r.lastArabic=!1,r.hasUbatAl=!1,r.hasUbatB=!1,r.hasUbatS=!1,s=0;n>s;s++){var c=s,a=e[s].charCodeAt(0),p=le[a>>8];l[c]=ee>p?p:fe[p-ee][255&a]}for(c=0;n>c;c++){if(h[c]=s=f(e,l,h,c,r),o=i[o][s],s=240&o,o&=15,t[c]=a=i[o][b],s>0){if(16===s)for(s=u;c>s;s++)t[s]=1;u=-1}if(s=i[o][w])-1===u&&(u=c);else if(u>-1){for(s=u;c>s;s++)t[s]=a;u=-1}l[c]===H&&(t[c]=0),r.hiLevel|=a}if(r.hasUbatS)for(e=0;n>e;e++)if(l[e]===Z)for(t[e]=r.dir,i=e-1;i>=0&&l[i]===X;i--)t[i]=r.dir}function a(e,t){var r=e.split("");if(t){var n=[];s(r,n,t),x=n}return r.reverse(),v.reverse(),r.join("")}function u(e){for(var t=0;t<D.length;t++)if(e>=D[t]&&e<=z[t])return!0;return!1}function c(e,t,r,n){for(;n>t*r&&p(e[t]);)t+=r;return n>t*r&&u(e[t])?!0:!1}function l(e,t,r,n){if(!(n.hiLevel<e))if(1!==e||n.dir!==I||n.hasUbatB){n=t.length;for(var i,o,s,a=0;n>a;){if(r[a]>=e){for(i=a+1;n>i&&r[i]>=e;)i++;for(o=i-1;o>a;a++,o--)s=t[a],t[a]=t[o],t[o]=s,s=v[a],v[a]=v[o],v[o]=s;a=i}a++}}else t.reverse(),v.reverse()}function f(e,t,r,n,i){return{UBAT_L:function(){return i.lastArabic=!1,U},UBAT_R:function(){return i.lastArabic=!1,q},UBAT_ON:function(){return J},UBAT_AN:function(){return Y},UBAT_EN:function(){return i.lastArabic?Y:G},UBAT_AL:function(){return i.lastArabic=!0,i.hasUbatAl=!0,q},UBAT_WS:function(){return J},UBAT_CS:function(){var e,o;return 1>n||n+1>=t.length||(e=r[n-1])!==G&&e!==Y||(o=t[n+1])!==G&&o!==Y?J:(i.lastArabic&&(o=Y),o===e?o:J)},UBAT_ES:function(){return(n>0?r[n-1]:H)===G&&n+1<t.length&&t[n+1]===G?G:J},UBAT_ET:function(){if(n>0&&r[n-1]===G)return G;if(i.lastArabic)return J;for(var e=n+1,o=t.length;o>e&&t[e]===$;)e++;return o>e&&t[e]===G?G:J},UBAT_NSM:function(){if("VLTR"===i.inFormat){for(var o=t.length,s=n+1;o>s&&t[s]===K;)s++;if(o>s&&(o=e[n],s=t[s],(o>=1425&&2303>=o||64286===o)&&(s===q||s===W)))return q}return 1>n||t[n-1]===H?J:r[n-1]},UBAT_B:function(){return i.lastArabic=!0,i.hasUbatB=!0,i.dir},UBAT_S:function(){return i.hasUbatS=!0,J},UBAT_LRE:function(){return i.lastArabic=!1,J},UBAT_RLE:function(){return i.lastArabic=!1,J},UBAT_LRO:function(){return i.lastArabic=!1,J},UBAT_RLO:function(){return i.lastArabic=!1,J},UBAT_PDF:function(){return i.lastArabic=!1,J},UBAT_BN:function(){return J}}[Q[t[n]]]()}function h(e,t){for(var r=0;r<C.length;r++)if(e===C[r])return t[r];return e}function p(e){return e>="Ù"&&"Ù">=e?!0:!1}function d(e){return"L"===e?"LTR":"R"===e?"RTL":"C"===e?"CLR":"D"===e?"CRL":void 0}function m(e,t){for(var r=0;r<B.length;r++)if(e===B[r])return t[r];return e}function y(e,t,r,n){for(var i=0;i<e.length;i++)(e[i]>t||!r&&e[i]===t)&&(e[i]+=n)}e.getObject("string",!0,dojox),e=t("dojox.string.BidiEngine",r,{inputFormat:"ILYNN",outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],levels:[],bidiTransform:function(e,t,r){if(this.sourceToTarget=[],this.targetToSource=[],!e)return"";var i=this.sourceToTarget,o=this.targetToSource,s=e.length;v=[],x=[];for(var a=0;s>a;a++)i[a]=a,o[a]=a,v[a]=a;if(!this.checkParameters(t,r))return e;t=this.inputFormat,r=this.outputFormat;var i=e,i=_,a=d(t.charAt(1)),o=d(r.charAt(1)),l="I"===t.charAt(0)?"L":t.charAt(0),s="I"===r.charAt(0)?"L":r.charAt(0),a=l+a,o=s+o,s=t.charAt(2)+r.charAt(2);for(i.defInFormat=a,i.defOutFormat=o,i.defSwap=s,e=n(e,a,o,s,i),i=!1,"R"===r.charAt(1)?i=!0:("C"===r.charAt(1)||"D"===r.charAt(1))&&(i=this.checkContextual(e)),o=this.sourceToTarget=v,s=Array(o.length),a=0;a<o.length;a++)s[o[a]]=a;if(g=this.targetToSource=s,t.charAt(3)===r.charAt(3))i=e;else if("S"===r.charAt(3))if(t=i,r=!0,0===e.length)i=void 0;else{void 0===t&&(t=!0),void 0===r&&(r=!0),e=String(e),e=e.split("");var f=0,o=1,i=e.length;t||(f=e.length-1,o=-1,i=1);for(var s=i,a=r,b=0,i=[],l=0;s>f*o;f+=o)if(u(e[f])||p(e[f])){var w;if(w="Ù"===e[f])e:{for(var T=e,I=f+o,k=o,E=s;E>I*k&&p(T[I]);)I+=k;if(w=" ",E>I*k)for(w=T[I],T=0;T<B.length;T++)if(B[T]===w){w=!0;break e}w=!1}if(w){for(e[f]=0===b?m(e[f+o],P):m(e[f+o],j),f+=o,b=e,w=f,T=o,I=s;I>w*T&&p(b[w]);)w+=T;I>w*T&&(b[w]=" "),a&&(i[l]=f,l++),b=0}else{if(w=e[f],1===b){if(T=f,c(e,f+o,o,s)){e:for(I=e[f],k=0;k<C.length;k++)if(I===C[k]){I=M[k];break e}}else I=h(e[f],L);e[T]=I}else!0===c(e,f+o,o,s)?e[f]=h(e[f],N):e[f]=h(e[f],A);p(w)||(b=1);e:{for(T=0;T<R.length;T++)if(R[T]===w){w=!0;break e}w=!1}!0===w&&(b=0)}}else b=0;for(o="",s=0;s<e.length;s++){if(a=r){e:{for(a=0;a<i.length;a++)if(i[a]===s)break e;a=-1}a=a>-1}a?(y(g,s,!t,-1),v.splice(s,1)):o+=e[s]}i=o}else if(t=e,r=i,e=!0,0===t.length)i=void 0;else for(void 0===e&&(e=!0),void 0===r&&(r=!0),t=String(t),i="",o=[],o=t.split(""),s=0;s<t.length;s++)a=!1,"ï¹°"<=o[s]&&"\ufeff">o[s]?(l=t.charCodeAt(s),"ï»µ"<=o[s]&&"ï»¼">=o[s]?(r?(s>0&&e&&" "===o[s-1]?i=i.substring(0,i.length-1)+"Ù":(i+="Ù",a=!0),i+=B[(l-65269)/2]):(i+=B[(l-65269)/2],i+="Ù",s+1<t.length&&e&&" "===o[s+1]?s++:a=!0),a&&(y(g,s,!0,1),v.splice(s,0,v[s]))):i+=V[l-65136]):i+=o[s];return this.sourceToTarget=v,this.targetToSource=g,this.levels=x,i},_inputFormatSetter:function(e){if(!k.test(e))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=e},_outputFormatSetter:function(e){if(!k.test(e))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=e},checkParameters:function(e,t){return e?this.set("inputFormat",e):e=this.inputFormat,t?this.set("outputFormat",t):t=this.outputFormat,e===t?!1:!0},checkContextual:function(e){if(e=i(e),"ltr"!==e&&"rtl"!==e){try{e=document.dir.toLowerCase()}catch(t){}"ltr"!==e&&"rtl"!==e&&(e="ltr")}return e},hasBidiChar:function(e){return E.test(e)}});var v=[],g=[],x=[],_={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},b=5,w=6,T=0,I=1,k=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,E=/[\u0591-\u06ff\ufb1d-\ufefc]/,S=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["Â«","Â»"],["Â»","Â«"],["â¹","âº"],["âº","â¹"],["â½","â¾"],["â¾","â½"],["â","â"],["â","â"],["â¤","â¥"],["â¥","â¤"],["â©","âª"],["âª","â©"],["ï¹","ï¹"],["ï¹","ï¹"],["ï¹","ï¹"],["ï¹","ï¹"],["ï¹","ï¹"],["ï¹","ï¹"],["ï¹¤","ï¹¥"],["ï¹¥","ï¹¤"]],B=["Ø¢","Ø£","Ø¥","Ø§"],P=["ï»µ","ï»·","ï»¹","ï»»"],j=["ï»¶","ï»¸","ï»º","ï»¼"],C="Ø§Ø¨ØªØ«Ø¬Ø­Ø®Ø¯Ø°Ø±Ø²Ø³Ø´ØµØ¶Ø·Ø¸Ø¹ØºÙÙÙÙÙÙÙÙÙØ¥Ø£Ø¢Ø©ÙÙÙÙÙÙÙØ¥Ø£Ø¢Ø©ÙÛØ¦Ø¤".split(""),A="ïºïºïºïºïºïº¡ïº¥ïº©ïº«ïº­ïº¯ïº±ïºµïº¹ïº½ï»ï»ï»ï»ï»ï»ï»ï»ï»¡ï»¥ï»©ï»­ï»±ïºïºïºïºï»¯ï¯¼ïºïºï¹°ï¹²ï¹´ï¹¶ï¹¸ï¹ºï¹¼ï¹¾ïºïºïº".split(""),L="ïºïºïºïºïºïº¢ïº¦ïºªïº¬ïº®ïº°ïº²ïº¶ïººïº¾ï»ï»ï»ï»ï»ï»ï»ï»ï»¢ï»¦ï»ªï»®ï»²ïºïºïºïºï»°ï¯½ïºïºï¹°ï¹²ï¹´ï¹¶ï¹¸ï¹ºï¹¼ï¹¾ïºïºïº".split(""),M="ïºïºïºïºïº ïº¤ïº¨ïºªïº¬ïº®ïº°ïº´ïº¸ïº¼ï»ï»ï»ï»ï»ï»ï»ï»ï» ï»¤ï»¨ï»¬ï»®ï»´ïºïºïºïºï»°ï¯¿ïºïºï¹±ï¹²ï¹´ï¹·ï¹¹ï¹»ï¹½ï¹¿ïºïºïº".split(""),N="ïºïºïºïºïºïº£ïº§ïº©ïº«ïº­ïº¯ïº³ïº·ïº»ïº¿ï»ï»ï»ï»ï»ï»ï»ï»ï»£ï»§ï»«ï»­ï»³ïºïºïºïºï»¯ï¯¾ïºïºï¹°ï¹²ï¹´ï¹¶ï¹¸ï¹ºï¹¼ï¹¾ïºïºïº".split(""),R="Ø¡Ø¢Ø£Ø¤Ø¥Ø§Ø©Ø¯Ø°Ø±Ø²ÙÙ".split(""),V="ÙÙÙØÙØÙÙÙÙÙÙÙÙÙÙØ¡Ø¢Ø¢Ø£Ø£Ø¤Ø¤Ø¥Ø¥Ø¦Ø¦Ø¦Ø¦Ø§Ø§Ø¨Ø¨Ø¨Ø¨Ø©Ø©ØªØªØªØªØ«Ø«Ø«Ø«Ø¬Ø¬Ø¬Ø¬Ø­Ø­Ø­Ø­Ø®Ø®Ø®Ø®Ø¯Ø¯Ø°Ø°Ø±Ø±Ø²Ø²Ø³Ø³Ø³Ø³Ø´Ø´Ø´Ø´ØµØµØµØµØ¶Ø¶Ø¶Ø¶Ø·Ø·Ø·Ø·Ø¸Ø¸Ø¸Ø¸Ø¹Ø¹Ø¹Ø¹ØºØºØºØºÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙï»µï»¶ï»·ï»¸ï»¹ï»ºï»»ï»¼ØØØ".split(""),D=["Ø¡","Ù"],z=["Øº","Ù"],F=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],O=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],U=0,q=1,G=2,Y=3,J=4,H=5,Z=6,W=7,X=8,$=11,K=12,Q="UBAT_L UBAT_R UBAT_EN UBAT_AN UBAT_ON UBAT_B UBAT_S UBAT_AL UBAT_WS UBAT_CS UBAT_ES UBAT_ET UBAT_NSM UBAT_LRE UBAT_RLE UBAT_PDF UBAT_LRO UBAT_RLO UBAT_BN".split(" "),ee=100;t=U,r=q;var te=G,re=Y,ne=J,ie=H,oe=Z,se=W,ae=X,ue=$,ce=K,le=[ee+0,t,t,t,t,ee+1,ee+2,ee+3,r,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,ee+4,ne,ne,ne,t,ne,t,ne,t,ne,ne,ne,t,t,ne,ne,t,t,t,t,t,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,t,t,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,t,t,t,t,t,t,t,t,t,t,t,t,t,t,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,t,t,ne,ne,t,t,ne,ne,t,t,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,t,t,t,ee+5,se,se,ee+6,ee+7],fe=[[18,18,18,18,18,18,18,18,18,oe,ie,oe,ae,ie,18,18,18,18,18,18,18,18,18,18,18,18,18,18,ie,ie,ie,oe,ae,ne,ne,ue,ue,ue,ne,ne,ne,ne,ne,10,9,10,9,9,te,te,te,te,te,te,te,te,te,te,9,ne,ne,ne,ne,ne,ne,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,ne,ne,ne,ne,ne,ne,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,ne,ne,ne,ne,18,18,18,18,18,18,ie,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,ne,ue,ue,ue,ue,ne,ne,ne,ne,t,ne,ne,18,ne,ne,ue,ue,te,te,ne,t,ne,ne,ne,te,t,ne,ne,ne,ne,ne,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,ne,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,ne,t,t,t,t,t,t,t,t],[t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,ne,ne,ne,ne,ne,ne,ne,ne,ne,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,ne,ne,t,t,t,t,t,t,t,ne,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,ne,t,ne,ne,ne,ne,ne,ne,ne,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,r,ce,r,ce,ce,r,ce,ce,r,ce,ne,ne,ne,ne,ne,ne,ne,ne,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,ne,ne,ne,ne,ne,r,r,r,r,r,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[re,re,re,re,ne,ne,ne,ne,se,ue,ue,se,9,se,ne,ne,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,se,ne,ne,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,re,re,re,re,re,re,re,re,re,re,ue,re,re,se,se,se,ce,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,ce,ce,ce,ce,ce,ce,ce,re,ne,ce,ce,ce,ce,ce,ce,se,se,ce,ce,ne,ce,ce,ce,ce,se,se,te,te,te,te,te,te,te,te,te,te,se,se,se,se,se,se],[se,se,se,se,se,se,se,se,se,se,se,se,se,se,ne,se,se,ce,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ne,ne,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,se,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,ce,ce,ce,ce,ce,ce,ce,ce,ce,r,r,ne,ne,ne,ne,r,ne,ne,ne,ne,ne],[ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,18,18,18,t,r,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ae,ie,13,14,15,16,17,9,ue,ue,ue,ue,ue,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,9,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ae,18,18,18,18,18,ne,ne,ne,ne,ne,18,18,18,18,18,18,te,t,ne,ne,te,te,te,te,te,te,10,10,ne,ne,ne,t,te,te,te,te,te,te,te,te,te,te,10,10,ne,ne,ne,ne,t,t,t,t,t,t,t,t,t,t,t,t,t,ne,ne,ne,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne],[t,t,t,t,t,t,t,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,t,t,t,t,t,ne,ne,ne,ne,ne,r,ce,r,r,r,r,r,r,r,r,r,r,10,r,r,r,r,r,r,r,r,r,r,r,r,r,ne,r,r,r,r,r,ne,r,ne,r,r,ne,r,r,ne,r,r,r,r,r,r,r,r,r,r,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se],[ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ce,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ce,ce,ce,ce,ce,ce,ce,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,9,ne,9,ne,ne,9,ne,ne,ne,ne,ne,ne,ne,ne,ne,ue,ne,ne,10,10,ne,ne,ne,ne,ne,ue,ue,ne,ne,ne,ne,ne,se,se,se,se,se,ne,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,se,ne,ne,18],[ne,ne,ne,ue,ue,ue,ne,ne,ne,ne,ne,10,9,10,9,9,te,te,te,te,te,te,te,te,te,te,9,ne,ne,ne,ne,ne,ne,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,ne,ne,ne,ne,ne,ne,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,ne,ne,ne,t,t,t,t,t,t,ne,ne,t,t,t,t,t,t,ne,ne,t,t,t,t,t,t,ne,ne,t,t,t,ne,ne,ne,ue,ue,ne,ne,ne,ue,ue,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne]];return e})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(e,t,r,n){return e("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(e){var t=this._attrPairNames;return t[e]?t[e]:t[e]={s:"_"+e+"Setter",g:"_"+e+"Getter"}},postscript:function(e){e&&this.set(e)},_get:function(e,t){return"function"==typeof this[t.g]?this[t.g]():this[e]},get:function(e){return this._get(e,this._getAttrNames(e))},set:function(e,t){if("object"==typeof e){for(var r in e)e.hasOwnProperty(r)&&"_watchCallbacks"!=r&&this.set(r,e[r]);return this}r=this._getAttrNames(e);var i=this._get(e,r);r=this[r.s];var o;if("function"==typeof r?o=r.apply(this,Array.prototype.slice.call(arguments,1)):this[e]=t,this._watchCallbacks){var s=this;n(o,function(){s._watchCallbacks(e,i,t)})}return this},_changeAttrValue:function(e,t){var r=this.get(e);return this[e]=t,this._watchCallbacks&&this._watchCallbacks(e,r,t),this},watch:function(e,t){var n=this._watchCallbacks;if(!n)var i=this,n=this._watchCallbacks=function(e,t,r,o){var s=function(n){if(n){n=n.slice();for(var o=0,s=n.length;s>o;o++)n[o].call(i,e,t,r)}};s(n["_"+e]),o||s(n["*"])};t||"function"!=typeof e?e="_"+e:(t=e,e="*");var o=n[e];"object"!=typeof o&&(o=n[e]=[]),o.push(t);var s={};return s.unwatch=s.remove=function(){var e=r.indexOf(o,t);e>-1&&o.splice(e,1)},s}})})},"esri/layers/vectorTiles/views/vectorTiles/TileClipper":function(){define(["require","exports","./Geometry","./GeometryUtils"],function(e,t,r,n){var i=function(){return function(e,t,r){this.ratio=e,this.x=t,this.y=r}}();e=function(){function e(e,t,r){this.dz=e,this.yPos=t,this.xPos=r}return e.prototype.setExtent=function(e){this.finalRatio=4096/e*(1<<this.dz);var t;t=64/this.finalRatio,e>>=this.dz,t>e&&(t=e),this.margin=t,this.xmin=e*this.xPos-t,this.ymin=e*this.yPos-t,this.xmax=this.xmin+e+2*t,this.ymax=this.ymin+e+2*t},e.prototype.reset=function(e){this.type=e,this._prevIsIn=!1,this.lines=[],this.line=null},e.prototype.moveTo=function(e,t){this._pushLine(),this._prevIsIn=this._isIn(e,t),this._moveTo(e,t,this._prevIsIn),this._prevPt=new r.Point(e,t),this._firstPt=new r.Point(e,t)},e.prototype.lineTo=function(e,t){var n,o,s,a,u,c,l=this._isIn(e,t);if(l)this._prevIsIn?this._lineTo(e,t,!0):(n=this._prevPt,o=new r.Point(e,t),s=this._intersect(o,n),this._lineTo(s.x,s.y,!0),this._lineTo(o.x,o.y,!0));else{if(this._prevIsIn)o=this._prevPt,n=new r.Point(e,t),s=this._intersect(o,n),this._lineTo(s.x,s.y,!0);else{var f=this._prevPt;if(n=new r.Point(e,t),!(f.x<=this.xmin&&n.x<=this.xmin||f.x>=this.xmax&&n.x>=this.xmax||f.y<=this.ymin&&n.y<=this.ymin||f.y>=this.ymax&&n.y>=this.ymax))if(o=[],(f.x<this.xmin&&n.x>this.xmin||f.x>this.xmin&&n.x<this.xmin)&&(s=(this.xmin-f.x)/(n.x-f.x),c=f.y+s*(n.y-f.y),c<=this.ymin?u=!1:c>=this.ymax?u=!0:o.push(new i(s,this.xmin,c))),(f.x<this.xmax&&n.x>this.xmax||f.x>this.xmax&&n.x<this.xmax)&&(s=(this.xmax-f.x)/(n.x-f.x),c=f.y+s*(n.y-f.y),c<=this.ymin?u=!1:c>=this.ymax?u=!0:o.push(new i(s,this.xmax,c))),(f.y<this.ymin&&n.y>this.ymin||f.y>this.ymin&&n.y<this.ymin)&&(s=(this.ymin-f.y)/(n.y-f.y),c=f.x+s*(n.x-f.x),c<=this.xmin?a=!1:c>=this.xmax?a=!0:o.push(new i(s,c,this.ymin))),(f.y<this.ymax&&n.y>this.ymax||f.y>this.ymax&&n.y<this.ymax)&&(s=(this.ymax-f.y)/(n.y-f.y),c=f.x+s*(n.x-f.x),c<=this.xmin?a=!1:c>=this.xmax?a=!0:o.push(new i(s,c,this.ymax))),0===o.length)a?u?this._lineTo(this.xmax,this.ymax,!0):this._lineTo(this.xmax,this.ymin,!0):u?this._lineTo(this.xmin,this.ymax,!0):this._lineTo(this.xmin,this.ymin,!0);else if(1<o.length&&o[0].ratio>o[1].ratio)this._lineTo(o[1].x,o[1].y,!0),this._lineTo(o[0].x,o[0].y,!0);else for(s=0;s<o.length;s++)this._lineTo(o[s].x,o[s].y,!0)}this._lineTo(n.x,n.y,!1)}this._prevIsIn=l,this._prevPt=new r.Point(e,t)},e.prototype.close=function(){var e,t;0<this.line.length&&(e=this._firstPt,t=this._prevPt,e.x===t.x&&e.y===t.y||this.lineTo(e.x,e.y),e=this.line,t=e.length,t>=4&&(e[0].x===e[1].x&&e[0].x===e[t-2].x||e[0].y===e[1].y&&e[0].y===e[t-2].y)&&(e.pop(),e[0].x=e[t-2].x,e[0].y=e[t-2].y))},e.prototype.result=function(){return this._pushLine(),0===this.lines.length?null:(3===this.type&&o.simplify(this.margin*this.finalRatio,this.lines),this.lines)},e.prototype._isIn=function(e,t){return e>=this.xmin&&e<=this.xmax&&t>=this.ymin&&t<=this.ymax},e.prototype._intersect=function(e,t){var n,i;if(t.x>=this.xmin&&t.x<=this.xmax)i=t.y<=this.ymin?this.ymin:this.ymax,n=e.x+(i-e.y)/(t.y-e.y)*(t.x-e.x);else if(t.y>=this.ymin&&t.y<=this.ymax)n=t.x<=this.xmin?this.xmin:this.xmax,i=e.y+(n-e.x)/(t.x-e.x)*(t.y-e.y);else{i=t.y<=this.ymin?this.ymin:this.ymax,n=t.x<=this.xmin?this.xmin:this.xmax;var o=(n-e.x)/(t.x-e.x),s=(i-e.y)/(t.y-e.y);s>o?i=e.y+o*(t.y-e.y):n=e.x+s*(t.x-e.x)}return new r.Point(n,i)},e.prototype._pushLine=function(){this.line&&(1===this.type?0<this.line.length&&this.lines.push(this.line):2===this.type?1<this.line.length&&this.lines.push(this.line):3===this.type&&3<this.line.length&&this.lines.push(this.line)),this.line=[]},e.prototype._moveTo=function(e,t,n){3!==this.type?n&&(e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),t=Math.round((t-(this.ymin+this.margin))*this.finalRatio),this.line.push(new r.Point(e,t))):(n||(e<this.xmin&&(e=this.xmin),e>this.xmax&&(e=this.xmax),t<this.ymin&&(t=this.ymin),t>this.ymax&&(t=this.ymax)),e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),t=Math.round((t-(this.ymin+this.margin))*this.finalRatio),this.line.push(new r.Point(e,t)),this._is_v=this._is_h=!1)},e.prototype._lineTo=function(e,t,n){if(3!==this.type)if(n){if(e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),t=Math.round((t-(this.ymin+this.margin))*this.finalRatio),0<this.line.length&&(n=this.line[this.line.length-1],n.equals(e,t)))return;this.line.push(new r.Point(e,t))}else this.line&&0<this.line.length&&this._pushLine();else if(n||(e<this.xmin&&(e=this.xmin),e>this.xmax&&(e=this.xmax),t<this.ymin&&(t=this.ymin),t>this.ymax&&(t=this.ymax)),e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),t=Math.round((t-(this.ymin+this.margin))*this.finalRatio),this.line&&0<this.line.length){n=this.line[this.line.length-1];var i=n.x===e,o=n.y===t;i&&o||(this._is_h&&i?(n.x=e,n.y=t,n=this.line[this.line.length-2],this._is_h=n.x===e,this._is_v=n.y===t):this._is_v&&o?(n.x=e,n.y=t,n=this.line[this.line.length-2],this._is_h=n.x===e,this._is_v=n.y===t):(this.line.push(new r.Point(e,t)),this._is_h=i,this._is_v=o))}else this.line.push(new r.Point(e,t))},e}(),t.TileClipper=e,e=function(){function e(){}return e.prototype.setExtent=function(e){this._ratio=4096===e?1:4096/e},e.prototype.reset=function(e){this.type=e,this.lines=[],this.line=null},e.prototype.moveTo=function(e,t){this.line&&this.lines.push(this.line),this.line=[];var n=this._ratio;this.line.push(new r.Point(Math.round(e*n),Math.round(t*n)))},e.prototype.lineTo=function(e,t){var n=this._ratio;this.line.push(new r.Point(Math.round(e*n),Math.round(t*n)))},e.prototype.close=function(){var e=this.line;e&&!e[0].isEqual(e[e.length-1])&&e.push(e[0])},e.prototype.result=function(){return this.line&&this.lines.push(this.line),0===this.lines.length?null:(3===this.type&&1!==this._ratio&&o.simplify(64,this.lines),this.lines)},e}(),t.SimpleBuilder=e;var o=function(){function e(){}return e.simplify=function(t,r){if(r){for(var n=-t,i=4096+t,o=-t,s=4096+t,a=[],u=[],c=r.length,l=0;c>l;++l){var f=r[l];if(f&&!(2>f.length))for(var h=f[0],p=void 0,d=f.length,m=1;d>m;++m)p=f[m],h.x===p.x&&(h.x<=n&&(h.y>p.y?(a.push(l),a.push(m),a.push(0),a.push(-1)):(u.push(l),u.push(m),u.push(0),u.push(-1))),h.x>=i&&(h.y<p.y?(a.push(l),a.push(m),a.push(1),a.push(-1)):(u.push(l),u.push(m),u.push(1),u.push(-1)))),h.y===p.y&&(h.y<=o&&(h.x<p.x?(a.push(l),a.push(m),a.push(2),a.push(-1)):(u.push(l),u.push(m),u.push(2),u.push(-1))),h.y>=s&&(h.x>p.x?(a.push(l),a.push(m),a.push(3),a.push(-1)):(u.push(l),u.push(m),u.push(3),u.push(-1)))),h=p}0!==a.length&&0!==u.length&&(e.fillParent(r,u,a),e.fillParent(r,a,u),n=[],e.calcDeltas(n,u,a),e.calcDeltas(n,a,u),e.addDeltas(n,r))}},e.fillParent=function(e,t,r){for(var i=r.length,o=t.length,s=0;o>s;s+=4){for(var a=t[s],u=t[s+1],c=t[s+2],l=e[a][u-1],a=e[a][u],u=8092,f=-1,h=0;i>h;h+=4)if(r[h+2]===c){var p=r[h],d=r[h+1],m=e[p][d-1],p=e[p][d];switch(c){case 0:case 1:n.between(l.y,m.y,p.y)&&n.between(a.y,m.y,p.y)&&(m=Math.abs(p.y-m.y),u>m&&(u=m,f=h));break;case 2:case 3:n.between(l.x,m.x,p.x)&&n.between(a.x,m.x,p.x)&&(m=Math.abs(p.x-m.x),u>m&&(u=m,f=h))}}t[s+3]=f}},e.calcDeltas=function(t,r,n){for(var i=r.length,o=0;i>o;o+=4){var s=e.calcDelta(o,r,n,[]);t.push(r[o]),t.push(r[o+1]),t.push(r[o+2]),t.push(s)}},e.calcDelta=function(t,r,n,i){if(t=r[t+3],-1===t)return 0;var o=i.length;return o>1&&i[o-2]===t?0:(i.push(t),e.calcDelta(t,n,r,i)+1)},e.addDeltas=function(e,t){for(var r=e.length,n=0,i=0;r>i;i+=4){var o=e[i+3];o>n&&(n=o)}for(i=0;r>i;i+=4){var s=t[e[i]],a=e[i+1],o=n-e[i+3];switch(e[i+2]){case 0:s[a-1].x-=o,s[a].x-=o;break;case 1:s[a-1].x+=o,s[a].x+=o;break;case 2:s[a-1].y-=o,s[a].y-=o;break;case 3:s[a-1].y+=o,s[a].y+=o}}for(r=t.length,n=0;r>n;++n)s=t[n],!s||2>s.length||s[s.length-1].x!==s[0].x&&s[s.length-1].y!==s[0].y&&s.push(s[0])},e}()})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleRepository":function(){define(["require","exports","./StyleLayer"],function(e,t,r){return function(){function e(t,r){this.styleJSON=t,this.version=parseFloat(t.version),this.sprite=r?r.spriteUrl:t.sprite,this.glyphs=r?r.glyphsUrl:t.glyphs,this.layers=(t.layers||[]).map(e._create),this._identifyRefLayers()}return e.prototype._identifyRefLayers=function(){for(var e=[],t=[],r=0,n=this.layers;r<n.length;r++){var i=n[r];if(1===i.type){var o=i.sourceLayer,o=o+("|"+JSON.stringify(i.minzoom)),o=o+("|"+JSON.stringify(i.maxzoom)),o=o+("|"+JSON.stringify(i.filter));e.push({key:o,layer:i})}2===i.type&&(o=i.sourceLayer,o+="|"+JSON.stringify(i.minzoom),o+="|"+JSON.stringify(i.maxzoom),o+="|"+JSON.stringify(i.filter),o+="|"+JSON.stringify(i.layout["line-cap"]),o+="|"+JSON.stringify(i.layout["line-join"]),t.push({key:o,layer:i}))}this._assignRefLayers(e),this._assignRefLayers(t)},e.prototype._assignRefLayers=function(e){e.sort(function(e,t){return e.key<t.key?-1:e.key>t.key?1:0});for(var t,r,n=e.length,i=0;n>i;i++){var o=e[i];if(o.key===t)o.layer.refLayerId=r;else if(t=o.key,r=o.layer.id,1===o.layer.type&&!o.layer.hasPaintProperty("fill-outline-color"))for(var s=i+1;n>s;s++){var a=e[s];if(a.key!==t)break;if(a.layer.hasPaintProperty("fill-outline-color")){e[i]=a,e[s]=o,r=a.layer.id;break}}}},e._create=function(e,t,n){switch(t=1-1/(n.length+1)*(1+t),e.type){case"background":return new r.StyleLayer(0,e,t);case"fill":return new r.StyleLayer(1,e,t);case"line":return new r.StyleLayer(2,e,t);case"symbol":return new r.StyleLayer(3,e,t);case"raster":throw Error("Unsupported vector tile raster layer");case"circle":throw Error("Unsupported vector tile circle layer")}throw Error("Unknown vector tile layer")},e}()})}}}),define("esri/layers/vectorTiles/core/workers/worker-init",[],1);